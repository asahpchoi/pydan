{
    "type": "error",
    "data": "Error Invoking LLM",
    "stack": "Traceback (most recent call last):\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 112, in __call__\n    return await self._invoke(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 128, in _invoke\n    return await self._decorated_target(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\json.py\", line 71, in invoke\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 109, in invoke\n    result = await execute_with_retry()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 93, in execute_with_retry\n    async for a in AsyncRetrying(\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\asyncio\\__init__.py\", line 166, in __anext__\n    do = await self.iter(retry_state=self._retry_state)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\asyncio\\__init__.py\", line 153, in iter\n    result = await action(retry_state)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\_utils.py\", line 99, in inner\n    return call(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\__init__.py\", line 398, in <lambda>\n    self._add_action_func(lambda rs: rs.outcome.result())\n                                     ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\\Lib\\concurrent\\futures\\_base.py\", line 449, in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\\Lib\\concurrent\\futures\\_base.py\", line 401, in __get_result\n    raise self._exception\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 101, in execute_with_retry\n    return await attempt()\n           ^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 78, in attempt\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\rate_limiter.py\", line 70, in invoke\n    result = await delegate(prompt, **args)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\json.py\", line 71, in invoke\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 152, in _decorator_target\n    output = await self._execute_llm(prompt, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat_text.py\", line 155, in _execute_llm\n    completion = await self._call_completion_or_cache(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat_text.py\", line 127, in _call_completion_or_cache\n    return await self._cache.get_or_insert(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\cache_interactor.py\", line 50, in get_or_insert\n    entry = await func()\n            ^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\resources\\chat\\completions.py\", line 1702, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1849, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1543, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1644, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.PermissionDeniedError: Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}\n",
    "source": "Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}",
    "details": {
        "prompt": "\n-Goal-\nGiven a text document that is potentially relevant to this activity and a list of entity types, identify all entities of those types from the text and all relationships among the identified entities.\n \n-Steps-\n1. Identify all entities. For each identified entity, extract the following information:\n- entity_name: Name of the entity, capitalized\n- entity_type: One of the following types: [organization,person,geo,event]\n- entity_description: Comprehensive description of the entity's attributes and activities\nFormat each entity as (\"entity\"<|><entity_name><|><entity_type><|><entity_description>)\n \n2. From the entities identified in step 1, identify all pairs of (source_entity, target_entity) that are *clearly related* to each other.\nFor each pair of related entities, extract the following information:\n- source_entity: name of the source entity, as identified in step 1\n- target_entity: name of the target entity, as identified in step 1\n- relationship_description: explanation as to why you think the source entity and the target entity are related to each other\n- relationship_strength: a numeric score indicating strength of the relationship between the source entity and target entity\n Format each relationship as (\"relationship\"<|><source_entity><|><target_entity><|><relationship_description><|><relationship_strength>)\n \n3. Return output in English as a single list of all the entities and relationships identified in steps 1 and 2. Use **##** as the list delimiter.\n \n4. When finished, output <|COMPLETE|>\n \n######################\n-Examples-\n######################\nExample 1:\nEntity_types: ORGANIZATION,PERSON\nText:\nThe Verdantis's Central Institution is scheduled to meet on Monday and Thursday, with the institution planning to release its latest policy decision on Thursday at 1:30 p.m. PDT, followed by a press conference where Central Institution Chair Martin Smith will take questions. Investors expect the Market Strategy Committee to hold its benchmark interest rate steady in a range of 3.5%-3.75%.\n######################\nOutput:\n(\"entity\"<|>CENTRAL INSTITUTION<|>ORGANIZATION<|>The Central Institution is the Federal Reserve of Verdantis, which is setting interest rates on Monday and Thursday)\n##\n(\"entity\"<|>MARTIN SMITH<|>PERSON<|>Martin Smith is the chair of the Central Institution)\n##\n(\"entity\"<|>MARKET STRATEGY COMMITTEE<|>ORGANIZATION<|>The Central Institution committee makes key decisions about interest rates and the growth of Verdantis's money supply)\n##\n(\"relationship\"<|>MARTIN SMITH<|>CENTRAL INSTITUTION<|>Martin Smith is the Chair of the Central Institution and will answer questions at a press conference<|>9)\n<|COMPLETE|>\n\n######################\nExample 2:\nEntity_types: ORGANIZATION\nText:\nTechGlobal's (TG) stock skyrocketed in its opening day on the Global Exchange Thursday. But IPO experts warn that the semiconductor corporation's debut on the public markets isn't indicative of how other newly listed companies may perform.\n\nTechGlobal, a formerly public company, was taken private by Vision Holdings in 2014. The well-established chip designer says it powers 85% of premium smartphones.\n######################\nOutput:\n(\"entity\"<|>TECHGLOBAL<|>ORGANIZATION<|>TechGlobal is a stock now listed on the Global Exchange which powers 85% of premium smartphones)\n##\n(\"entity\"<|>VISION HOLDINGS<|>ORGANIZATION<|>Vision Holdings is a firm that previously owned TechGlobal)\n##\n(\"relationship\"<|>TECHGLOBAL<|>VISION HOLDINGS<|>Vision Holdings formerly owned TechGlobal from 2014 until present<|>5)\n<|COMPLETE|>\n\n######################\nExample 3:\nEntity_types: ORGANIZATION,GEO,PERSON\nText:\nFive Aurelians jailed for 8 years in Firuzabad and widely regarded as hostages are on their way home to Aurelia.\n\nThe swap orchestrated by Quintara was finalized when $8bn of Firuzi funds were transferred to financial institutions in Krohaara, the capital of Quintara.\n\nThe exchange initiated in Firuzabad's capital, Tiruzia, led to the four men and one woman, who are also Firuzi nationals, boarding a chartered flight to Krohaara.\n\nThey were welcomed by senior Aurelian officials and are now on their way to Aurelia's capital, Cashion.\n\nThe Aurelians include 39-year-old businessman Samuel Namara, who has been held in Tiruzia's Alhamia Prison, as well as journalist Durke Bataglani, 59, and environmentalist Meggie Tazbah, 53, who also holds Bratinas nationality.\n######################\nOutput:\n(\"entity\"<|>FIRUZABAD<|>GEO<|>Firuzabad held Aurelians as hostages)\n##\n(\"entity\"<|>AURELIA<|>GEO<|>Country seeking to release hostages)\n##\n(\"entity\"<|>QUINTARA<|>GEO<|>Country that negotiated a swap of money in exchange for hostages)\n##\n##\n(\"entity\"<|>TIRUZIA<|>GEO<|>Capital of Firuzabad where the Aurelians were being held)\n##\n(\"entity\"<|>KROHAARA<|>GEO<|>Capital city in Quintara)\n##\n(\"entity\"<|>CASHION<|>GEO<|>Capital city in Aurelia)\n##\n(\"entity\"<|>SAMUEL NAMARA<|>PERSON<|>Aurelian who spent time in Tiruzia's Alhamia Prison)\n##\n(\"entity\"<|>ALHAMIA PRISON<|>GEO<|>Prison in Tiruzia)\n##\n(\"entity\"<|>DURKE BATAGLANI<|>PERSON<|>Aurelian journalist who was held hostage)\n##\n(\"entity\"<|>MEGGIE TAZBAH<|>PERSON<|>Bratinas national and environmentalist who was held hostage)\n##\n(\"relationship\"<|>FIRUZABAD<|>AURELIA<|>Firuzabad negotiated a hostage exchange with Aurelia<|>2)\n##\n(\"relationship\"<|>QUINTARA<|>AURELIA<|>Quintara brokered the hostage exchange between Firuzabad and Aurelia<|>2)\n##\n(\"relationship\"<|>QUINTARA<|>FIRUZABAD<|>Quintara brokered the hostage exchange between Firuzabad and Aurelia<|>2)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>ALHAMIA PRISON<|>Samuel Namara was a prisoner at Alhamia prison<|>8)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>MEGGIE TAZBAH<|>Samuel Namara and Meggie Tazbah were exchanged in the same hostage release<|>2)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>DURKE BATAGLANI<|>Samuel Namara and Durke Bataglani were exchanged in the same hostage release<|>2)\n##\n(\"relationship\"<|>MEGGIE TAZBAH<|>DURKE BATAGLANI<|>Meggie Tazbah and Durke Bataglani were exchanged in the same hostage release<|>2)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>FIRUZABAD<|>Samuel Namara was a hostage in Firuzabad<|>2)\n##\n(\"relationship\"<|>MEGGIE TAZBAH<|>FIRUZABAD<|>Meggie Tazbah was a hostage in Firuzabad<|>2)\n##\n(\"relationship\"<|>DURKE BATAGLANI<|>FIRUZABAD<|>Durke Bataglani was a hostage in Firuzabad<|>2)\n<|COMPLETE|>\n\n######################\n-Real Data-\n######################\nEntity_types: organization,person,geo,event\nText: impairment\"},{\"check_date\":\"20/06/2023\",\"description\":\"Left Eye Refraction\",\"impact\":\"Moderate myopia with mild astigmatism\",\"risk\":\"Moderate risk of vision impairment\"},{\"check_date\":\"20/06/2023\",\"description\":\"Keratometry Right Eye\",\"impact\":\"Slight irregularity in corneal curvature\",\"risk\":\"Low risk of complications\"},{\"check_date\":\"20/06/2023\",\"description\":\"Keratometry Left Eye\",\"impact\":\"Normal corneal curvature with slight astigmatism\",\"risk\":\"Low risk of complications\"},{\"check_date\":\"20/06/2023\",\"description\":\"Intraocular Pressure (IOP) Right Eye\",\"impact\":\"Slightly low IOP\",\"risk\":\"Low risk of glaucoma\"},{\"check_date\":\"20/06/2023\",\"description\":\"Intraocular Pressure (IOP) Left Eye\",\"impact\":\"Slightly low IOP\",\"risk\":\"Low risk of glaucoma\"},{\"check_date\":\"20/06/2023\",\"description\":\"Central Corneal Thickness (CCT) Right Eye\",\"impact\":\"Normal corneal thickness\",\"risk\":\"Low risk of complications\"},{\"check_date\":\"20/06/2023\",\"description\":\"Central Corneal Thickness (CCT) Left Eye\",\"impact\":\"Normal corneal thickness\",\"risk\":\"Low risk of complications\"}]}\npage_no: 21: {\"items\":[{\"check_date\":\"20/06/2023\",\"description\":\"Patient is a 39.7 year old female with no significant past medical history. She presents for a routine check-up and requests a medical certificate.\",\"impact\":\"Normal assessment, no acute issues detected. Patient appears stable with no immediate health concerns.\",\"risk\":\"Low risk, routine check-up with no alarming symptoms reported.\"},{\"check_date\":\"20/06/2023\",\"description\":\"Nursing assessment and vital signs indicate stable condition: Temperature 36.5°C, Heart Rate 98 bpm, Respiratory Rate 30/min, Blood Pressure 126/53 mmHg, Oxygen Saturation 97%, Weight 51 kg, Height 160 cm, BMI 19.9.\",\"impact\":\"Stable vital signs indicate no immediate health threats.\",\"risk\":\"Continued monitoring is advised due to slightly elevated respiratory rate.\"},{\"check_date\":\"20/06/2023\",\"description\":\"Family history shows no chronic illnesses among family members, indicating low hereditary risks.\",\"impact\":\"No significant family medical history to report.\",\"risk\":\"Minimal risk for hereditary conditions.\"},{\"check_date\":\"20/06/2023\",\"description\":\"Consultation revealed a diagnosis of multiple liver issues, further assessment and monitoring required.\",\"impact\":\"Diagnosis of liver issues could indicate underlying health challenges that need continuous evaluation.\",\"risk\":\"Medium risk for potential liver-related complications.\"}]}\npage_no: 22: {\"items\":[{\"check_date\":\"20/06/2566\",\"description\":\"Initial screening and assessment in outpatient department. Patient has no chronic diseases and normal vitals.\",\"impact\":\"Patient is in general health without any significant underlying conditions noted during the initial assessment.\",\"risk\":\"Low risk due to the absence of chronic diseases or acute symptoms at the time of assessment.\"},{\"check_date\":\"20/06/2566\",\"description\":\"Identification of potential colonic issues including colonic polyp.\",\"impact\":\"Discovery of a colonic polyp could indicate the risk of further gastrointestinal complications.\",\"risk\":\"Moderate risk for colorectal issues, requiring further diagnostic evaluation.\"},{\"check_date\":\"20/06/2566\",\"description\":\"Psychological and social assessments conducted; no immediate concerns identified.\",\"impact\":\"Patient is assessed as stable psychologically with no imminent risk of self-harm.\",\"risk\":\"Low risk for psychological concerns.\"},{\"check_date\":\"20/06/2566\",\"description\":\"Family history noting absence of chronic diseases.\",\"impact\":\"Reduced concern for hereditary conditions affecting the patient.\",\"risk\":\"Low risk based on family medical history.\"},{\"check_date\":\"20/06/2566\",\"description\":\"Allergy assessment shows no known drug or food allergies.\",\"impact\":\"Safer prescribing and treatment plan without the need for allergy considerations.\",\"risk\":\"Low risk regarding allergic reactions.\"}]}\npage_no: 23: {\"items\":[{\"check_date\":\"27/06/2566\",\"description\":\"Vital Signs Assessment\",\"impact\":\"The patient's vital signs are within normal limits, indicating stable health.\",\"risk\":\"Low risk for acute health issues.\"},{\"check_date\":\"27/06/2566\",\"description\":\"Nursing Assessment: Set Gastroscopy + Colonoscopy\",\"impact\":\"Indicates a planned gastroscopy and colonoscopy.\",\"risk\":\"Medium risk associated with procedural complications.\"},{\"check_date\":\"27/06/2566\",\"description\":\"Physician Exam: Non-erosive gastritis diagnosed\",\"impact\":\"The diagnosis of non-erosive gastritis may require lifestyle changes and medication management.\",\"risk\":\"Low risk if managed properly.\"},{\"check_date\":\"27/06/2566\",\"description\":\"3 small sessile polyps found during examination\",\"impact\":\"Presence of polyps may require monitoring or further investigation to rule out malignancy.\",\"risk\":\"Medium risk as polyps can be precursors to cancer.\"},{\"check_date\":\"27/06/2566\",\"description\":\"Current Medication: Dexilant prescribed\",\"impact\":\"Indicates a treatment plan for gastritis.\",\"risk\":\"Low risk if medications are taken as prescribed.\"},{\"check_date\":\"27/06/2566\",\"description\":\"Follow-up appointment scheduled\",\"impact\":\"Ensures ongoing monitoring and management of health conditions.\",\"risk\":\"Low risk if patient adheres to follow-up.\"},{\"check_date\":\"27/06/2566\",\"description\":\"Family History: No chronic diseases reported\",\"impact\":\"Indicates a lower genetic risk for chronic conditions.\",\"risk\":\"Low risk due to absent family history of chronic diseases.\"},{\"check_date\":\"27/06/2566\",\"description\":\"No known\n######################\nOutput:",
        "kwargs": {}
    }
}
{
    "type": "error",
    "data": "Entity Extraction Error",
    "stack": "Traceback (most recent call last):\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\graphrag\\index\\operations\\extract_entities\\graph_extractor.py\", line 127, in __call__\n    result = await self._process_document(text, prompt_variables)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\graphrag\\index\\operations\\extract_entities\\graph_extractor.py\", line 155, in _process_document\n    response = await self._llm(\n               ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat.py\", line 83, in __call__\n    return await self._text_chat_llm(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\features\\tools_parsing.py\", line 120, in __call__\n    return await self._delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 112, in __call__\n    return await self._invoke(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 128, in _invoke\n    return await self._decorated_target(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\json.py\", line 71, in invoke\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 109, in invoke\n    result = await execute_with_retry()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 93, in execute_with_retry\n    async for a in AsyncRetrying(\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\asyncio\\__init__.py\", line 166, in __anext__\n    do = await self.iter(retry_state=self._retry_state)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\asyncio\\__init__.py\", line 153, in iter\n    result = await action(retry_state)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\_utils.py\", line 99, in inner\n    return call(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\__init__.py\", line 398, in <lambda>\n    self._add_action_func(lambda rs: rs.outcome.result())\n                                     ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\\Lib\\concurrent\\futures\\_base.py\", line 449, in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\\Lib\\concurrent\\futures\\_base.py\", line 401, in __get_result\n    raise self._exception\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 101, in execute_with_retry\n    return await attempt()\n           ^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 78, in attempt\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\rate_limiter.py\", line 70, in invoke\n    result = await delegate(prompt, **args)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\json.py\", line 71, in invoke\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 152, in _decorator_target\n    output = await self._execute_llm(prompt, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat_text.py\", line 155, in _execute_llm\n    completion = await self._call_completion_or_cache(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat_text.py\", line 127, in _call_completion_or_cache\n    return await self._cache.get_or_insert(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\cache_interactor.py\", line 50, in get_or_insert\n    entry = await func()\n            ^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\resources\\chat\\completions.py\", line 1702, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1849, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1543, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1644, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.PermissionDeniedError: Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}\n",
    "source": "Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}",
    "details": {
        "doc_index": 0,
        "text": "impairment\"},{\"check_date\":\"20/06/2023\",\"description\":\"Left Eye Refraction\",\"impact\":\"Moderate myopia with mild astigmatism\",\"risk\":\"Moderate risk of vision impairment\"},{\"check_date\":\"20/06/2023\",\"description\":\"Keratometry Right Eye\",\"impact\":\"Slight irregularity in corneal curvature\",\"risk\":\"Low risk of complications\"},{\"check_date\":\"20/06/2023\",\"description\":\"Keratometry Left Eye\",\"impact\":\"Normal corneal curvature with slight astigmatism\",\"risk\":\"Low risk of complications\"},{\"check_date\":\"20/06/2023\",\"description\":\"Intraocular Pressure (IOP) Right Eye\",\"impact\":\"Slightly low IOP\",\"risk\":\"Low risk of glaucoma\"},{\"check_date\":\"20/06/2023\",\"description\":\"Intraocular Pressure (IOP) Left Eye\",\"impact\":\"Slightly low IOP\",\"risk\":\"Low risk of glaucoma\"},{\"check_date\":\"20/06/2023\",\"description\":\"Central Corneal Thickness (CCT) Right Eye\",\"impact\":\"Normal corneal thickness\",\"risk\":\"Low risk of complications\"},{\"check_date\":\"20/06/2023\",\"description\":\"Central Corneal Thickness (CCT) Left Eye\",\"impact\":\"Normal corneal thickness\",\"risk\":\"Low risk of complications\"}]}\npage_no: 21: {\"items\":[{\"check_date\":\"20/06/2023\",\"description\":\"Patient is a 39.7 year old female with no significant past medical history. She presents for a routine check-up and requests a medical certificate.\",\"impact\":\"Normal assessment, no acute issues detected. Patient appears stable with no immediate health concerns.\",\"risk\":\"Low risk, routine check-up with no alarming symptoms reported.\"},{\"check_date\":\"20/06/2023\",\"description\":\"Nursing assessment and vital signs indicate stable condition: Temperature 36.5°C, Heart Rate 98 bpm, Respiratory Rate 30/min, Blood Pressure 126/53 mmHg, Oxygen Saturation 97%, Weight 51 kg, Height 160 cm, BMI 19.9.\",\"impact\":\"Stable vital signs indicate no immediate health threats.\",\"risk\":\"Continued monitoring is advised due to slightly elevated respiratory rate.\"},{\"check_date\":\"20/06/2023\",\"description\":\"Family history shows no chronic illnesses among family members, indicating low hereditary risks.\",\"impact\":\"No significant family medical history to report.\",\"risk\":\"Minimal risk for hereditary conditions.\"},{\"check_date\":\"20/06/2023\",\"description\":\"Consultation revealed a diagnosis of multiple liver issues, further assessment and monitoring required.\",\"impact\":\"Diagnosis of liver issues could indicate underlying health challenges that need continuous evaluation.\",\"risk\":\"Medium risk for potential liver-related complications.\"}]}\npage_no: 22: {\"items\":[{\"check_date\":\"20/06/2566\",\"description\":\"Initial screening and assessment in outpatient department. Patient has no chronic diseases and normal vitals.\",\"impact\":\"Patient is in general health without any significant underlying conditions noted during the initial assessment.\",\"risk\":\"Low risk due to the absence of chronic diseases or acute symptoms at the time of assessment.\"},{\"check_date\":\"20/06/2566\",\"description\":\"Identification of potential colonic issues including colonic polyp.\",\"impact\":\"Discovery of a colonic polyp could indicate the risk of further gastrointestinal complications.\",\"risk\":\"Moderate risk for colorectal issues, requiring further diagnostic evaluation.\"},{\"check_date\":\"20/06/2566\",\"description\":\"Psychological and social assessments conducted; no immediate concerns identified.\",\"impact\":\"Patient is assessed as stable psychologically with no imminent risk of self-harm.\",\"risk\":\"Low risk for psychological concerns.\"},{\"check_date\":\"20/06/2566\",\"description\":\"Family history noting absence of chronic diseases.\",\"impact\":\"Reduced concern for hereditary conditions affecting the patient.\",\"risk\":\"Low risk based on family medical history.\"},{\"check_date\":\"20/06/2566\",\"description\":\"Allergy assessment shows no known drug or food allergies.\",\"impact\":\"Safer prescribing and treatment plan without the need for allergy considerations.\",\"risk\":\"Low risk regarding allergic reactions.\"}]}\npage_no: 23: {\"items\":[{\"check_date\":\"27/06/2566\",\"description\":\"Vital Signs Assessment\",\"impact\":\"The patient's vital signs are within normal limits, indicating stable health.\",\"risk\":\"Low risk for acute health issues.\"},{\"check_date\":\"27/06/2566\",\"description\":\"Nursing Assessment: Set Gastroscopy + Colonoscopy\",\"impact\":\"Indicates a planned gastroscopy and colonoscopy.\",\"risk\":\"Medium risk associated with procedural complications.\"},{\"check_date\":\"27/06/2566\",\"description\":\"Physician Exam: Non-erosive gastritis diagnosed\",\"impact\":\"The diagnosis of non-erosive gastritis may require lifestyle changes and medication management.\",\"risk\":\"Low risk if managed properly.\"},{\"check_date\":\"27/06/2566\",\"description\":\"3 small sessile polyps found during examination\",\"impact\":\"Presence of polyps may require monitoring or further investigation to rule out malignancy.\",\"risk\":\"Medium risk as polyps can be precursors to cancer.\"},{\"check_date\":\"27/06/2566\",\"description\":\"Current Medication: Dexilant prescribed\",\"impact\":\"Indicates a treatment plan for gastritis.\",\"risk\":\"Low risk if medications are taken as prescribed.\"},{\"check_date\":\"27/06/2566\",\"description\":\"Follow-up appointment scheduled\",\"impact\":\"Ensures ongoing monitoring and management of health conditions.\",\"risk\":\"Low risk if patient adheres to follow-up.\"},{\"check_date\":\"27/06/2566\",\"description\":\"Family History: No chronic diseases reported\",\"impact\":\"Indicates a lower genetic risk for chronic conditions.\",\"risk\":\"Low risk due to absent family history of chronic diseases.\"},{\"check_date\":\"27/06/2566\",\"description\":\"No known"
    }
}
{
    "type": "error",
    "data": "Error Invoking LLM",
    "stack": "Traceback (most recent call last):\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 112, in __call__\n    return await self._invoke(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 128, in _invoke\n    return await self._decorated_target(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\json.py\", line 71, in invoke\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 109, in invoke\n    result = await execute_with_retry()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 93, in execute_with_retry\n    async for a in AsyncRetrying(\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\asyncio\\__init__.py\", line 166, in __anext__\n    do = await self.iter(retry_state=self._retry_state)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\asyncio\\__init__.py\", line 153, in iter\n    result = await action(retry_state)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\_utils.py\", line 99, in inner\n    return call(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\__init__.py\", line 398, in <lambda>\n    self._add_action_func(lambda rs: rs.outcome.result())\n                                     ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\\Lib\\concurrent\\futures\\_base.py\", line 449, in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\\Lib\\concurrent\\futures\\_base.py\", line 401, in __get_result\n    raise self._exception\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 101, in execute_with_retry\n    return await attempt()\n           ^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 78, in attempt\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\rate_limiter.py\", line 70, in invoke\n    result = await delegate(prompt, **args)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\json.py\", line 71, in invoke\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 152, in _decorator_target\n    output = await self._execute_llm(prompt, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat_text.py\", line 155, in _execute_llm\n    completion = await self._call_completion_or_cache(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat_text.py\", line 127, in _call_completion_or_cache\n    return await self._cache.get_or_insert(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\cache_interactor.py\", line 50, in get_or_insert\n    entry = await func()\n            ^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\resources\\chat\\completions.py\", line 1702, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1849, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1543, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1644, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.PermissionDeniedError: Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}\n",
    "source": "Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}",
    "details": {
        "prompt": "\n-Goal-\nGiven a text document that is potentially relevant to this activity and a list of entity types, identify all entities of those types from the text and all relationships among the identified entities.\n \n-Steps-\n1. Identify all entities. For each identified entity, extract the following information:\n- entity_name: Name of the entity, capitalized\n- entity_type: One of the following types: [organization,person,geo,event]\n- entity_description: Comprehensive description of the entity's attributes and activities\nFormat each entity as (\"entity\"<|><entity_name><|><entity_type><|><entity_description>)\n \n2. From the entities identified in step 1, identify all pairs of (source_entity, target_entity) that are *clearly related* to each other.\nFor each pair of related entities, extract the following information:\n- source_entity: name of the source entity, as identified in step 1\n- target_entity: name of the target entity, as identified in step 1\n- relationship_description: explanation as to why you think the source entity and the target entity are related to each other\n- relationship_strength: a numeric score indicating strength of the relationship between the source entity and target entity\n Format each relationship as (\"relationship\"<|><source_entity><|><target_entity><|><relationship_description><|><relationship_strength>)\n \n3. Return output in English as a single list of all the entities and relationships identified in steps 1 and 2. Use **##** as the list delimiter.\n \n4. When finished, output <|COMPLETE|>\n \n######################\n-Examples-\n######################\nExample 1:\nEntity_types: ORGANIZATION,PERSON\nText:\nThe Verdantis's Central Institution is scheduled to meet on Monday and Thursday, with the institution planning to release its latest policy decision on Thursday at 1:30 p.m. PDT, followed by a press conference where Central Institution Chair Martin Smith will take questions. Investors expect the Market Strategy Committee to hold its benchmark interest rate steady in a range of 3.5%-3.75%.\n######################\nOutput:\n(\"entity\"<|>CENTRAL INSTITUTION<|>ORGANIZATION<|>The Central Institution is the Federal Reserve of Verdantis, which is setting interest rates on Monday and Thursday)\n##\n(\"entity\"<|>MARTIN SMITH<|>PERSON<|>Martin Smith is the chair of the Central Institution)\n##\n(\"entity\"<|>MARKET STRATEGY COMMITTEE<|>ORGANIZATION<|>The Central Institution committee makes key decisions about interest rates and the growth of Verdantis's money supply)\n##\n(\"relationship\"<|>MARTIN SMITH<|>CENTRAL INSTITUTION<|>Martin Smith is the Chair of the Central Institution and will answer questions at a press conference<|>9)\n<|COMPLETE|>\n\n######################\nExample 2:\nEntity_types: ORGANIZATION\nText:\nTechGlobal's (TG) stock skyrocketed in its opening day on the Global Exchange Thursday. But IPO experts warn that the semiconductor corporation's debut on the public markets isn't indicative of how other newly listed companies may perform.\n\nTechGlobal, a formerly public company, was taken private by Vision Holdings in 2014. The well-established chip designer says it powers 85% of premium smartphones.\n######################\nOutput:\n(\"entity\"<|>TECHGLOBAL<|>ORGANIZATION<|>TechGlobal is a stock now listed on the Global Exchange which powers 85% of premium smartphones)\n##\n(\"entity\"<|>VISION HOLDINGS<|>ORGANIZATION<|>Vision Holdings is a firm that previously owned TechGlobal)\n##\n(\"relationship\"<|>TECHGLOBAL<|>VISION HOLDINGS<|>Vision Holdings formerly owned TechGlobal from 2014 until present<|>5)\n<|COMPLETE|>\n\n######################\nExample 3:\nEntity_types: ORGANIZATION,GEO,PERSON\nText:\nFive Aurelians jailed for 8 years in Firuzabad and widely regarded as hostages are on their way home to Aurelia.\n\nThe swap orchestrated by Quintara was finalized when $8bn of Firuzi funds were transferred to financial institutions in Krohaara, the capital of Quintara.\n\nThe exchange initiated in Firuzabad's capital, Tiruzia, led to the four men and one woman, who are also Firuzi nationals, boarding a chartered flight to Krohaara.\n\nThey were welcomed by senior Aurelian officials and are now on their way to Aurelia's capital, Cashion.\n\nThe Aurelians include 39-year-old businessman Samuel Namara, who has been held in Tiruzia's Alhamia Prison, as well as journalist Durke Bataglani, 59, and environmentalist Meggie Tazbah, 53, who also holds Bratinas nationality.\n######################\nOutput:\n(\"entity\"<|>FIRUZABAD<|>GEO<|>Firuzabad held Aurelians as hostages)\n##\n(\"entity\"<|>AURELIA<|>GEO<|>Country seeking to release hostages)\n##\n(\"entity\"<|>QUINTARA<|>GEO<|>Country that negotiated a swap of money in exchange for hostages)\n##\n##\n(\"entity\"<|>TIRUZIA<|>GEO<|>Capital of Firuzabad where the Aurelians were being held)\n##\n(\"entity\"<|>KROHAARA<|>GEO<|>Capital city in Quintara)\n##\n(\"entity\"<|>CASHION<|>GEO<|>Capital city in Aurelia)\n##\n(\"entity\"<|>SAMUEL NAMARA<|>PERSON<|>Aurelian who spent time in Tiruzia's Alhamia Prison)\n##\n(\"entity\"<|>ALHAMIA PRISON<|>GEO<|>Prison in Tiruzia)\n##\n(\"entity\"<|>DURKE BATAGLANI<|>PERSON<|>Aurelian journalist who was held hostage)\n##\n(\"entity\"<|>MEGGIE TAZBAH<|>PERSON<|>Bratinas national and environmentalist who was held hostage)\n##\n(\"relationship\"<|>FIRUZABAD<|>AURELIA<|>Firuzabad negotiated a hostage exchange with Aurelia<|>2)\n##\n(\"relationship\"<|>QUINTARA<|>AURELIA<|>Quintara brokered the hostage exchange between Firuzabad and Aurelia<|>2)\n##\n(\"relationship\"<|>QUINTARA<|>FIRUZABAD<|>Quintara brokered the hostage exchange between Firuzabad and Aurelia<|>2)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>ALHAMIA PRISON<|>Samuel Namara was a prisoner at Alhamia prison<|>8)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>MEGGIE TAZBAH<|>Samuel Namara and Meggie Tazbah were exchanged in the same hostage release<|>2)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>DURKE BATAGLANI<|>Samuel Namara and Durke Bataglani were exchanged in the same hostage release<|>2)\n##\n(\"relationship\"<|>MEGGIE TAZBAH<|>DURKE BATAGLANI<|>Meggie Tazbah and Durke Bataglani were exchanged in the same hostage release<|>2)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>FIRUZABAD<|>Samuel Namara was a hostage in Firuzabad<|>2)\n##\n(\"relationship\"<|>MEGGIE TAZBAH<|>FIRUZABAD<|>Meggie Tazbah was a hostage in Firuzabad<|>2)\n##\n(\"relationship\"<|>DURKE BATAGLANI<|>FIRUZABAD<|>Durke Bataglani was a hostage in Firuzabad<|>2)\n<|COMPLETE|>\n\n######################\n-Real Data-\n######################\nEntity_types: organization,person,geo,event\nText: page_no: 1: {\"items\":[{\"check_date\":\"12/06/2566\",\"description\":\"Emergency patient assessment categorized as urgent, with vital signs recorded and normal BMI.\",\"impact\":\"Patient has no significant health concerns noted, normal vitals.\",\"risk\":\"Low risk based on psychological and functional assessments.\"},{\"check_date\":\"12/06/2566\",\"description\":\"Family history indicates no chronic diseases reported in family members.\",\"impact\":\"Minimal hereditary risk factors identified.\",\"risk\":\"Low.\"},{\"check_date\":\"12/06/2566\",\"description\":\"Patient has no known allergies and is on stabilized medications without changes.\",\"impact\":\"Patient's treatment managed effectively without adverse reactions reported.\",\"risk\":\"Low.\"},{\"check_date\":\"12/06/2566\",\"description\":\"Patient has no chronic diseases and possesses normal nutritional and functional screening.\",\"impact\":\"Healthy baseline with no immediate health concerns.\",\"risk\":\"Low.\"}]}\npage_no: 2: {\"items\":[{\"check_date\":\"12/06/2023\",\"description\":\"Patient is from emergency crisis, requiring immediate medical attention.\",\"impact\":\"The patient needs urgent care due to the critical nature of their condition.\",\"risk\":\"Potential for rapid deterioration if treatment is delayed.\"},{\"check_date\":\"12/06/2023\",\"description\":\"Vital signs recorded: Temperature 36.50°C, Pulse 76 bpm, Respiratory Rate 20/min, Blood Pressure 138/80 mmHg, Oxygen Saturation 99%, Weight 20kg, Height 160cm, calculated BMI 19.53.\",\"impact\":\"Vital signs are relatively normal but weight suggests possible undernourishment.\",\"risk\":\"Risk of health complications due to low weight (underweight category).\"},{\"check_date\":\"12/06/2023\",\"description\":\"No known allergies to drugs, food, or other substances.\",\"impact\":\"Minimized risk of adverse drug reactions during treatment.\",\"risk\":\"No immediate risk associated with allergies.\"},{\"check_date\":\"12/06/2023\",\"description\":\"No significant past medical history noted during assessment.\",\"impact\":\"Patient has no ongoing chronic illnesses, which may ease treatment.\",\"risk\":\"Possible undiagnosed conditions that could arise.\"},{\"check_date\":\"12/06/2023\",\"description\":\"Family history shows no hereditary diseases indicated.\",\"impact\":\"Low risk for genetically transmitted conditions.\",\"risk\":\"Increased risk if family history changes in future.\"},{\"check_date\":\"12/06/2023\",\"description\":\"Patient is cooperative with psychological assessment and shows no suicidal risk.\",\"impact\":\"Psychological condition is stable and does not require intervention.\",\"risk\":\"Potential for psychological issues if circumstances change.\"},{\"check_date\":\"12/06/2023\",\"description\":\"Patient's occupation is stated as self-employed.\",\"impact\":\"Potential stresses from self-employment could affect health.\",\"risk\":\"Risk of burnout or stress-related conditions.\"}]}\npage_no: 3: {\"items\":[{\"check_date\":\"12/06/2023\",\"description\":\"Multiple liver cysts scattered throughout the liver and group of cysts in the medial segment (size approximately 0.5-4.3 cm).\",\"impact\":\"Presence of multiple cysts without indication of malignant transformation.\",\"risk\":\"Risk of discomfort or complications depending on size and location of cysts.\"},{\"check_date\":\"12/06/2023\",\"description\":\"Fluid-fluid level content in the gallbladder, likely thickening bile content at the neck of the gallbladder.\",\"impact\":\"Potential for gallbladder dysfunction or cholecystitis if not monitored.\",\"risk\":\"Increased risk if surgical intervention is required.\"},{\"check_date\":\"12/06/2023\",\"description\":\"1.0-cm cyst at the lower pole of the left kidney noted, as well as a 0.5-cm lesion also in the lower pole showing characteristics of a hemorrhagic cyst.\",\"impact\":\"Presence of a hemorrhagic cyst may lead to symptoms or complications.\",\"risk\":\"Likely low risk as long as symptoms are monitored.\"},{\"check_date\":\"12/06/2023\",\"description\":\"Overall normal liver, gallbladder, pancreas, spleen, and adrenal glands; both kidneys normal apart from noted cysts.\",\"impact\":\"No immediate concern regarding the functioning of these organs; however, monitoring of cysts is advised.\",\"risk\":\"Possible future complications depending on cyst development.\"}]}\npage_no: 4: {\"items\":[{\"check_date\":\"12/06/2566\",\"description\":\"Patient exhibiting normal vital signs with no immediate acute issues noted.\",\"impact\":\"Patient is stable with vital signs within normal ranges; no immediate intervention required.\",\"risk\":\"Low risk given the current condition.\"},{\"check_date\":\"12/06/2566\",\"description\":\"Nursing assessment indicates the patient is well-compensated psychologically, with no signs of distress.\",\"impact\":\"Patient is emotionally stable and can engage in treatment options; lowers risk of psychological crises.\",\"risk\":\"Psychological health appears stable.\"},{\"check_date\":\"12/06/2566\",\"description\":\"Family history of chronic diseases not documented, suggesting potential lack of hereditary disease risk.\",\"impact\":\"No significant hereditary risk factors reported, reassuring for overall health assessment.\",\"risk\":\"Lower risk of familial chronic diseases impacting the patient's current health.\"},{\"check_date\":\"12/06/2566\",\"description\":\"No allergies reported, indicating lower risk for adverse drug reactions.\",\"impact\":\"Safe administration of medications without concerning allergies will aid in treatment efficacy.\",\"risk\":\"No elevated risk concerning drug allergies.\"},{\"check_date\":\"12/06/2566\",\"description\":\"Current medications are stable with no adjustments indicated, assessing patient on standard treatment protocol.\",\"impact\":\"Continuity in treatment without changes helps stabilize patient's health without interruptions.\",\"risk\":\"Minimal risk associated with medication adjustments.\"}]}\npage_no: 5: {\"items\":[{\"check_date\":\"23-12-2023\",\"description\":\"HPV DNA PCR & Thin prep results are provided in the original report, further evaluation required for interpretation.\",\"\n######################\nOutput:",
        "kwargs": {}
    }
}
{
    "type": "error",
    "data": "Entity Extraction Error",
    "stack": "Traceback (most recent call last):\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\graphrag\\index\\operations\\extract_entities\\graph_extractor.py\", line 127, in __call__\n    result = await self._process_document(text, prompt_variables)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\graphrag\\index\\operations\\extract_entities\\graph_extractor.py\", line 155, in _process_document\n    response = await self._llm(\n               ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat.py\", line 83, in __call__\n    return await self._text_chat_llm(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\features\\tools_parsing.py\", line 120, in __call__\n    return await self._delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 112, in __call__\n    return await self._invoke(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 128, in _invoke\n    return await self._decorated_target(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\json.py\", line 71, in invoke\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 109, in invoke\n    result = await execute_with_retry()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 93, in execute_with_retry\n    async for a in AsyncRetrying(\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\asyncio\\__init__.py\", line 166, in __anext__\n    do = await self.iter(retry_state=self._retry_state)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\asyncio\\__init__.py\", line 153, in iter\n    result = await action(retry_state)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\_utils.py\", line 99, in inner\n    return call(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\__init__.py\", line 398, in <lambda>\n    self._add_action_func(lambda rs: rs.outcome.result())\n                                     ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\\Lib\\concurrent\\futures\\_base.py\", line 449, in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\\Lib\\concurrent\\futures\\_base.py\", line 401, in __get_result\n    raise self._exception\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 101, in execute_with_retry\n    return await attempt()\n           ^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 78, in attempt\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\rate_limiter.py\", line 70, in invoke\n    result = await delegate(prompt, **args)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\json.py\", line 71, in invoke\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 152, in _decorator_target\n    output = await self._execute_llm(prompt, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat_text.py\", line 155, in _execute_llm\n    completion = await self._call_completion_or_cache(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat_text.py\", line 127, in _call_completion_or_cache\n    return await self._cache.get_or_insert(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\cache_interactor.py\", line 50, in get_or_insert\n    entry = await func()\n            ^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\resources\\chat\\completions.py\", line 1702, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1849, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1543, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1644, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.PermissionDeniedError: Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}\n",
    "source": "Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}",
    "details": {
        "doc_index": 0,
        "text": "page_no: 1: {\"items\":[{\"check_date\":\"12/06/2566\",\"description\":\"Emergency patient assessment categorized as urgent, with vital signs recorded and normal BMI.\",\"impact\":\"Patient has no significant health concerns noted, normal vitals.\",\"risk\":\"Low risk based on psychological and functional assessments.\"},{\"check_date\":\"12/06/2566\",\"description\":\"Family history indicates no chronic diseases reported in family members.\",\"impact\":\"Minimal hereditary risk factors identified.\",\"risk\":\"Low.\"},{\"check_date\":\"12/06/2566\",\"description\":\"Patient has no known allergies and is on stabilized medications without changes.\",\"impact\":\"Patient's treatment managed effectively without adverse reactions reported.\",\"risk\":\"Low.\"},{\"check_date\":\"12/06/2566\",\"description\":\"Patient has no chronic diseases and possesses normal nutritional and functional screening.\",\"impact\":\"Healthy baseline with no immediate health concerns.\",\"risk\":\"Low.\"}]}\npage_no: 2: {\"items\":[{\"check_date\":\"12/06/2023\",\"description\":\"Patient is from emergency crisis, requiring immediate medical attention.\",\"impact\":\"The patient needs urgent care due to the critical nature of their condition.\",\"risk\":\"Potential for rapid deterioration if treatment is delayed.\"},{\"check_date\":\"12/06/2023\",\"description\":\"Vital signs recorded: Temperature 36.50°C, Pulse 76 bpm, Respiratory Rate 20/min, Blood Pressure 138/80 mmHg, Oxygen Saturation 99%, Weight 20kg, Height 160cm, calculated BMI 19.53.\",\"impact\":\"Vital signs are relatively normal but weight suggests possible undernourishment.\",\"risk\":\"Risk of health complications due to low weight (underweight category).\"},{\"check_date\":\"12/06/2023\",\"description\":\"No known allergies to drugs, food, or other substances.\",\"impact\":\"Minimized risk of adverse drug reactions during treatment.\",\"risk\":\"No immediate risk associated with allergies.\"},{\"check_date\":\"12/06/2023\",\"description\":\"No significant past medical history noted during assessment.\",\"impact\":\"Patient has no ongoing chronic illnesses, which may ease treatment.\",\"risk\":\"Possible undiagnosed conditions that could arise.\"},{\"check_date\":\"12/06/2023\",\"description\":\"Family history shows no hereditary diseases indicated.\",\"impact\":\"Low risk for genetically transmitted conditions.\",\"risk\":\"Increased risk if family history changes in future.\"},{\"check_date\":\"12/06/2023\",\"description\":\"Patient is cooperative with psychological assessment and shows no suicidal risk.\",\"impact\":\"Psychological condition is stable and does not require intervention.\",\"risk\":\"Potential for psychological issues if circumstances change.\"},{\"check_date\":\"12/06/2023\",\"description\":\"Patient's occupation is stated as self-employed.\",\"impact\":\"Potential stresses from self-employment could affect health.\",\"risk\":\"Risk of burnout or stress-related conditions.\"}]}\npage_no: 3: {\"items\":[{\"check_date\":\"12/06/2023\",\"description\":\"Multiple liver cysts scattered throughout the liver and group of cysts in the medial segment (size approximately 0.5-4.3 cm).\",\"impact\":\"Presence of multiple cysts without indication of malignant transformation.\",\"risk\":\"Risk of discomfort or complications depending on size and location of cysts.\"},{\"check_date\":\"12/06/2023\",\"description\":\"Fluid-fluid level content in the gallbladder, likely thickening bile content at the neck of the gallbladder.\",\"impact\":\"Potential for gallbladder dysfunction or cholecystitis if not monitored.\",\"risk\":\"Increased risk if surgical intervention is required.\"},{\"check_date\":\"12/06/2023\",\"description\":\"1.0-cm cyst at the lower pole of the left kidney noted, as well as a 0.5-cm lesion also in the lower pole showing characteristics of a hemorrhagic cyst.\",\"impact\":\"Presence of a hemorrhagic cyst may lead to symptoms or complications.\",\"risk\":\"Likely low risk as long as symptoms are monitored.\"},{\"check_date\":\"12/06/2023\",\"description\":\"Overall normal liver, gallbladder, pancreas, spleen, and adrenal glands; both kidneys normal apart from noted cysts.\",\"impact\":\"No immediate concern regarding the functioning of these organs; however, monitoring of cysts is advised.\",\"risk\":\"Possible future complications depending on cyst development.\"}]}\npage_no: 4: {\"items\":[{\"check_date\":\"12/06/2566\",\"description\":\"Patient exhibiting normal vital signs with no immediate acute issues noted.\",\"impact\":\"Patient is stable with vital signs within normal ranges; no immediate intervention required.\",\"risk\":\"Low risk given the current condition.\"},{\"check_date\":\"12/06/2566\",\"description\":\"Nursing assessment indicates the patient is well-compensated psychologically, with no signs of distress.\",\"impact\":\"Patient is emotionally stable and can engage in treatment options; lowers risk of psychological crises.\",\"risk\":\"Psychological health appears stable.\"},{\"check_date\":\"12/06/2566\",\"description\":\"Family history of chronic diseases not documented, suggesting potential lack of hereditary disease risk.\",\"impact\":\"No significant hereditary risk factors reported, reassuring for overall health assessment.\",\"risk\":\"Lower risk of familial chronic diseases impacting the patient's current health.\"},{\"check_date\":\"12/06/2566\",\"description\":\"No allergies reported, indicating lower risk for adverse drug reactions.\",\"impact\":\"Safe administration of medications without concerning allergies will aid in treatment efficacy.\",\"risk\":\"No elevated risk concerning drug allergies.\"},{\"check_date\":\"12/06/2566\",\"description\":\"Current medications are stable with no adjustments indicated, assessing patient on standard treatment protocol.\",\"impact\":\"Continuity in treatment without changes helps stabilize patient's health without interruptions.\",\"risk\":\"Minimal risk associated with medication adjustments.\"}]}\npage_no: 5: {\"items\":[{\"check_date\":\"23-12-2023\",\"description\":\"HPV DNA PCR & Thin prep results are provided in the original report, further evaluation required for interpretation.\",\""
    }
}
{
    "type": "error",
    "data": "Error Invoking LLM",
    "stack": "Traceback (most recent call last):\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 112, in __call__\n    return await self._invoke(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 128, in _invoke\n    return await self._decorated_target(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\json.py\", line 71, in invoke\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 109, in invoke\n    result = await execute_with_retry()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 93, in execute_with_retry\n    async for a in AsyncRetrying(\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\asyncio\\__init__.py\", line 166, in __anext__\n    do = await self.iter(retry_state=self._retry_state)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\asyncio\\__init__.py\", line 153, in iter\n    result = await action(retry_state)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\_utils.py\", line 99, in inner\n    return call(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\__init__.py\", line 398, in <lambda>\n    self._add_action_func(lambda rs: rs.outcome.result())\n                                     ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\\Lib\\concurrent\\futures\\_base.py\", line 449, in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\\Lib\\concurrent\\futures\\_base.py\", line 401, in __get_result\n    raise self._exception\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 101, in execute_with_retry\n    return await attempt()\n           ^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 78, in attempt\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\rate_limiter.py\", line 70, in invoke\n    result = await delegate(prompt, **args)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\json.py\", line 71, in invoke\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 152, in _decorator_target\n    output = await self._execute_llm(prompt, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat_text.py\", line 155, in _execute_llm\n    completion = await self._call_completion_or_cache(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat_text.py\", line 127, in _call_completion_or_cache\n    return await self._cache.get_or_insert(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\cache_interactor.py\", line 50, in get_or_insert\n    entry = await func()\n            ^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\resources\\chat\\completions.py\", line 1702, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1849, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1543, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1644, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.PermissionDeniedError: Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}\n",
    "source": "Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}",
    "details": {
        "prompt": "\n-Goal-\nGiven a text document that is potentially relevant to this activity and a list of entity types, identify all entities of those types from the text and all relationships among the identified entities.\n \n-Steps-\n1. Identify all entities. For each identified entity, extract the following information:\n- entity_name: Name of the entity, capitalized\n- entity_type: One of the following types: [organization,person,geo,event]\n- entity_description: Comprehensive description of the entity's attributes and activities\nFormat each entity as (\"entity\"<|><entity_name><|><entity_type><|><entity_description>)\n \n2. From the entities identified in step 1, identify all pairs of (source_entity, target_entity) that are *clearly related* to each other.\nFor each pair of related entities, extract the following information:\n- source_entity: name of the source entity, as identified in step 1\n- target_entity: name of the target entity, as identified in step 1\n- relationship_description: explanation as to why you think the source entity and the target entity are related to each other\n- relationship_strength: a numeric score indicating strength of the relationship between the source entity and target entity\n Format each relationship as (\"relationship\"<|><source_entity><|><target_entity><|><relationship_description><|><relationship_strength>)\n \n3. Return output in English as a single list of all the entities and relationships identified in steps 1 and 2. Use **##** as the list delimiter.\n \n4. When finished, output <|COMPLETE|>\n \n######################\n-Examples-\n######################\nExample 1:\nEntity_types: ORGANIZATION,PERSON\nText:\nThe Verdantis's Central Institution is scheduled to meet on Monday and Thursday, with the institution planning to release its latest policy decision on Thursday at 1:30 p.m. PDT, followed by a press conference where Central Institution Chair Martin Smith will take questions. Investors expect the Market Strategy Committee to hold its benchmark interest rate steady in a range of 3.5%-3.75%.\n######################\nOutput:\n(\"entity\"<|>CENTRAL INSTITUTION<|>ORGANIZATION<|>The Central Institution is the Federal Reserve of Verdantis, which is setting interest rates on Monday and Thursday)\n##\n(\"entity\"<|>MARTIN SMITH<|>PERSON<|>Martin Smith is the chair of the Central Institution)\n##\n(\"entity\"<|>MARKET STRATEGY COMMITTEE<|>ORGANIZATION<|>The Central Institution committee makes key decisions about interest rates and the growth of Verdantis's money supply)\n##\n(\"relationship\"<|>MARTIN SMITH<|>CENTRAL INSTITUTION<|>Martin Smith is the Chair of the Central Institution and will answer questions at a press conference<|>9)\n<|COMPLETE|>\n\n######################\nExample 2:\nEntity_types: ORGANIZATION\nText:\nTechGlobal's (TG) stock skyrocketed in its opening day on the Global Exchange Thursday. But IPO experts warn that the semiconductor corporation's debut on the public markets isn't indicative of how other newly listed companies may perform.\n\nTechGlobal, a formerly public company, was taken private by Vision Holdings in 2014. The well-established chip designer says it powers 85% of premium smartphones.\n######################\nOutput:\n(\"entity\"<|>TECHGLOBAL<|>ORGANIZATION<|>TechGlobal is a stock now listed on the Global Exchange which powers 85% of premium smartphones)\n##\n(\"entity\"<|>VISION HOLDINGS<|>ORGANIZATION<|>Vision Holdings is a firm that previously owned TechGlobal)\n##\n(\"relationship\"<|>TECHGLOBAL<|>VISION HOLDINGS<|>Vision Holdings formerly owned TechGlobal from 2014 until present<|>5)\n<|COMPLETE|>\n\n######################\nExample 3:\nEntity_types: ORGANIZATION,GEO,PERSON\nText:\nFive Aurelians jailed for 8 years in Firuzabad and widely regarded as hostages are on their way home to Aurelia.\n\nThe swap orchestrated by Quintara was finalized when $8bn of Firuzi funds were transferred to financial institutions in Krohaara, the capital of Quintara.\n\nThe exchange initiated in Firuzabad's capital, Tiruzia, led to the four men and one woman, who are also Firuzi nationals, boarding a chartered flight to Krohaara.\n\nThey were welcomed by senior Aurelian officials and are now on their way to Aurelia's capital, Cashion.\n\nThe Aurelians include 39-year-old businessman Samuel Namara, who has been held in Tiruzia's Alhamia Prison, as well as journalist Durke Bataglani, 59, and environmentalist Meggie Tazbah, 53, who also holds Bratinas nationality.\n######################\nOutput:\n(\"entity\"<|>FIRUZABAD<|>GEO<|>Firuzabad held Aurelians as hostages)\n##\n(\"entity\"<|>AURELIA<|>GEO<|>Country seeking to release hostages)\n##\n(\"entity\"<|>QUINTARA<|>GEO<|>Country that negotiated a swap of money in exchange for hostages)\n##\n##\n(\"entity\"<|>TIRUZIA<|>GEO<|>Capital of Firuzabad where the Aurelians were being held)\n##\n(\"entity\"<|>KROHAARA<|>GEO<|>Capital city in Quintara)\n##\n(\"entity\"<|>CASHION<|>GEO<|>Capital city in Aurelia)\n##\n(\"entity\"<|>SAMUEL NAMARA<|>PERSON<|>Aurelian who spent time in Tiruzia's Alhamia Prison)\n##\n(\"entity\"<|>ALHAMIA PRISON<|>GEO<|>Prison in Tiruzia)\n##\n(\"entity\"<|>DURKE BATAGLANI<|>PERSON<|>Aurelian journalist who was held hostage)\n##\n(\"entity\"<|>MEGGIE TAZBAH<|>PERSON<|>Bratinas national and environmentalist who was held hostage)\n##\n(\"relationship\"<|>FIRUZABAD<|>AURELIA<|>Firuzabad negotiated a hostage exchange with Aurelia<|>2)\n##\n(\"relationship\"<|>QUINTARA<|>AURELIA<|>Quintara brokered the hostage exchange between Firuzabad and Aurelia<|>2)\n##\n(\"relationship\"<|>QUINTARA<|>FIRUZABAD<|>Quintara brokered the hostage exchange between Firuzabad and Aurelia<|>2)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>ALHAMIA PRISON<|>Samuel Namara was a prisoner at Alhamia prison<|>8)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>MEGGIE TAZBAH<|>Samuel Namara and Meggie Tazbah were exchanged in the same hostage release<|>2)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>DURKE BATAGLANI<|>Samuel Namara and Durke Bataglani were exchanged in the same hostage release<|>2)\n##\n(\"relationship\"<|>MEGGIE TAZBAH<|>DURKE BATAGLANI<|>Meggie Tazbah and Durke Bataglani were exchanged in the same hostage release<|>2)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>FIRUZABAD<|>Samuel Namara was a hostage in Firuzabad<|>2)\n##\n(\"relationship\"<|>MEGGIE TAZBAH<|>FIRUZABAD<|>Meggie Tazbah was a hostage in Firuzabad<|>2)\n##\n(\"relationship\"<|>DURKE BATAGLANI<|>FIRUZABAD<|>Durke Bataglani was a hostage in Firuzabad<|>2)\n<|COMPLETE|>\n\n######################\n-Real Data-\n######################\nEntity_types: organization,person,geo,event\nText: to major illnesses.\",\"impact\":\"Less concern for hereditary factors affecting current health status.\",\"risk\":\"Minimal risk from family history.\"},{\"check_date\":\"2023-08-26\",\"description\":\"Ultrasound results indicate BIRAD 2 classification, suggesting a benign condition.\",\"impact\":\"Positive outcome as no malignancy is suggested.\",\"risk\":\"Low risk of complications related to identified benign conditions.\"},{\"check_date\":\"2023-08-26\",\"description\":\"No allergies reported, which simplifies medication management.\",\"impact\":\"Reduced risk of adverse drug reactions.\",\"risk\":\"Negligible risk regarding medication interactions.\"},{\"check_date\":\"2023-08-26\",\"description\":\"Follow-up is required for muscle tension and related conditions.\",\"impact\":\"Continued monitoring and management are necessary to avoid complications.\",\"risk\":\"Potential increase in symptoms without proper follow-up.\"}]}\npage_no: 36: {\"items\":[{\"check_date\":\"2023-11-08\",\"description\":\"Patient presents with multiple liver cysts and a 0.5 cm polyp.\",\"impact\":\"Presence of multiple liver cysts could indicate underlying liver issues and the polyp may require monitoring or further investigation.\",\"risk\":\"Risk of complications related to liver cysts and polyps, including pain or obstruction, and potential for malignant transformation in polyps.\"},{\"check_date\":\"2023-11-08\",\"description\":\"No significant alcohol use or known allergies identified.\",\"impact\":\"Reduced risk of complications from allergies or alcohol-related liver disease.\",\"risk\":\"Continued monitoring is required; any new medications or changes in health must be evaluated.\"},{\"check_date\":\"2023-11-08\",\"description\":\"No chronic diseases reported by the patient, such as diabetes or hypertension.\",\"impact\":\"Patient’s overall health seems stable without chronic conditions that could complicate liver issues.\",\"risk\":\"Regular health check-ups are essential to spot any potentially developing chronic issues.\"},{\"check_date\":\"2023-11-08\",\"description\":\"Family history reveals no chronic diseases noted in the family.\",\"impact\":\"Lower hereditary risk factors for chronic diseases affecting the liver.\",\"risk\":\"Continuous assessment of family health history is encouraged for potential future risks.\"}]}\npage_no: 37: {\"items\":[{\"check_date\":\"08/11/2023\",\"description\":\"Multiple cysts scattering in the liver (about 0.8-4.0 cm), unchanged.\",\"impact\":\"Presence of liver cysts can indicate underlying liver conditions but are often benign with no immediate impact on liver function.\",\"risk\":\"Requires monitoring for changes; potential for confusion with other lesions.\"},{\"check_date\":\"08/11/2023\",\"description\":\"No change of a 0.5-cm hypoechonodule in the gallbladder wall, suggestive of gallbladder polyp.\",\"impact\":\"Gallbladder polyp may not cause symptoms but could necessitate further evaluation to rule out malignancy.\",\"risk\":\"Monitoring is advised as there is a potential risk of malignancy associated with gallbladder polyps.\"},{\"check_date\":\"08/11/2023\",\"description\":\"A 1.3-cm cyst at lower pole left kidney, unchanged.\",\"impact\":\"Unchanged cyst suggests it remains stable; typically benign.\",\"risk\":\"Continued follow-up recommended to ensure it does not grow or cause issues.\"},{\"check_date\":\"08/11/2023\",\"description\":\"0.5-cm bright lesion at lower pole left kidney, possibly renal stone.\",\"impact\":\"Presence of a renal stone can lead to urinary obstruction or pain.\",\"risk\":\"May require treatment depending on symptoms and size.\"},{\"check_date\":\"08/11/2023\",\"description\":\"0.6-cm hyperechoic lesion at lower pole left kidney, possibly hemangiomyolipoma.\",\"impact\":\"Typically benign tumors but can bleed or grow in size.\",\"risk\":\"Monitoring necessary; surgery may be required if symptomatic.\"}]}\npage_no: 38: {\"items\":[{\"check_date\":\"20/12/2023\",\"description\":\"Patient is a 40.1-year-old female presenting for gynecological evaluation.\",\"impact\":\"Regular health check with no immediate complications noted.\",\"risk\":\"Slight risks associated with gynecological examinations.\"},{\"check_date\":\"20/12/2023\",\"description\":\"Nursing assessment indicates a pain score of 6.\",\"impact\":\"Moderate pain reported by the patient which should be managed.\",\"risk\":\"Potential complications if pain management is not addressed.\"},{\"check_date\":\"20/12/2023\",\"description\":\"Family history shows no chronic illnesses listed.\",\"impact\":\"Low hereditary risk factors identified.\",\"risk\":\"Patient still needs to be mindful of personal health factors.\"},{\"check_date\":\"20/12/2023\",\"description\":\"She has no significant past medical history (N/A for DM, HT, etc.).\",\"impact\":\"Indicates good overall health status.\",\"risk\":\"No known risks but requires regular monitoring for preventative care.\"}]}\npage_no: 39: {\"items\":[{\"check_date\":\"24/04/2567\",\"description\":\"Patient presented for medical assessment with multiple gallbladder polyps (0.3 cm, 0.4 cm) and a need for monitoring without current treatment changes.\",\"impact\":\"Possible risk of gallbladder complications due to polyps.\",\"risk\":\"Risk of gallbladder cancer if polyps are dysplastic, requires regular monitoring.\"},{\"check_date\":\"24/04/2567\",\"description\":\"Patient has no significant past medical history except for potential family history of chronic diseases (no specifics provided).\",\"impact\":\"Consideration for genetic predispositions to chronic conditions in family history.\",\"risk\":\"Increased risk for future health issues due to family genetic factors.\"},{\"check_date\":\"24/04/2567\",\"description\":\"No allergies reported for drugs, food, or other substances, which decreases the likelihood of allergic reactions during treatment.\",\"impact\":\"Reduced complications from treatment due to lack of known allergies.\",\"risk\":\"Minimal risk for adverse drug reactions\n######################\nOutput:",
        "kwargs": {}
    }
}
{
    "type": "error",
    "data": "Entity Extraction Error",
    "stack": "Traceback (most recent call last):\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\graphrag\\index\\operations\\extract_entities\\graph_extractor.py\", line 127, in __call__\n    result = await self._process_document(text, prompt_variables)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\graphrag\\index\\operations\\extract_entities\\graph_extractor.py\", line 155, in _process_document\n    response = await self._llm(\n               ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat.py\", line 83, in __call__\n    return await self._text_chat_llm(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\features\\tools_parsing.py\", line 120, in __call__\n    return await self._delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 112, in __call__\n    return await self._invoke(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 128, in _invoke\n    return await self._decorated_target(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\json.py\", line 71, in invoke\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 109, in invoke\n    result = await execute_with_retry()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 93, in execute_with_retry\n    async for a in AsyncRetrying(\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\asyncio\\__init__.py\", line 166, in __anext__\n    do = await self.iter(retry_state=self._retry_state)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\asyncio\\__init__.py\", line 153, in iter\n    result = await action(retry_state)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\_utils.py\", line 99, in inner\n    return call(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\__init__.py\", line 398, in <lambda>\n    self._add_action_func(lambda rs: rs.outcome.result())\n                                     ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\\Lib\\concurrent\\futures\\_base.py\", line 449, in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\\Lib\\concurrent\\futures\\_base.py\", line 401, in __get_result\n    raise self._exception\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 101, in execute_with_retry\n    return await attempt()\n           ^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 78, in attempt\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\rate_limiter.py\", line 70, in invoke\n    result = await delegate(prompt, **args)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\json.py\", line 71, in invoke\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 152, in _decorator_target\n    output = await self._execute_llm(prompt, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat_text.py\", line 155, in _execute_llm\n    completion = await self._call_completion_or_cache(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat_text.py\", line 127, in _call_completion_or_cache\n    return await self._cache.get_or_insert(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\cache_interactor.py\", line 50, in get_or_insert\n    entry = await func()\n            ^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\resources\\chat\\completions.py\", line 1702, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1849, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1543, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1644, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.PermissionDeniedError: Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}\n",
    "source": "Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}",
    "details": {
        "doc_index": 0,
        "text": "to major illnesses.\",\"impact\":\"Less concern for hereditary factors affecting current health status.\",\"risk\":\"Minimal risk from family history.\"},{\"check_date\":\"2023-08-26\",\"description\":\"Ultrasound results indicate BIRAD 2 classification, suggesting a benign condition.\",\"impact\":\"Positive outcome as no malignancy is suggested.\",\"risk\":\"Low risk of complications related to identified benign conditions.\"},{\"check_date\":\"2023-08-26\",\"description\":\"No allergies reported, which simplifies medication management.\",\"impact\":\"Reduced risk of adverse drug reactions.\",\"risk\":\"Negligible risk regarding medication interactions.\"},{\"check_date\":\"2023-08-26\",\"description\":\"Follow-up is required for muscle tension and related conditions.\",\"impact\":\"Continued monitoring and management are necessary to avoid complications.\",\"risk\":\"Potential increase in symptoms without proper follow-up.\"}]}\npage_no: 36: {\"items\":[{\"check_date\":\"2023-11-08\",\"description\":\"Patient presents with multiple liver cysts and a 0.5 cm polyp.\",\"impact\":\"Presence of multiple liver cysts could indicate underlying liver issues and the polyp may require monitoring or further investigation.\",\"risk\":\"Risk of complications related to liver cysts and polyps, including pain or obstruction, and potential for malignant transformation in polyps.\"},{\"check_date\":\"2023-11-08\",\"description\":\"No significant alcohol use or known allergies identified.\",\"impact\":\"Reduced risk of complications from allergies or alcohol-related liver disease.\",\"risk\":\"Continued monitoring is required; any new medications or changes in health must be evaluated.\"},{\"check_date\":\"2023-11-08\",\"description\":\"No chronic diseases reported by the patient, such as diabetes or hypertension.\",\"impact\":\"Patient’s overall health seems stable without chronic conditions that could complicate liver issues.\",\"risk\":\"Regular health check-ups are essential to spot any potentially developing chronic issues.\"},{\"check_date\":\"2023-11-08\",\"description\":\"Family history reveals no chronic diseases noted in the family.\",\"impact\":\"Lower hereditary risk factors for chronic diseases affecting the liver.\",\"risk\":\"Continuous assessment of family health history is encouraged for potential future risks.\"}]}\npage_no: 37: {\"items\":[{\"check_date\":\"08/11/2023\",\"description\":\"Multiple cysts scattering in the liver (about 0.8-4.0 cm), unchanged.\",\"impact\":\"Presence of liver cysts can indicate underlying liver conditions but are often benign with no immediate impact on liver function.\",\"risk\":\"Requires monitoring for changes; potential for confusion with other lesions.\"},{\"check_date\":\"08/11/2023\",\"description\":\"No change of a 0.5-cm hypoechonodule in the gallbladder wall, suggestive of gallbladder polyp.\",\"impact\":\"Gallbladder polyp may not cause symptoms but could necessitate further evaluation to rule out malignancy.\",\"risk\":\"Monitoring is advised as there is a potential risk of malignancy associated with gallbladder polyps.\"},{\"check_date\":\"08/11/2023\",\"description\":\"A 1.3-cm cyst at lower pole left kidney, unchanged.\",\"impact\":\"Unchanged cyst suggests it remains stable; typically benign.\",\"risk\":\"Continued follow-up recommended to ensure it does not grow or cause issues.\"},{\"check_date\":\"08/11/2023\",\"description\":\"0.5-cm bright lesion at lower pole left kidney, possibly renal stone.\",\"impact\":\"Presence of a renal stone can lead to urinary obstruction or pain.\",\"risk\":\"May require treatment depending on symptoms and size.\"},{\"check_date\":\"08/11/2023\",\"description\":\"0.6-cm hyperechoic lesion at lower pole left kidney, possibly hemangiomyolipoma.\",\"impact\":\"Typically benign tumors but can bleed or grow in size.\",\"risk\":\"Monitoring necessary; surgery may be required if symptomatic.\"}]}\npage_no: 38: {\"items\":[{\"check_date\":\"20/12/2023\",\"description\":\"Patient is a 40.1-year-old female presenting for gynecological evaluation.\",\"impact\":\"Regular health check with no immediate complications noted.\",\"risk\":\"Slight risks associated with gynecological examinations.\"},{\"check_date\":\"20/12/2023\",\"description\":\"Nursing assessment indicates a pain score of 6.\",\"impact\":\"Moderate pain reported by the patient which should be managed.\",\"risk\":\"Potential complications if pain management is not addressed.\"},{\"check_date\":\"20/12/2023\",\"description\":\"Family history shows no chronic illnesses listed.\",\"impact\":\"Low hereditary risk factors identified.\",\"risk\":\"Patient still needs to be mindful of personal health factors.\"},{\"check_date\":\"20/12/2023\",\"description\":\"She has no significant past medical history (N/A for DM, HT, etc.).\",\"impact\":\"Indicates good overall health status.\",\"risk\":\"No known risks but requires regular monitoring for preventative care.\"}]}\npage_no: 39: {\"items\":[{\"check_date\":\"24/04/2567\",\"description\":\"Patient presented for medical assessment with multiple gallbladder polyps (0.3 cm, 0.4 cm) and a need for monitoring without current treatment changes.\",\"impact\":\"Possible risk of gallbladder complications due to polyps.\",\"risk\":\"Risk of gallbladder cancer if polyps are dysplastic, requires regular monitoring.\"},{\"check_date\":\"24/04/2567\",\"description\":\"Patient has no significant past medical history except for potential family history of chronic diseases (no specifics provided).\",\"impact\":\"Consideration for genetic predispositions to chronic conditions in family history.\",\"risk\":\"Increased risk for future health issues due to family genetic factors.\"},{\"check_date\":\"24/04/2567\",\"description\":\"No allergies reported for drugs, food, or other substances, which decreases the likelihood of allergic reactions during treatment.\",\"impact\":\"Reduced complications from treatment due to lack of known allergies.\",\"risk\":\"Minimal risk for adverse drug reactions"
    }
}
{
    "type": "error",
    "data": "Error Invoking LLM",
    "stack": "Traceback (most recent call last):\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 112, in __call__\n    return await self._invoke(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 128, in _invoke\n    return await self._decorated_target(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\json.py\", line 71, in invoke\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 109, in invoke\n    result = await execute_with_retry()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 93, in execute_with_retry\n    async for a in AsyncRetrying(\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\asyncio\\__init__.py\", line 166, in __anext__\n    do = await self.iter(retry_state=self._retry_state)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\asyncio\\__init__.py\", line 153, in iter\n    result = await action(retry_state)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\_utils.py\", line 99, in inner\n    return call(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\__init__.py\", line 398, in <lambda>\n    self._add_action_func(lambda rs: rs.outcome.result())\n                                     ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\\Lib\\concurrent\\futures\\_base.py\", line 449, in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\\Lib\\concurrent\\futures\\_base.py\", line 401, in __get_result\n    raise self._exception\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 101, in execute_with_retry\n    return await attempt()\n           ^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 78, in attempt\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\rate_limiter.py\", line 70, in invoke\n    result = await delegate(prompt, **args)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\json.py\", line 71, in invoke\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 152, in _decorator_target\n    output = await self._execute_llm(prompt, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat_text.py\", line 155, in _execute_llm\n    completion = await self._call_completion_or_cache(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat_text.py\", line 127, in _call_completion_or_cache\n    return await self._cache.get_or_insert(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\cache_interactor.py\", line 50, in get_or_insert\n    entry = await func()\n            ^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\resources\\chat\\completions.py\", line 1702, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1849, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1543, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1644, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.PermissionDeniedError: Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}\n",
    "source": "Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}",
    "details": {
        "prompt": "\n-Goal-\nGiven a text document that is potentially relevant to this activity and a list of entity types, identify all entities of those types from the text and all relationships among the identified entities.\n \n-Steps-\n1. Identify all entities. For each identified entity, extract the following information:\n- entity_name: Name of the entity, capitalized\n- entity_type: One of the following types: [organization,person,geo,event]\n- entity_description: Comprehensive description of the entity's attributes and activities\nFormat each entity as (\"entity\"<|><entity_name><|><entity_type><|><entity_description>)\n \n2. From the entities identified in step 1, identify all pairs of (source_entity, target_entity) that are *clearly related* to each other.\nFor each pair of related entities, extract the following information:\n- source_entity: name of the source entity, as identified in step 1\n- target_entity: name of the target entity, as identified in step 1\n- relationship_description: explanation as to why you think the source entity and the target entity are related to each other\n- relationship_strength: a numeric score indicating strength of the relationship between the source entity and target entity\n Format each relationship as (\"relationship\"<|><source_entity><|><target_entity><|><relationship_description><|><relationship_strength>)\n \n3. Return output in English as a single list of all the entities and relationships identified in steps 1 and 2. Use **##** as the list delimiter.\n \n4. When finished, output <|COMPLETE|>\n \n######################\n-Examples-\n######################\nExample 1:\nEntity_types: ORGANIZATION,PERSON\nText:\nThe Verdantis's Central Institution is scheduled to meet on Monday and Thursday, with the institution planning to release its latest policy decision on Thursday at 1:30 p.m. PDT, followed by a press conference where Central Institution Chair Martin Smith will take questions. Investors expect the Market Strategy Committee to hold its benchmark interest rate steady in a range of 3.5%-3.75%.\n######################\nOutput:\n(\"entity\"<|>CENTRAL INSTITUTION<|>ORGANIZATION<|>The Central Institution is the Federal Reserve of Verdantis, which is setting interest rates on Monday and Thursday)\n##\n(\"entity\"<|>MARTIN SMITH<|>PERSON<|>Martin Smith is the chair of the Central Institution)\n##\n(\"entity\"<|>MARKET STRATEGY COMMITTEE<|>ORGANIZATION<|>The Central Institution committee makes key decisions about interest rates and the growth of Verdantis's money supply)\n##\n(\"relationship\"<|>MARTIN SMITH<|>CENTRAL INSTITUTION<|>Martin Smith is the Chair of the Central Institution and will answer questions at a press conference<|>9)\n<|COMPLETE|>\n\n######################\nExample 2:\nEntity_types: ORGANIZATION\nText:\nTechGlobal's (TG) stock skyrocketed in its opening day on the Global Exchange Thursday. But IPO experts warn that the semiconductor corporation's debut on the public markets isn't indicative of how other newly listed companies may perform.\n\nTechGlobal, a formerly public company, was taken private by Vision Holdings in 2014. The well-established chip designer says it powers 85% of premium smartphones.\n######################\nOutput:\n(\"entity\"<|>TECHGLOBAL<|>ORGANIZATION<|>TechGlobal is a stock now listed on the Global Exchange which powers 85% of premium smartphones)\n##\n(\"entity\"<|>VISION HOLDINGS<|>ORGANIZATION<|>Vision Holdings is a firm that previously owned TechGlobal)\n##\n(\"relationship\"<|>TECHGLOBAL<|>VISION HOLDINGS<|>Vision Holdings formerly owned TechGlobal from 2014 until present<|>5)\n<|COMPLETE|>\n\n######################\nExample 3:\nEntity_types: ORGANIZATION,GEO,PERSON\nText:\nFive Aurelians jailed for 8 years in Firuzabad and widely regarded as hostages are on their way home to Aurelia.\n\nThe swap orchestrated by Quintara was finalized when $8bn of Firuzi funds were transferred to financial institutions in Krohaara, the capital of Quintara.\n\nThe exchange initiated in Firuzabad's capital, Tiruzia, led to the four men and one woman, who are also Firuzi nationals, boarding a chartered flight to Krohaara.\n\nThey were welcomed by senior Aurelian officials and are now on their way to Aurelia's capital, Cashion.\n\nThe Aurelians include 39-year-old businessman Samuel Namara, who has been held in Tiruzia's Alhamia Prison, as well as journalist Durke Bataglani, 59, and environmentalist Meggie Tazbah, 53, who also holds Bratinas nationality.\n######################\nOutput:\n(\"entity\"<|>FIRUZABAD<|>GEO<|>Firuzabad held Aurelians as hostages)\n##\n(\"entity\"<|>AURELIA<|>GEO<|>Country seeking to release hostages)\n##\n(\"entity\"<|>QUINTARA<|>GEO<|>Country that negotiated a swap of money in exchange for hostages)\n##\n##\n(\"entity\"<|>TIRUZIA<|>GEO<|>Capital of Firuzabad where the Aurelians were being held)\n##\n(\"entity\"<|>KROHAARA<|>GEO<|>Capital city in Quintara)\n##\n(\"entity\"<|>CASHION<|>GEO<|>Capital city in Aurelia)\n##\n(\"entity\"<|>SAMUEL NAMARA<|>PERSON<|>Aurelian who spent time in Tiruzia's Alhamia Prison)\n##\n(\"entity\"<|>ALHAMIA PRISON<|>GEO<|>Prison in Tiruzia)\n##\n(\"entity\"<|>DURKE BATAGLANI<|>PERSON<|>Aurelian journalist who was held hostage)\n##\n(\"entity\"<|>MEGGIE TAZBAH<|>PERSON<|>Bratinas national and environmentalist who was held hostage)\n##\n(\"relationship\"<|>FIRUZABAD<|>AURELIA<|>Firuzabad negotiated a hostage exchange with Aurelia<|>2)\n##\n(\"relationship\"<|>QUINTARA<|>AURELIA<|>Quintara brokered the hostage exchange between Firuzabad and Aurelia<|>2)\n##\n(\"relationship\"<|>QUINTARA<|>FIRUZABAD<|>Quintara brokered the hostage exchange between Firuzabad and Aurelia<|>2)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>ALHAMIA PRISON<|>Samuel Namara was a prisoner at Alhamia prison<|>8)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>MEGGIE TAZBAH<|>Samuel Namara and Meggie Tazbah were exchanged in the same hostage release<|>2)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>DURKE BATAGLANI<|>Samuel Namara and Durke Bataglani were exchanged in the same hostage release<|>2)\n##\n(\"relationship\"<|>MEGGIE TAZBAH<|>DURKE BATAGLANI<|>Meggie Tazbah and Durke Bataglani were exchanged in the same hostage release<|>2)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>FIRUZABAD<|>Samuel Namara was a hostage in Firuzabad<|>2)\n##\n(\"relationship\"<|>MEGGIE TAZBAH<|>FIRUZABAD<|>Meggie Tazbah was a hostage in Firuzabad<|>2)\n##\n(\"relationship\"<|>DURKE BATAGLANI<|>FIRUZABAD<|>Durke Bataglani was a hostage in Firuzabad<|>2)\n<|COMPLETE|>\n\n######################\n-Real Data-\n######################\nEntity_types: organization,person,geo,event\nText: \":\"27/06/2566\",\"description\":\"Follow-up appointment scheduled\",\"impact\":\"Ensures ongoing monitoring and management of health conditions.\",\"risk\":\"Low risk if patient adheres to follow-up.\"},{\"check_date\":\"27/06/2566\",\"description\":\"Family History: No chronic diseases reported\",\"impact\":\"Indicates a lower genetic risk for chronic conditions.\",\"risk\":\"Low risk due to absent family history of chronic diseases.\"},{\"check_date\":\"27/06/2566\",\"description\":\"No known allergies reported\",\"impact\":\"Minimizes risk for allergic reactions to medications.\",\"risk\":\"Very low risk.\"}]}\npage_no: 24: {\"items\":[{\"check_date\":\"27/06/2566\",\"description\":\"Endoscopic findings of stomach and duodenum with polypectomy and mild gastritis.\",\"impact\":\"Identification and removal of polyps, management of mild gastritis.\",\"risk\":\"Potential for bleeding and need for further treatment based on histopathology results.\"},{\"check_date\":\"27/06/2566\",\"description\":\"Polypectomy of three small sessile polyps in stomach.\",\"impact\":\"Removal of potentially precancerous polyps, reducing the risk of gastric cancer.\",\"risk\":\"Possibility of complications such as bleeding or perforation.\"},{\"check_date\":\"27/06/2566\",\"description\":\"Histopathology performed on excised polyps and random stomach biopsy.\",\"impact\":\"Determining the nature of the polyps and underlying gastric pathology.\",\"risk\":\"Delayed treatment pending histological analysis results.\"},{\"check_date\":\"27/06/2566\",\"description\":\"Positive rapid urease test.\",\"impact\":\"Indicates presence of Helicobacter pylori, suggests bacterial infection contributing to gastritis.\",\"risk\":\"May require antibiotic treatment to resolve infection.\"},{\"check_date\":\"27/06/2566\",\"description\":\"Findings of mild erythematous mucosa in antrum indicating inflammation.\",\"impact\":\"Identification of antral gastritis, guiding medical management.\",\"risk\":\"If untreated, potential progression to more severe gastric conditions.\"}]}\npage_no: 25: {\"items\":[{\"check_date\":\"2024-06-03\",\"description\":\"EsophagoGastroDuodenoscopy Report for a 39-year-old female with surgical history.\",\"impact\":\"Potential complications from previous surgery may affect findings during the endoscopy.\",\"risk\":\"Increased risk of complications due to prior interventions, such as hemoclip placement.\"}]}\npage_no: 26: {\"items\":[{\"check_date\":\"27/06/2566\",\"description\":\"Colonoscopy procedure performed with normal findings in all evaluated areas.\",\"impact\":\"The colonoscopy returned unremarkable findings, indicating no abnormalities detected within the colon.\",\"risk\":\"Possible procedural complications include colononic redundancy and estimated blood loss.\"},{\"check_date\":\"27/06/2566\",\"description\":\"Patient underwent the procedure due to a follow-up of previously detected polyps.\",\"impact\":\"The follow-up indicated that previous findings were likely lesions or polyps that required monitoring.\",\"risk\":\"Risks associated with polyps may include the potential for malignancy, though current findings were normal.\"},{\"check_date\":\"27/06/2566\",\"description\":\"Bowel preparation regimen used was Picoprep with fair results.\",\"impact\":\"Fair bowel preparation typically ensures a clearer view during colonoscopy, leading to better diagnostic outcomes.\",\"risk\":\"Inadequate bowel preparation can lead to missed lesions or polyps.\"},{\"check_date\":\"27/06/2566\",\"description\":\"Patient’s consent obtained after discussing the nature and possible complications of the procedure.\",\"impact\":\"Having informed consent is essential for procedural legality and patient understanding.\",\"risk\":\"Failure to obtain consent could have legal and ethical implications.\"}]}\npage_no: 27: {\"items\":[{\"check_date\":\"2024-01-03\",\"description\":\"Colonoscopy performed on a 39-year-old female patient to assess the condition of the large intestine.\",\"impact\":\"Normal findings throughout the descending colon, transverse colon, ascending colon, cecum, and terminal ileum.\",\"risk\":\"No unusual findings or complications reported.\"}]}\npage_no: 28: {\"items\":[{\"check_date\":\"27-06-2023\",\"description\":\"Pathological examination results pending original report from Ramkhamhaeng Hospital.\",\"impact\":\"Evaluation of patient's health based on pathological findings is crucial for diagnosis and treatment.\",\"risk\":\"Potential delay in diagnosis if results are inconclusive or not available.\"}]}\npage_no: 29: {\"items\":[{\"check_date\":\"27.06.2023\",\"description\":\"Erosive gastritis with reactive gastropathy, possibly induced by NSAIDs or medications, bile reflux, or vascular causes.\",\"impact\":\"Potential irritation and inflammation of the gastric mucosa leading to discomfort and digestive issues.\",\"risk\":\"Risk of complications due to prolonged gastritis such as bleeding or progression to more severe gastric conditions.\"},{\"check_date\":\"27.06.2023\",\"description\":\"Fundic gland polyps found in gastric mucosa.\",\"impact\":\"Generally benign and typically do not progress to malignancy, indicating low risk.\",\"risk\":\"Observation may be needed to ensure no changes over time.\"},{\"check_date\":\"27.06.2023\",\"description\":\"Absence of H. pylori and intestinal metaplasia.\",\"impact\":\"Negative for chronic infection and precancerous changes, suggesting a favorable histological profile for the stomach.\",\"risk\":\"Continued monitoring necessary, but immediate risk factors are low.\"}]}\npage_no: 30: {\"items\":[{\"check_date\":\"29-06-2023\",\"description\":\"Request for HG Test and Cytology Result\",\"impact\":\"Necessary to determine the presence of any abnormalities in the sample tested.\",\"risk\":\"If abnormalities are found, further testing or treatments may be required.\"}]}\npage_no: 31: {\"items\":[{\"check_date\":\"27/05/2566\",\"description\":\"Emergency triage level 3, assessed as a\n######################\nOutput:",
        "kwargs": {}
    }
}
{
    "type": "error",
    "data": "Entity Extraction Error",
    "stack": "Traceback (most recent call last):\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\graphrag\\index\\operations\\extract_entities\\graph_extractor.py\", line 127, in __call__\n    result = await self._process_document(text, prompt_variables)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\graphrag\\index\\operations\\extract_entities\\graph_extractor.py\", line 155, in _process_document\n    response = await self._llm(\n               ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat.py\", line 83, in __call__\n    return await self._text_chat_llm(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\features\\tools_parsing.py\", line 120, in __call__\n    return await self._delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 112, in __call__\n    return await self._invoke(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 128, in _invoke\n    return await self._decorated_target(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\json.py\", line 71, in invoke\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 109, in invoke\n    result = await execute_with_retry()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 93, in execute_with_retry\n    async for a in AsyncRetrying(\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\asyncio\\__init__.py\", line 166, in __anext__\n    do = await self.iter(retry_state=self._retry_state)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\asyncio\\__init__.py\", line 153, in iter\n    result = await action(retry_state)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\_utils.py\", line 99, in inner\n    return call(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\__init__.py\", line 398, in <lambda>\n    self._add_action_func(lambda rs: rs.outcome.result())\n                                     ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\\Lib\\concurrent\\futures\\_base.py\", line 449, in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\\Lib\\concurrent\\futures\\_base.py\", line 401, in __get_result\n    raise self._exception\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 101, in execute_with_retry\n    return await attempt()\n           ^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 78, in attempt\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\rate_limiter.py\", line 70, in invoke\n    result = await delegate(prompt, **args)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\json.py\", line 71, in invoke\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 152, in _decorator_target\n    output = await self._execute_llm(prompt, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat_text.py\", line 155, in _execute_llm\n    completion = await self._call_completion_or_cache(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat_text.py\", line 127, in _call_completion_or_cache\n    return await self._cache.get_or_insert(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\cache_interactor.py\", line 50, in get_or_insert\n    entry = await func()\n            ^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\resources\\chat\\completions.py\", line 1702, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1849, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1543, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1644, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.PermissionDeniedError: Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}\n",
    "source": "Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}",
    "details": {
        "doc_index": 0,
        "text": "\":\"27/06/2566\",\"description\":\"Follow-up appointment scheduled\",\"impact\":\"Ensures ongoing monitoring and management of health conditions.\",\"risk\":\"Low risk if patient adheres to follow-up.\"},{\"check_date\":\"27/06/2566\",\"description\":\"Family History: No chronic diseases reported\",\"impact\":\"Indicates a lower genetic risk for chronic conditions.\",\"risk\":\"Low risk due to absent family history of chronic diseases.\"},{\"check_date\":\"27/06/2566\",\"description\":\"No known allergies reported\",\"impact\":\"Minimizes risk for allergic reactions to medications.\",\"risk\":\"Very low risk.\"}]}\npage_no: 24: {\"items\":[{\"check_date\":\"27/06/2566\",\"description\":\"Endoscopic findings of stomach and duodenum with polypectomy and mild gastritis.\",\"impact\":\"Identification and removal of polyps, management of mild gastritis.\",\"risk\":\"Potential for bleeding and need for further treatment based on histopathology results.\"},{\"check_date\":\"27/06/2566\",\"description\":\"Polypectomy of three small sessile polyps in stomach.\",\"impact\":\"Removal of potentially precancerous polyps, reducing the risk of gastric cancer.\",\"risk\":\"Possibility of complications such as bleeding or perforation.\"},{\"check_date\":\"27/06/2566\",\"description\":\"Histopathology performed on excised polyps and random stomach biopsy.\",\"impact\":\"Determining the nature of the polyps and underlying gastric pathology.\",\"risk\":\"Delayed treatment pending histological analysis results.\"},{\"check_date\":\"27/06/2566\",\"description\":\"Positive rapid urease test.\",\"impact\":\"Indicates presence of Helicobacter pylori, suggests bacterial infection contributing to gastritis.\",\"risk\":\"May require antibiotic treatment to resolve infection.\"},{\"check_date\":\"27/06/2566\",\"description\":\"Findings of mild erythematous mucosa in antrum indicating inflammation.\",\"impact\":\"Identification of antral gastritis, guiding medical management.\",\"risk\":\"If untreated, potential progression to more severe gastric conditions.\"}]}\npage_no: 25: {\"items\":[{\"check_date\":\"2024-06-03\",\"description\":\"EsophagoGastroDuodenoscopy Report for a 39-year-old female with surgical history.\",\"impact\":\"Potential complications from previous surgery may affect findings during the endoscopy.\",\"risk\":\"Increased risk of complications due to prior interventions, such as hemoclip placement.\"}]}\npage_no: 26: {\"items\":[{\"check_date\":\"27/06/2566\",\"description\":\"Colonoscopy procedure performed with normal findings in all evaluated areas.\",\"impact\":\"The colonoscopy returned unremarkable findings, indicating no abnormalities detected within the colon.\",\"risk\":\"Possible procedural complications include colononic redundancy and estimated blood loss.\"},{\"check_date\":\"27/06/2566\",\"description\":\"Patient underwent the procedure due to a follow-up of previously detected polyps.\",\"impact\":\"The follow-up indicated that previous findings were likely lesions or polyps that required monitoring.\",\"risk\":\"Risks associated with polyps may include the potential for malignancy, though current findings were normal.\"},{\"check_date\":\"27/06/2566\",\"description\":\"Bowel preparation regimen used was Picoprep with fair results.\",\"impact\":\"Fair bowel preparation typically ensures a clearer view during colonoscopy, leading to better diagnostic outcomes.\",\"risk\":\"Inadequate bowel preparation can lead to missed lesions or polyps.\"},{\"check_date\":\"27/06/2566\",\"description\":\"Patient’s consent obtained after discussing the nature and possible complications of the procedure.\",\"impact\":\"Having informed consent is essential for procedural legality and patient understanding.\",\"risk\":\"Failure to obtain consent could have legal and ethical implications.\"}]}\npage_no: 27: {\"items\":[{\"check_date\":\"2024-01-03\",\"description\":\"Colonoscopy performed on a 39-year-old female patient to assess the condition of the large intestine.\",\"impact\":\"Normal findings throughout the descending colon, transverse colon, ascending colon, cecum, and terminal ileum.\",\"risk\":\"No unusual findings or complications reported.\"}]}\npage_no: 28: {\"items\":[{\"check_date\":\"27-06-2023\",\"description\":\"Pathological examination results pending original report from Ramkhamhaeng Hospital.\",\"impact\":\"Evaluation of patient's health based on pathological findings is crucial for diagnosis and treatment.\",\"risk\":\"Potential delay in diagnosis if results are inconclusive or not available.\"}]}\npage_no: 29: {\"items\":[{\"check_date\":\"27.06.2023\",\"description\":\"Erosive gastritis with reactive gastropathy, possibly induced by NSAIDs or medications, bile reflux, or vascular causes.\",\"impact\":\"Potential irritation and inflammation of the gastric mucosa leading to discomfort and digestive issues.\",\"risk\":\"Risk of complications due to prolonged gastritis such as bleeding or progression to more severe gastric conditions.\"},{\"check_date\":\"27.06.2023\",\"description\":\"Fundic gland polyps found in gastric mucosa.\",\"impact\":\"Generally benign and typically do not progress to malignancy, indicating low risk.\",\"risk\":\"Observation may be needed to ensure no changes over time.\"},{\"check_date\":\"27.06.2023\",\"description\":\"Absence of H. pylori and intestinal metaplasia.\",\"impact\":\"Negative for chronic infection and precancerous changes, suggesting a favorable histological profile for the stomach.\",\"risk\":\"Continued monitoring necessary, but immediate risk factors are low.\"}]}\npage_no: 30: {\"items\":[{\"check_date\":\"29-06-2023\",\"description\":\"Request for HG Test and Cytology Result\",\"impact\":\"Necessary to determine the presence of any abnormalities in the sample tested.\",\"risk\":\"If abnormalities are found, further testing or treatments may be required.\"}]}\npage_no: 31: {\"items\":[{\"check_date\":\"27/05/2566\",\"description\":\"Emergency triage level 3, assessed as a"
    }
}
{
    "type": "error",
    "data": "Error Invoking LLM",
    "stack": "Traceback (most recent call last):\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 112, in __call__\n    return await self._invoke(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 128, in _invoke\n    return await self._decorated_target(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\json.py\", line 71, in invoke\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 109, in invoke\n    result = await execute_with_retry()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 93, in execute_with_retry\n    async for a in AsyncRetrying(\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\asyncio\\__init__.py\", line 166, in __anext__\n    do = await self.iter(retry_state=self._retry_state)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\asyncio\\__init__.py\", line 153, in iter\n    result = await action(retry_state)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\_utils.py\", line 99, in inner\n    return call(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\__init__.py\", line 398, in <lambda>\n    self._add_action_func(lambda rs: rs.outcome.result())\n                                     ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\\Lib\\concurrent\\futures\\_base.py\", line 449, in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\\Lib\\concurrent\\futures\\_base.py\", line 401, in __get_result\n    raise self._exception\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 101, in execute_with_retry\n    return await attempt()\n           ^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 78, in attempt\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\rate_limiter.py\", line 70, in invoke\n    result = await delegate(prompt, **args)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\json.py\", line 71, in invoke\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 152, in _decorator_target\n    output = await self._execute_llm(prompt, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat_text.py\", line 155, in _execute_llm\n    completion = await self._call_completion_or_cache(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat_text.py\", line 127, in _call_completion_or_cache\n    return await self._cache.get_or_insert(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\cache_interactor.py\", line 50, in get_or_insert\n    entry = await func()\n            ^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\resources\\chat\\completions.py\", line 1702, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1849, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1543, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1644, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.PermissionDeniedError: Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}\n",
    "source": "Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}",
    "details": {
        "prompt": "\n-Goal-\nGiven a text document that is potentially relevant to this activity and a list of entity types, identify all entities of those types from the text and all relationships among the identified entities.\n \n-Steps-\n1. Identify all entities. For each identified entity, extract the following information:\n- entity_name: Name of the entity, capitalized\n- entity_type: One of the following types: [organization,person,geo,event]\n- entity_description: Comprehensive description of the entity's attributes and activities\nFormat each entity as (\"entity\"<|><entity_name><|><entity_type><|><entity_description>)\n \n2. From the entities identified in step 1, identify all pairs of (source_entity, target_entity) that are *clearly related* to each other.\nFor each pair of related entities, extract the following information:\n- source_entity: name of the source entity, as identified in step 1\n- target_entity: name of the target entity, as identified in step 1\n- relationship_description: explanation as to why you think the source entity and the target entity are related to each other\n- relationship_strength: a numeric score indicating strength of the relationship between the source entity and target entity\n Format each relationship as (\"relationship\"<|><source_entity><|><target_entity><|><relationship_description><|><relationship_strength>)\n \n3. Return output in English as a single list of all the entities and relationships identified in steps 1 and 2. Use **##** as the list delimiter.\n \n4. When finished, output <|COMPLETE|>\n \n######################\n-Examples-\n######################\nExample 1:\nEntity_types: ORGANIZATION,PERSON\nText:\nThe Verdantis's Central Institution is scheduled to meet on Monday and Thursday, with the institution planning to release its latest policy decision on Thursday at 1:30 p.m. PDT, followed by a press conference where Central Institution Chair Martin Smith will take questions. Investors expect the Market Strategy Committee to hold its benchmark interest rate steady in a range of 3.5%-3.75%.\n######################\nOutput:\n(\"entity\"<|>CENTRAL INSTITUTION<|>ORGANIZATION<|>The Central Institution is the Federal Reserve of Verdantis, which is setting interest rates on Monday and Thursday)\n##\n(\"entity\"<|>MARTIN SMITH<|>PERSON<|>Martin Smith is the chair of the Central Institution)\n##\n(\"entity\"<|>MARKET STRATEGY COMMITTEE<|>ORGANIZATION<|>The Central Institution committee makes key decisions about interest rates and the growth of Verdantis's money supply)\n##\n(\"relationship\"<|>MARTIN SMITH<|>CENTRAL INSTITUTION<|>Martin Smith is the Chair of the Central Institution and will answer questions at a press conference<|>9)\n<|COMPLETE|>\n\n######################\nExample 2:\nEntity_types: ORGANIZATION\nText:\nTechGlobal's (TG) stock skyrocketed in its opening day on the Global Exchange Thursday. But IPO experts warn that the semiconductor corporation's debut on the public markets isn't indicative of how other newly listed companies may perform.\n\nTechGlobal, a formerly public company, was taken private by Vision Holdings in 2014. The well-established chip designer says it powers 85% of premium smartphones.\n######################\nOutput:\n(\"entity\"<|>TECHGLOBAL<|>ORGANIZATION<|>TechGlobal is a stock now listed on the Global Exchange which powers 85% of premium smartphones)\n##\n(\"entity\"<|>VISION HOLDINGS<|>ORGANIZATION<|>Vision Holdings is a firm that previously owned TechGlobal)\n##\n(\"relationship\"<|>TECHGLOBAL<|>VISION HOLDINGS<|>Vision Holdings formerly owned TechGlobal from 2014 until present<|>5)\n<|COMPLETE|>\n\n######################\nExample 3:\nEntity_types: ORGANIZATION,GEO,PERSON\nText:\nFive Aurelians jailed for 8 years in Firuzabad and widely regarded as hostages are on their way home to Aurelia.\n\nThe swap orchestrated by Quintara was finalized when $8bn of Firuzi funds were transferred to financial institutions in Krohaara, the capital of Quintara.\n\nThe exchange initiated in Firuzabad's capital, Tiruzia, led to the four men and one woman, who are also Firuzi nationals, boarding a chartered flight to Krohaara.\n\nThey were welcomed by senior Aurelian officials and are now on their way to Aurelia's capital, Cashion.\n\nThe Aurelians include 39-year-old businessman Samuel Namara, who has been held in Tiruzia's Alhamia Prison, as well as journalist Durke Bataglani, 59, and environmentalist Meggie Tazbah, 53, who also holds Bratinas nationality.\n######################\nOutput:\n(\"entity\"<|>FIRUZABAD<|>GEO<|>Firuzabad held Aurelians as hostages)\n##\n(\"entity\"<|>AURELIA<|>GEO<|>Country seeking to release hostages)\n##\n(\"entity\"<|>QUINTARA<|>GEO<|>Country that negotiated a swap of money in exchange for hostages)\n##\n##\n(\"entity\"<|>TIRUZIA<|>GEO<|>Capital of Firuzabad where the Aurelians were being held)\n##\n(\"entity\"<|>KROHAARA<|>GEO<|>Capital city in Quintara)\n##\n(\"entity\"<|>CASHION<|>GEO<|>Capital city in Aurelia)\n##\n(\"entity\"<|>SAMUEL NAMARA<|>PERSON<|>Aurelian who spent time in Tiruzia's Alhamia Prison)\n##\n(\"entity\"<|>ALHAMIA PRISON<|>GEO<|>Prison in Tiruzia)\n##\n(\"entity\"<|>DURKE BATAGLANI<|>PERSON<|>Aurelian journalist who was held hostage)\n##\n(\"entity\"<|>MEGGIE TAZBAH<|>PERSON<|>Bratinas national and environmentalist who was held hostage)\n##\n(\"relationship\"<|>FIRUZABAD<|>AURELIA<|>Firuzabad negotiated a hostage exchange with Aurelia<|>2)\n##\n(\"relationship\"<|>QUINTARA<|>AURELIA<|>Quintara brokered the hostage exchange between Firuzabad and Aurelia<|>2)\n##\n(\"relationship\"<|>QUINTARA<|>FIRUZABAD<|>Quintara brokered the hostage exchange between Firuzabad and Aurelia<|>2)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>ALHAMIA PRISON<|>Samuel Namara was a prisoner at Alhamia prison<|>8)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>MEGGIE TAZBAH<|>Samuel Namara and Meggie Tazbah were exchanged in the same hostage release<|>2)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>DURKE BATAGLANI<|>Samuel Namara and Durke Bataglani were exchanged in the same hostage release<|>2)\n##\n(\"relationship\"<|>MEGGIE TAZBAH<|>DURKE BATAGLANI<|>Meggie Tazbah and Durke Bataglani were exchanged in the same hostage release<|>2)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>FIRUZABAD<|>Samuel Namara was a hostage in Firuzabad<|>2)\n##\n(\"relationship\"<|>MEGGIE TAZBAH<|>FIRUZABAD<|>Meggie Tazbah was a hostage in Firuzabad<|>2)\n##\n(\"relationship\"<|>DURKE BATAGLANI<|>FIRUZABAD<|>Durke Bataglani was a hostage in Firuzabad<|>2)\n<|COMPLETE|>\n\n######################\n-Real Data-\n######################\nEntity_types: organization,person,geo,event\nText: are low.\"}]}\npage_no: 30: {\"items\":[{\"check_date\":\"29-06-2023\",\"description\":\"Request for HG Test and Cytology Result\",\"impact\":\"Necessary to determine the presence of any abnormalities in the sample tested.\",\"risk\":\"If abnormalities are found, further testing or treatments may be required.\"}]}\npage_no: 31: {\"items\":[{\"check_date\":\"27/05/2566\",\"description\":\"Emergency triage level 3, assessed as a non-severe emergency patient. Requested medical certificate.\",\"impact\":\"Non-severe condition, no immediate threat to life.\",\"risk\":\"Low risk of deterioration.\"},{\"check_date\":\"27/05/2566\",\"description\":\"Vital signs indicate stable condition with normal blood oxygen saturation (100%) and having a BMI of 19.65 kg/m2, indicating a normal weight.\",\"impact\":\"Stable vitals suggest good health status at the time of visit.\",\"risk\":\"Low risk of acute health issues.\"},{\"check_date\":\"27/05/2566\",\"description\":\"No chronic diseases reported, however, history indicates a potential family history of chronic conditions, but none specified in detail.\",\"impact\":\"Patient reported no chronic diseases and appeared well oriented with normal psychosocial assessments.\",\"risk\":\"Potential risk due to unspecified family history could indicate possible future health issues.\"},{\"check_date\":\"27/05/2566\",\"description\":\"Patient has indicated a need for further diagnosis and treatment plans, with a noted agreement with the planned treatment.\",\"impact\":\"Patient compliance is crucial for effective treatment and recovery.\",\"risk\":\"Routine risk associated with the healing process and treatment adherence.\"},{\"check_date\":\"27/05/2566\",\"description\":\"Current medication status is ambiguous as no specific adjustments have been documented, leading to potential misunderstanding in ongoing treatment.\",\"impact\":\"Lack of clarity in medication could lead to treatment non-compliance or medication errors.\",\"risk\":\"High risk for potential medication mismanagement.\"}]}\npage_no: 32: {\"items\":[{\"check_date\":\"27-06-2023\",\"description\":\"Save EDTA blood 1 tube\",\"impact\":\"Sample for laboratory testing.\",\"risk\":\"No significant risk identified.\"},{\"check_date\":\"27-06-2023\",\"description\":\"Save Clotted blood 1 tube\",\"impact\":\"Sample for laboratory testing.\",\"risk\":\"No significant risk identified.\"}]}\npage_no: 33: {\"items\":[{\"check_date\":\"27-06-2023\",\"description\":\"Covid-19 Antigen Test\",\"impact\":\"Negative result indicates that the patient is not currently infected with Covid-19.\",\"risk\":\"Low risk for current Covid-19 infection.\"}]}\npage_no: 34: {\"items\":[{\"check_date\":\"2023-07-05\",\"description\":\"Emergency Patient, not critical level 3.\",\"impact\":\"Significant due to the nature of the visit but not critical\",\"risk\":\"Potential for serious condition if not monitored, though stable at the time of assessment.\"},{\"check_date\":\"2023-07-05\",\"description\":\"Blood Pressure: 138/72 mmHg, Stable.\",\"impact\":\"Indicates controlled hypertension\",\"risk\":\"Ongoing monitoring required to prevent escalation.\"},{\"check_date\":\"2023-07-05\",\"description\":\"BMI: 30.42 Kg/m², indicates obesity.\",\"impact\":\"Increased risk for associated health problems such as diabetes and heart disease\",\"risk\":\"Requires dietary and lifestyle modifications.\"},{\"check_date\":\"2023-07-05\",\"description\":\"Temperature: 36.7 °C, stable.\",\"impact\":\"Normal body temperature\",\"risk\":\"No immediate health concerns.\"},{\"check_date\":\"2023-07-05\",\"description\":\"Heart Rate: 90 beats/min, within normal limits.\",\"impact\":\"Normal cardiovascular function\",\"risk\":\"Should be monitored for any future irregularities.\"},{\"check_date\":\"2023-07-05\",\"description\":\"Respiratory Rate: 20 breaths/min, stable.\",\"impact\":\"Indicates good respiratory health\",\"risk\":\"Requires continued observation for underlying respiratory issues.\"},{\"check_date\":\"2023-07-05\",\"description\":\"Oxygen Saturation: 99%, normal limit.\",\"impact\":\"Indicates good pulmonary function\",\"risk\":\"Low risk as current levels are acceptable.\"},{\"check_date\":\"2023-07-05\",\"description\":\"Height: 160 cm, Weight: 51.5 kg.\",\"impact\":\"Normal anthropometric measurements although BMI suggests overweight.\",\"risk\":\"Emphasis on obesity-related health counseling.\"}]}\npage_no: 35: {\"items\":[{\"check_date\":\"2023-08-26\",\"description\":\"Emergency patient with crisis level care.\",\"impact\":\"Patient is in need of immediate medical attention and evaluation due to critical condition.\",\"risk\":\"Possible deterioration without timely medical intervention.\"},{\"check_date\":\"2023-08-26\",\"description\":\"Vital signs assessment shows normal temperature and heart rate but slightly elevated BP.\",\"impact\":\"Stable general status but requires monitoring due to borderline hypertension.\",\"risk\":\"Risk of cardiovascular events if BP remains elevated.\"},{\"check_date\":\"2023-08-26\",\"description\":\"Psychological assessment indicates no special spiritual/cultural support needed, yet there is an acute need for psychological support regarding sudden circumstances.\",\"impact\":\"Patient may experience increased stress and anxiety without appropriate support.\",\"risk\":\"Risk of psychological distress in the absence of support.\"},{\"check_date\":\"2023-08-26\",\"description\":\"Family history of chronic diseases is absent, indicating low genetic predisposition to major illnesses.\",\"impact\":\"Less concern for hereditary factors affecting current health status.\",\"risk\":\"Minimal risk from family history.\"},{\"check_date\":\"2023-08-26\",\"description\":\"Ultrasound results indicate BIRAD 2 classification, suggesting a benign condition.\",\"impact\":\"Positive outcome as no malignancy is suggested.\",\"risk\":\"Low risk of complications related to identified benign conditions.\"},{\"check_date\":\"2023-08-26\",\"description\":\"No allergies reported, which simplifies medication management.\",\"\n######################\nOutput:",
        "kwargs": {}
    }
}
{
    "type": "error",
    "data": "Entity Extraction Error",
    "stack": "Traceback (most recent call last):\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\graphrag\\index\\operations\\extract_entities\\graph_extractor.py\", line 127, in __call__\n    result = await self._process_document(text, prompt_variables)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\graphrag\\index\\operations\\extract_entities\\graph_extractor.py\", line 155, in _process_document\n    response = await self._llm(\n               ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat.py\", line 83, in __call__\n    return await self._text_chat_llm(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\features\\tools_parsing.py\", line 120, in __call__\n    return await self._delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 112, in __call__\n    return await self._invoke(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 128, in _invoke\n    return await self._decorated_target(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\json.py\", line 71, in invoke\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 109, in invoke\n    result = await execute_with_retry()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 93, in execute_with_retry\n    async for a in AsyncRetrying(\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\asyncio\\__init__.py\", line 166, in __anext__\n    do = await self.iter(retry_state=self._retry_state)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\asyncio\\__init__.py\", line 153, in iter\n    result = await action(retry_state)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\_utils.py\", line 99, in inner\n    return call(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\__init__.py\", line 398, in <lambda>\n    self._add_action_func(lambda rs: rs.outcome.result())\n                                     ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\\Lib\\concurrent\\futures\\_base.py\", line 449, in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\\Lib\\concurrent\\futures\\_base.py\", line 401, in __get_result\n    raise self._exception\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 101, in execute_with_retry\n    return await attempt()\n           ^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 78, in attempt\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\rate_limiter.py\", line 70, in invoke\n    result = await delegate(prompt, **args)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\json.py\", line 71, in invoke\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 152, in _decorator_target\n    output = await self._execute_llm(prompt, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat_text.py\", line 155, in _execute_llm\n    completion = await self._call_completion_or_cache(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat_text.py\", line 127, in _call_completion_or_cache\n    return await self._cache.get_or_insert(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\cache_interactor.py\", line 50, in get_or_insert\n    entry = await func()\n            ^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\resources\\chat\\completions.py\", line 1702, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1849, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1543, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1644, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.PermissionDeniedError: Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}\n",
    "source": "Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}",
    "details": {
        "doc_index": 0,
        "text": "are low.\"}]}\npage_no: 30: {\"items\":[{\"check_date\":\"29-06-2023\",\"description\":\"Request for HG Test and Cytology Result\",\"impact\":\"Necessary to determine the presence of any abnormalities in the sample tested.\",\"risk\":\"If abnormalities are found, further testing or treatments may be required.\"}]}\npage_no: 31: {\"items\":[{\"check_date\":\"27/05/2566\",\"description\":\"Emergency triage level 3, assessed as a non-severe emergency patient. Requested medical certificate.\",\"impact\":\"Non-severe condition, no immediate threat to life.\",\"risk\":\"Low risk of deterioration.\"},{\"check_date\":\"27/05/2566\",\"description\":\"Vital signs indicate stable condition with normal blood oxygen saturation (100%) and having a BMI of 19.65 kg/m2, indicating a normal weight.\",\"impact\":\"Stable vitals suggest good health status at the time of visit.\",\"risk\":\"Low risk of acute health issues.\"},{\"check_date\":\"27/05/2566\",\"description\":\"No chronic diseases reported, however, history indicates a potential family history of chronic conditions, but none specified in detail.\",\"impact\":\"Patient reported no chronic diseases and appeared well oriented with normal psychosocial assessments.\",\"risk\":\"Potential risk due to unspecified family history could indicate possible future health issues.\"},{\"check_date\":\"27/05/2566\",\"description\":\"Patient has indicated a need for further diagnosis and treatment plans, with a noted agreement with the planned treatment.\",\"impact\":\"Patient compliance is crucial for effective treatment and recovery.\",\"risk\":\"Routine risk associated with the healing process and treatment adherence.\"},{\"check_date\":\"27/05/2566\",\"description\":\"Current medication status is ambiguous as no specific adjustments have been documented, leading to potential misunderstanding in ongoing treatment.\",\"impact\":\"Lack of clarity in medication could lead to treatment non-compliance or medication errors.\",\"risk\":\"High risk for potential medication mismanagement.\"}]}\npage_no: 32: {\"items\":[{\"check_date\":\"27-06-2023\",\"description\":\"Save EDTA blood 1 tube\",\"impact\":\"Sample for laboratory testing.\",\"risk\":\"No significant risk identified.\"},{\"check_date\":\"27-06-2023\",\"description\":\"Save Clotted blood 1 tube\",\"impact\":\"Sample for laboratory testing.\",\"risk\":\"No significant risk identified.\"}]}\npage_no: 33: {\"items\":[{\"check_date\":\"27-06-2023\",\"description\":\"Covid-19 Antigen Test\",\"impact\":\"Negative result indicates that the patient is not currently infected with Covid-19.\",\"risk\":\"Low risk for current Covid-19 infection.\"}]}\npage_no: 34: {\"items\":[{\"check_date\":\"2023-07-05\",\"description\":\"Emergency Patient, not critical level 3.\",\"impact\":\"Significant due to the nature of the visit but not critical\",\"risk\":\"Potential for serious condition if not monitored, though stable at the time of assessment.\"},{\"check_date\":\"2023-07-05\",\"description\":\"Blood Pressure: 138/72 mmHg, Stable.\",\"impact\":\"Indicates controlled hypertension\",\"risk\":\"Ongoing monitoring required to prevent escalation.\"},{\"check_date\":\"2023-07-05\",\"description\":\"BMI: 30.42 Kg/m², indicates obesity.\",\"impact\":\"Increased risk for associated health problems such as diabetes and heart disease\",\"risk\":\"Requires dietary and lifestyle modifications.\"},{\"check_date\":\"2023-07-05\",\"description\":\"Temperature: 36.7 °C, stable.\",\"impact\":\"Normal body temperature\",\"risk\":\"No immediate health concerns.\"},{\"check_date\":\"2023-07-05\",\"description\":\"Heart Rate: 90 beats/min, within normal limits.\",\"impact\":\"Normal cardiovascular function\",\"risk\":\"Should be monitored for any future irregularities.\"},{\"check_date\":\"2023-07-05\",\"description\":\"Respiratory Rate: 20 breaths/min, stable.\",\"impact\":\"Indicates good respiratory health\",\"risk\":\"Requires continued observation for underlying respiratory issues.\"},{\"check_date\":\"2023-07-05\",\"description\":\"Oxygen Saturation: 99%, normal limit.\",\"impact\":\"Indicates good pulmonary function\",\"risk\":\"Low risk as current levels are acceptable.\"},{\"check_date\":\"2023-07-05\",\"description\":\"Height: 160 cm, Weight: 51.5 kg.\",\"impact\":\"Normal anthropometric measurements although BMI suggests overweight.\",\"risk\":\"Emphasis on obesity-related health counseling.\"}]}\npage_no: 35: {\"items\":[{\"check_date\":\"2023-08-26\",\"description\":\"Emergency patient with crisis level care.\",\"impact\":\"Patient is in need of immediate medical attention and evaluation due to critical condition.\",\"risk\":\"Possible deterioration without timely medical intervention.\"},{\"check_date\":\"2023-08-26\",\"description\":\"Vital signs assessment shows normal temperature and heart rate but slightly elevated BP.\",\"impact\":\"Stable general status but requires monitoring due to borderline hypertension.\",\"risk\":\"Risk of cardiovascular events if BP remains elevated.\"},{\"check_date\":\"2023-08-26\",\"description\":\"Psychological assessment indicates no special spiritual/cultural support needed, yet there is an acute need for psychological support regarding sudden circumstances.\",\"impact\":\"Patient may experience increased stress and anxiety without appropriate support.\",\"risk\":\"Risk of psychological distress in the absence of support.\"},{\"check_date\":\"2023-08-26\",\"description\":\"Family history of chronic diseases is absent, indicating low genetic predisposition to major illnesses.\",\"impact\":\"Less concern for hereditary factors affecting current health status.\",\"risk\":\"Minimal risk from family history.\"},{\"check_date\":\"2023-08-26\",\"description\":\"Ultrasound results indicate BIRAD 2 classification, suggesting a benign condition.\",\"impact\":\"Positive outcome as no malignancy is suggested.\",\"risk\":\"Low risk of complications related to identified benign conditions.\"},{\"check_date\":\"2023-08-26\",\"description\":\"No allergies reported, which simplifies medication management.\",\""
    }
}
{
    "type": "error",
    "data": "Error Invoking LLM",
    "stack": "Traceback (most recent call last):\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 112, in __call__\n    return await self._invoke(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 128, in _invoke\n    return await self._decorated_target(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\json.py\", line 71, in invoke\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 109, in invoke\n    result = await execute_with_retry()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 93, in execute_with_retry\n    async for a in AsyncRetrying(\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\asyncio\\__init__.py\", line 166, in __anext__\n    do = await self.iter(retry_state=self._retry_state)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\asyncio\\__init__.py\", line 153, in iter\n    result = await action(retry_state)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\_utils.py\", line 99, in inner\n    return call(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\__init__.py\", line 398, in <lambda>\n    self._add_action_func(lambda rs: rs.outcome.result())\n                                     ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\\Lib\\concurrent\\futures\\_base.py\", line 449, in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\\Lib\\concurrent\\futures\\_base.py\", line 401, in __get_result\n    raise self._exception\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 101, in execute_with_retry\n    return await attempt()\n           ^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 78, in attempt\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\rate_limiter.py\", line 70, in invoke\n    result = await delegate(prompt, **args)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\json.py\", line 71, in invoke\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 152, in _decorator_target\n    output = await self._execute_llm(prompt, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat_text.py\", line 155, in _execute_llm\n    completion = await self._call_completion_or_cache(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat_text.py\", line 127, in _call_completion_or_cache\n    return await self._cache.get_or_insert(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\cache_interactor.py\", line 50, in get_or_insert\n    entry = await func()\n            ^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\resources\\chat\\completions.py\", line 1702, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1849, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1543, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1644, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.PermissionDeniedError: Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}\n",
    "source": "Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}",
    "details": {
        "prompt": "\n-Goal-\nGiven a text document that is potentially relevant to this activity and a list of entity types, identify all entities of those types from the text and all relationships among the identified entities.\n \n-Steps-\n1. Identify all entities. For each identified entity, extract the following information:\n- entity_name: Name of the entity, capitalized\n- entity_type: One of the following types: [organization,person,geo,event]\n- entity_description: Comprehensive description of the entity's attributes and activities\nFormat each entity as (\"entity\"<|><entity_name><|><entity_type><|><entity_description>)\n \n2. From the entities identified in step 1, identify all pairs of (source_entity, target_entity) that are *clearly related* to each other.\nFor each pair of related entities, extract the following information:\n- source_entity: name of the source entity, as identified in step 1\n- target_entity: name of the target entity, as identified in step 1\n- relationship_description: explanation as to why you think the source entity and the target entity are related to each other\n- relationship_strength: a numeric score indicating strength of the relationship between the source entity and target entity\n Format each relationship as (\"relationship\"<|><source_entity><|><target_entity><|><relationship_description><|><relationship_strength>)\n \n3. Return output in English as a single list of all the entities and relationships identified in steps 1 and 2. Use **##** as the list delimiter.\n \n4. When finished, output <|COMPLETE|>\n \n######################\n-Examples-\n######################\nExample 1:\nEntity_types: ORGANIZATION,PERSON\nText:\nThe Verdantis's Central Institution is scheduled to meet on Monday and Thursday, with the institution planning to release its latest policy decision on Thursday at 1:30 p.m. PDT, followed by a press conference where Central Institution Chair Martin Smith will take questions. Investors expect the Market Strategy Committee to hold its benchmark interest rate steady in a range of 3.5%-3.75%.\n######################\nOutput:\n(\"entity\"<|>CENTRAL INSTITUTION<|>ORGANIZATION<|>The Central Institution is the Federal Reserve of Verdantis, which is setting interest rates on Monday and Thursday)\n##\n(\"entity\"<|>MARTIN SMITH<|>PERSON<|>Martin Smith is the chair of the Central Institution)\n##\n(\"entity\"<|>MARKET STRATEGY COMMITTEE<|>ORGANIZATION<|>The Central Institution committee makes key decisions about interest rates and the growth of Verdantis's money supply)\n##\n(\"relationship\"<|>MARTIN SMITH<|>CENTRAL INSTITUTION<|>Martin Smith is the Chair of the Central Institution and will answer questions at a press conference<|>9)\n<|COMPLETE|>\n\n######################\nExample 2:\nEntity_types: ORGANIZATION\nText:\nTechGlobal's (TG) stock skyrocketed in its opening day on the Global Exchange Thursday. But IPO experts warn that the semiconductor corporation's debut on the public markets isn't indicative of how other newly listed companies may perform.\n\nTechGlobal, a formerly public company, was taken private by Vision Holdings in 2014. The well-established chip designer says it powers 85% of premium smartphones.\n######################\nOutput:\n(\"entity\"<|>TECHGLOBAL<|>ORGANIZATION<|>TechGlobal is a stock now listed on the Global Exchange which powers 85% of premium smartphones)\n##\n(\"entity\"<|>VISION HOLDINGS<|>ORGANIZATION<|>Vision Holdings is a firm that previously owned TechGlobal)\n##\n(\"relationship\"<|>TECHGLOBAL<|>VISION HOLDINGS<|>Vision Holdings formerly owned TechGlobal from 2014 until present<|>5)\n<|COMPLETE|>\n\n######################\nExample 3:\nEntity_types: ORGANIZATION,GEO,PERSON\nText:\nFive Aurelians jailed for 8 years in Firuzabad and widely regarded as hostages are on their way home to Aurelia.\n\nThe swap orchestrated by Quintara was finalized when $8bn of Firuzi funds were transferred to financial institutions in Krohaara, the capital of Quintara.\n\nThe exchange initiated in Firuzabad's capital, Tiruzia, led to the four men and one woman, who are also Firuzi nationals, boarding a chartered flight to Krohaara.\n\nThey were welcomed by senior Aurelian officials and are now on their way to Aurelia's capital, Cashion.\n\nThe Aurelians include 39-year-old businessman Samuel Namara, who has been held in Tiruzia's Alhamia Prison, as well as journalist Durke Bataglani, 59, and environmentalist Meggie Tazbah, 53, who also holds Bratinas nationality.\n######################\nOutput:\n(\"entity\"<|>FIRUZABAD<|>GEO<|>Firuzabad held Aurelians as hostages)\n##\n(\"entity\"<|>AURELIA<|>GEO<|>Country seeking to release hostages)\n##\n(\"entity\"<|>QUINTARA<|>GEO<|>Country that negotiated a swap of money in exchange for hostages)\n##\n##\n(\"entity\"<|>TIRUZIA<|>GEO<|>Capital of Firuzabad where the Aurelians were being held)\n##\n(\"entity\"<|>KROHAARA<|>GEO<|>Capital city in Quintara)\n##\n(\"entity\"<|>CASHION<|>GEO<|>Capital city in Aurelia)\n##\n(\"entity\"<|>SAMUEL NAMARA<|>PERSON<|>Aurelian who spent time in Tiruzia's Alhamia Prison)\n##\n(\"entity\"<|>ALHAMIA PRISON<|>GEO<|>Prison in Tiruzia)\n##\n(\"entity\"<|>DURKE BATAGLANI<|>PERSON<|>Aurelian journalist who was held hostage)\n##\n(\"entity\"<|>MEGGIE TAZBAH<|>PERSON<|>Bratinas national and environmentalist who was held hostage)\n##\n(\"relationship\"<|>FIRUZABAD<|>AURELIA<|>Firuzabad negotiated a hostage exchange with Aurelia<|>2)\n##\n(\"relationship\"<|>QUINTARA<|>AURELIA<|>Quintara brokered the hostage exchange between Firuzabad and Aurelia<|>2)\n##\n(\"relationship\"<|>QUINTARA<|>FIRUZABAD<|>Quintara brokered the hostage exchange between Firuzabad and Aurelia<|>2)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>ALHAMIA PRISON<|>Samuel Namara was a prisoner at Alhamia prison<|>8)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>MEGGIE TAZBAH<|>Samuel Namara and Meggie Tazbah were exchanged in the same hostage release<|>2)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>DURKE BATAGLANI<|>Samuel Namara and Durke Bataglani were exchanged in the same hostage release<|>2)\n##\n(\"relationship\"<|>MEGGIE TAZBAH<|>DURKE BATAGLANI<|>Meggie Tazbah and Durke Bataglani were exchanged in the same hostage release<|>2)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>FIRUZABAD<|>Samuel Namara was a hostage in Firuzabad<|>2)\n##\n(\"relationship\"<|>MEGGIE TAZBAH<|>FIRUZABAD<|>Meggie Tazbah was a hostage in Firuzabad<|>2)\n##\n(\"relationship\"<|>DURKE BATAGLANI<|>FIRUZABAD<|>Durke Bataglani was a hostage in Firuzabad<|>2)\n<|COMPLETE|>\n\n######################\n-Real Data-\n######################\nEntity_types: organization,person,geo,event\nText: allergies.\"},{\"check_date\":\"12/06/2566\",\"description\":\"Current medications are stable with no adjustments indicated, assessing patient on standard treatment protocol.\",\"impact\":\"Continuity in treatment without changes helps stabilize patient's health without interruptions.\",\"risk\":\"Minimal risk associated with medication adjustments.\"}]}\npage_no: 5: {\"items\":[{\"check_date\":\"23-12-2023\",\"description\":\"HPV DNA PCR & Thin prep results are provided in the original report, further evaluation required for interpretation.\",\"impact\":\"Potential high risk for HPV related complications depending on the viral load and oncogenic strain present.\",\"risk\":\"Increased risk of cervical cancer or other HPV-related diseases if results show a high viral presence.\"}]}\npage_no: 6: {\"items\":[{\"check_date\":\"12/06/2023\",\"description\":\"Multiple cysts scattering in the liver (about 0.5-4.4 cm).\",\"impact\":\"Potential for further investigation needed due to multiple cysts present.\",\"risk\":\"Risk of liver complications or further cyst development.\"},{\"check_date\":\"12/06/2023\",\"description\":\"A 0.5-cm hypoechonodule in the gallbladder.\",\"impact\":\"Possible gallbladder issue that requires follow-up.\",\"risk\":\"Risk of gallbladder disease or gallstones.\"},{\"check_date\":\"12/06/2023\",\"description\":\"A 0.9-cm cyst at lower pole left kidney.\",\"impact\":\"Requires monitoring for changes in the cyst size or characteristics.\",\"risk\":\"Potential for kidney-related issues if cyst grows.\"},{\"check_date\":\"12/06/2023\",\"description\":\"A 0.3-cm bright lesion at lower pole left kidney, possibly renal stone.\",\"impact\":\"Potential for kidney stone formation with possible complications.\",\"risk\":\"Risk of renal colic or obstruction.\"},{\"check_date\":\"12/06/2023\",\"description\":\"A 0.5-cm hyperechoic lesion at lower pole left kidney, DDx hemangiomyolipoma or hemorrhagic cyst.\",\"impact\":\"Differential diagnosis needed to assess nature of lesion.\",\"risk\":\"Potential risk of renal damage or malignancy.\"}]}\npage_no: 7: {\"items\":[{\"check_date\":\"12/06/2023\",\"description\":\"Physical examination revealed multiple cysts in the liver and other abnormalities.\",\"impact\":\"Potential for liver complications due to cysts.\",\"risk\":\"Increased risk of hemorrhage and liver dysfunction.\"},{\"check_date\":\"12/06/2023\",\"description\":\"Patient has a family history of chronic diseases (Diabetes Mellitus, Hypertension, Elevated Cholesterol).\",\"impact\":\"Increased risk for developing chronic diseases.\",\"risk\":\"Need for regular monitoring and lifestyle management.\"},{\"check_date\":\"12/06/2023\",\"description\":\"Emergency risk assessment indicates no immediate threats, but further assessment is needed.\",\"impact\":\"Patient is stable but requires ongoing evaluation.\",\"risk\":\"Potential for undiagnosed conditions requiring attention.\"},{\"check_date\":\"12/06/2023\",\"description\":\"Psychological assessment shows no risk of suicide.\",\"impact\":\"Mental health is stable, allowing for better treatment compliance.\",\"risk\":\"Monitor for any future psychological distress.\"},{\"check_date\":\"12/06/2023\",\"description\":\"Nutrition screening indicates normal status with a BMI of 38.5 Kg/m² (Obese).\",\"impact\":\"Need for dietary management to mitigate obesity-related complications.\",\"risk\":\"Higher risk for comorbidities such as cardiovascular diseases.\"}]}\npage_no: 8: {\"items\":[{\"check_date\":\"12/6/2023\",\"description\":\"Stiffness CAVI Right: Estimated age of artery is early 30s.\",\"impact\":\"Arterial stiffness indicates vascular aging and health status.\",\"risk\":\"Increased risk of cardiovascular issues if age exceeds chronological.\"},{\"check_date\":\"12/6/2023\",\"description\":\"Stiffness CAVI Left: Estimated age of artery is early 30s.\",\"impact\":\"Arterial stiffness indicates vascular aging and health status.\",\"risk\":\"Increased risk of cardiovascular issues if age exceeds chronological.\"},{\"check_date\":\"12/6/2023\",\"description\":\"Occlusion ABI Right: Normal.\",\"impact\":\"Blood flow is adequate to the lower extremities.\",\"risk\":\"Low risk for peripheral artery disease.\"},{\"check_date\":\"12/6/2023\",\"description\":\"Occlusion ABI Left: Normal.\",\"impact\":\"Blood flow is adequate to the lower extremities.\",\"risk\":\"Low risk for peripheral artery disease.\"},{\"check_date\":\"12/6/2023\",\"description\":\"Blood pressure readings: Generally normal ranges indicate good cardiovascular health.\",\"impact\":\"Stable cardiovascular status.\",\"risk\":\"Continuation of healthy lifestyle necessary to maintain heart health.\"},{\"check_date\":\"12/6/2023\",\"description\":\"RA UT and LA UT: Values indicate normal functioning and reactivity of arteries.\",\"impact\":\"Normal artery function suggests good vascular health.\",\"risk\":\"Continued assessment needed if symptoms develop.\"}]}\npage_no: 9: {\"items\":[{\"check_date\":\"12-06-2023\",\"description\":\"Stool exam color and appearance shows brown and hard consistency respectively.\",\"impact\":\"Indicates normal stool color but hard consistency may indicate dehydration or dietary issues.\",\"risk\":\"Potential risk of gastrointestinal discomfort or constipation.\"},{\"check_date\":\"12-06-2023\",\"description\":\"WBC, RBC, Ova & Parasite, and Yeast not found in stool tests.\",\"impact\":\"Indicates no signs of infection or parasitic presence in the gastrointestinal tract.\",\"risk\":\"Low risk related to gastrointestinal complications.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Occult blood (FOB) test is negative.\",\"impact\":\"Indicates no hidden blood in the stool, which is a good sign and suggests no gastrointestinal bleeding.\",\"risk\":\"Low risk of serious gastrointestinal pathology.\"}]}\npage_no: 10: {\"items\":[{\"check_date\":\"12-06-202\n######################\nOutput:",
        "kwargs": {}
    }
}
{
    "type": "error",
    "data": "Entity Extraction Error",
    "stack": "Traceback (most recent call last):\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\graphrag\\index\\operations\\extract_entities\\graph_extractor.py\", line 127, in __call__\n    result = await self._process_document(text, prompt_variables)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\graphrag\\index\\operations\\extract_entities\\graph_extractor.py\", line 155, in _process_document\n    response = await self._llm(\n               ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat.py\", line 83, in __call__\n    return await self._text_chat_llm(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\features\\tools_parsing.py\", line 120, in __call__\n    return await self._delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 112, in __call__\n    return await self._invoke(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 128, in _invoke\n    return await self._decorated_target(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\json.py\", line 71, in invoke\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 109, in invoke\n    result = await execute_with_retry()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 93, in execute_with_retry\n    async for a in AsyncRetrying(\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\asyncio\\__init__.py\", line 166, in __anext__\n    do = await self.iter(retry_state=self._retry_state)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\asyncio\\__init__.py\", line 153, in iter\n    result = await action(retry_state)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\_utils.py\", line 99, in inner\n    return call(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\__init__.py\", line 398, in <lambda>\n    self._add_action_func(lambda rs: rs.outcome.result())\n                                     ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\\Lib\\concurrent\\futures\\_base.py\", line 449, in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\\Lib\\concurrent\\futures\\_base.py\", line 401, in __get_result\n    raise self._exception\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 101, in execute_with_retry\n    return await attempt()\n           ^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 78, in attempt\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\rate_limiter.py\", line 70, in invoke\n    result = await delegate(prompt, **args)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\json.py\", line 71, in invoke\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 152, in _decorator_target\n    output = await self._execute_llm(prompt, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat_text.py\", line 155, in _execute_llm\n    completion = await self._call_completion_or_cache(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat_text.py\", line 127, in _call_completion_or_cache\n    return await self._cache.get_or_insert(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\cache_interactor.py\", line 50, in get_or_insert\n    entry = await func()\n            ^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\resources\\chat\\completions.py\", line 1702, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1849, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1543, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1644, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.PermissionDeniedError: Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}\n",
    "source": "Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}",
    "details": {
        "doc_index": 0,
        "text": "allergies.\"},{\"check_date\":\"12/06/2566\",\"description\":\"Current medications are stable with no adjustments indicated, assessing patient on standard treatment protocol.\",\"impact\":\"Continuity in treatment without changes helps stabilize patient's health without interruptions.\",\"risk\":\"Minimal risk associated with medication adjustments.\"}]}\npage_no: 5: {\"items\":[{\"check_date\":\"23-12-2023\",\"description\":\"HPV DNA PCR & Thin prep results are provided in the original report, further evaluation required for interpretation.\",\"impact\":\"Potential high risk for HPV related complications depending on the viral load and oncogenic strain present.\",\"risk\":\"Increased risk of cervical cancer or other HPV-related diseases if results show a high viral presence.\"}]}\npage_no: 6: {\"items\":[{\"check_date\":\"12/06/2023\",\"description\":\"Multiple cysts scattering in the liver (about 0.5-4.4 cm).\",\"impact\":\"Potential for further investigation needed due to multiple cysts present.\",\"risk\":\"Risk of liver complications or further cyst development.\"},{\"check_date\":\"12/06/2023\",\"description\":\"A 0.5-cm hypoechonodule in the gallbladder.\",\"impact\":\"Possible gallbladder issue that requires follow-up.\",\"risk\":\"Risk of gallbladder disease or gallstones.\"},{\"check_date\":\"12/06/2023\",\"description\":\"A 0.9-cm cyst at lower pole left kidney.\",\"impact\":\"Requires monitoring for changes in the cyst size or characteristics.\",\"risk\":\"Potential for kidney-related issues if cyst grows.\"},{\"check_date\":\"12/06/2023\",\"description\":\"A 0.3-cm bright lesion at lower pole left kidney, possibly renal stone.\",\"impact\":\"Potential for kidney stone formation with possible complications.\",\"risk\":\"Risk of renal colic or obstruction.\"},{\"check_date\":\"12/06/2023\",\"description\":\"A 0.5-cm hyperechoic lesion at lower pole left kidney, DDx hemangiomyolipoma or hemorrhagic cyst.\",\"impact\":\"Differential diagnosis needed to assess nature of lesion.\",\"risk\":\"Potential risk of renal damage or malignancy.\"}]}\npage_no: 7: {\"items\":[{\"check_date\":\"12/06/2023\",\"description\":\"Physical examination revealed multiple cysts in the liver and other abnormalities.\",\"impact\":\"Potential for liver complications due to cysts.\",\"risk\":\"Increased risk of hemorrhage and liver dysfunction.\"},{\"check_date\":\"12/06/2023\",\"description\":\"Patient has a family history of chronic diseases (Diabetes Mellitus, Hypertension, Elevated Cholesterol).\",\"impact\":\"Increased risk for developing chronic diseases.\",\"risk\":\"Need for regular monitoring and lifestyle management.\"},{\"check_date\":\"12/06/2023\",\"description\":\"Emergency risk assessment indicates no immediate threats, but further assessment is needed.\",\"impact\":\"Patient is stable but requires ongoing evaluation.\",\"risk\":\"Potential for undiagnosed conditions requiring attention.\"},{\"check_date\":\"12/06/2023\",\"description\":\"Psychological assessment shows no risk of suicide.\",\"impact\":\"Mental health is stable, allowing for better treatment compliance.\",\"risk\":\"Monitor for any future psychological distress.\"},{\"check_date\":\"12/06/2023\",\"description\":\"Nutrition screening indicates normal status with a BMI of 38.5 Kg/m² (Obese).\",\"impact\":\"Need for dietary management to mitigate obesity-related complications.\",\"risk\":\"Higher risk for comorbidities such as cardiovascular diseases.\"}]}\npage_no: 8: {\"items\":[{\"check_date\":\"12/6/2023\",\"description\":\"Stiffness CAVI Right: Estimated age of artery is early 30s.\",\"impact\":\"Arterial stiffness indicates vascular aging and health status.\",\"risk\":\"Increased risk of cardiovascular issues if age exceeds chronological.\"},{\"check_date\":\"12/6/2023\",\"description\":\"Stiffness CAVI Left: Estimated age of artery is early 30s.\",\"impact\":\"Arterial stiffness indicates vascular aging and health status.\",\"risk\":\"Increased risk of cardiovascular issues if age exceeds chronological.\"},{\"check_date\":\"12/6/2023\",\"description\":\"Occlusion ABI Right: Normal.\",\"impact\":\"Blood flow is adequate to the lower extremities.\",\"risk\":\"Low risk for peripheral artery disease.\"},{\"check_date\":\"12/6/2023\",\"description\":\"Occlusion ABI Left: Normal.\",\"impact\":\"Blood flow is adequate to the lower extremities.\",\"risk\":\"Low risk for peripheral artery disease.\"},{\"check_date\":\"12/6/2023\",\"description\":\"Blood pressure readings: Generally normal ranges indicate good cardiovascular health.\",\"impact\":\"Stable cardiovascular status.\",\"risk\":\"Continuation of healthy lifestyle necessary to maintain heart health.\"},{\"check_date\":\"12/6/2023\",\"description\":\"RA UT and LA UT: Values indicate normal functioning and reactivity of arteries.\",\"impact\":\"Normal artery function suggests good vascular health.\",\"risk\":\"Continued assessment needed if symptoms develop.\"}]}\npage_no: 9: {\"items\":[{\"check_date\":\"12-06-2023\",\"description\":\"Stool exam color and appearance shows brown and hard consistency respectively.\",\"impact\":\"Indicates normal stool color but hard consistency may indicate dehydration or dietary issues.\",\"risk\":\"Potential risk of gastrointestinal discomfort or constipation.\"},{\"check_date\":\"12-06-2023\",\"description\":\"WBC, RBC, Ova & Parasite, and Yeast not found in stool tests.\",\"impact\":\"Indicates no signs of infection or parasitic presence in the gastrointestinal tract.\",\"risk\":\"Low risk related to gastrointestinal complications.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Occult blood (FOB) test is negative.\",\"impact\":\"Indicates no hidden blood in the stool, which is a good sign and suggests no gastrointestinal bleeding.\",\"risk\":\"Low risk of serious gastrointestinal pathology.\"}]}\npage_no: 10: {\"items\":[{\"check_date\":\"12-06-202"
    }
}
{
    "type": "error",
    "data": "Error Invoking LLM",
    "stack": "Traceback (most recent call last):\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 112, in __call__\n    return await self._invoke(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 128, in _invoke\n    return await self._decorated_target(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\json.py\", line 71, in invoke\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 109, in invoke\n    result = await execute_with_retry()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 93, in execute_with_retry\n    async for a in AsyncRetrying(\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\asyncio\\__init__.py\", line 166, in __anext__\n    do = await self.iter(retry_state=self._retry_state)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\asyncio\\__init__.py\", line 153, in iter\n    result = await action(retry_state)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\_utils.py\", line 99, in inner\n    return call(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\__init__.py\", line 398, in <lambda>\n    self._add_action_func(lambda rs: rs.outcome.result())\n                                     ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\\Lib\\concurrent\\futures\\_base.py\", line 449, in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\\Lib\\concurrent\\futures\\_base.py\", line 401, in __get_result\n    raise self._exception\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 101, in execute_with_retry\n    return await attempt()\n           ^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 78, in attempt\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\rate_limiter.py\", line 70, in invoke\n    result = await delegate(prompt, **args)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\json.py\", line 71, in invoke\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 152, in _decorator_target\n    output = await self._execute_llm(prompt, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat_text.py\", line 155, in _execute_llm\n    completion = await self._call_completion_or_cache(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat_text.py\", line 127, in _call_completion_or_cache\n    return await self._cache.get_or_insert(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\cache_interactor.py\", line 50, in get_or_insert\n    entry = await func()\n            ^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\resources\\chat\\completions.py\", line 1702, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1849, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1543, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1644, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.PermissionDeniedError: Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}\n",
    "source": "Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}",
    "details": {
        "prompt": "\n-Goal-\nGiven a text document that is potentially relevant to this activity and a list of entity types, identify all entities of those types from the text and all relationships among the identified entities.\n \n-Steps-\n1. Identify all entities. For each identified entity, extract the following information:\n- entity_name: Name of the entity, capitalized\n- entity_type: One of the following types: [organization,person,geo,event]\n- entity_description: Comprehensive description of the entity's attributes and activities\nFormat each entity as (\"entity\"<|><entity_name><|><entity_type><|><entity_description>)\n \n2. From the entities identified in step 1, identify all pairs of (source_entity, target_entity) that are *clearly related* to each other.\nFor each pair of related entities, extract the following information:\n- source_entity: name of the source entity, as identified in step 1\n- target_entity: name of the target entity, as identified in step 1\n- relationship_description: explanation as to why you think the source entity and the target entity are related to each other\n- relationship_strength: a numeric score indicating strength of the relationship between the source entity and target entity\n Format each relationship as (\"relationship\"<|><source_entity><|><target_entity><|><relationship_description><|><relationship_strength>)\n \n3. Return output in English as a single list of all the entities and relationships identified in steps 1 and 2. Use **##** as the list delimiter.\n \n4. When finished, output <|COMPLETE|>\n \n######################\n-Examples-\n######################\nExample 1:\nEntity_types: ORGANIZATION,PERSON\nText:\nThe Verdantis's Central Institution is scheduled to meet on Monday and Thursday, with the institution planning to release its latest policy decision on Thursday at 1:30 p.m. PDT, followed by a press conference where Central Institution Chair Martin Smith will take questions. Investors expect the Market Strategy Committee to hold its benchmark interest rate steady in a range of 3.5%-3.75%.\n######################\nOutput:\n(\"entity\"<|>CENTRAL INSTITUTION<|>ORGANIZATION<|>The Central Institution is the Federal Reserve of Verdantis, which is setting interest rates on Monday and Thursday)\n##\n(\"entity\"<|>MARTIN SMITH<|>PERSON<|>Martin Smith is the chair of the Central Institution)\n##\n(\"entity\"<|>MARKET STRATEGY COMMITTEE<|>ORGANIZATION<|>The Central Institution committee makes key decisions about interest rates and the growth of Verdantis's money supply)\n##\n(\"relationship\"<|>MARTIN SMITH<|>CENTRAL INSTITUTION<|>Martin Smith is the Chair of the Central Institution and will answer questions at a press conference<|>9)\n<|COMPLETE|>\n\n######################\nExample 2:\nEntity_types: ORGANIZATION\nText:\nTechGlobal's (TG) stock skyrocketed in its opening day on the Global Exchange Thursday. But IPO experts warn that the semiconductor corporation's debut on the public markets isn't indicative of how other newly listed companies may perform.\n\nTechGlobal, a formerly public company, was taken private by Vision Holdings in 2014. The well-established chip designer says it powers 85% of premium smartphones.\n######################\nOutput:\n(\"entity\"<|>TECHGLOBAL<|>ORGANIZATION<|>TechGlobal is a stock now listed on the Global Exchange which powers 85% of premium smartphones)\n##\n(\"entity\"<|>VISION HOLDINGS<|>ORGANIZATION<|>Vision Holdings is a firm that previously owned TechGlobal)\n##\n(\"relationship\"<|>TECHGLOBAL<|>VISION HOLDINGS<|>Vision Holdings formerly owned TechGlobal from 2014 until present<|>5)\n<|COMPLETE|>\n\n######################\nExample 3:\nEntity_types: ORGANIZATION,GEO,PERSON\nText:\nFive Aurelians jailed for 8 years in Firuzabad and widely regarded as hostages are on their way home to Aurelia.\n\nThe swap orchestrated by Quintara was finalized when $8bn of Firuzi funds were transferred to financial institutions in Krohaara, the capital of Quintara.\n\nThe exchange initiated in Firuzabad's capital, Tiruzia, led to the four men and one woman, who are also Firuzi nationals, boarding a chartered flight to Krohaara.\n\nThey were welcomed by senior Aurelian officials and are now on their way to Aurelia's capital, Cashion.\n\nThe Aurelians include 39-year-old businessman Samuel Namara, who has been held in Tiruzia's Alhamia Prison, as well as journalist Durke Bataglani, 59, and environmentalist Meggie Tazbah, 53, who also holds Bratinas nationality.\n######################\nOutput:\n(\"entity\"<|>FIRUZABAD<|>GEO<|>Firuzabad held Aurelians as hostages)\n##\n(\"entity\"<|>AURELIA<|>GEO<|>Country seeking to release hostages)\n##\n(\"entity\"<|>QUINTARA<|>GEO<|>Country that negotiated a swap of money in exchange for hostages)\n##\n##\n(\"entity\"<|>TIRUZIA<|>GEO<|>Capital of Firuzabad where the Aurelians were being held)\n##\n(\"entity\"<|>KROHAARA<|>GEO<|>Capital city in Quintara)\n##\n(\"entity\"<|>CASHION<|>GEO<|>Capital city in Aurelia)\n##\n(\"entity\"<|>SAMUEL NAMARA<|>PERSON<|>Aurelian who spent time in Tiruzia's Alhamia Prison)\n##\n(\"entity\"<|>ALHAMIA PRISON<|>GEO<|>Prison in Tiruzia)\n##\n(\"entity\"<|>DURKE BATAGLANI<|>PERSON<|>Aurelian journalist who was held hostage)\n##\n(\"entity\"<|>MEGGIE TAZBAH<|>PERSON<|>Bratinas national and environmentalist who was held hostage)\n##\n(\"relationship\"<|>FIRUZABAD<|>AURELIA<|>Firuzabad negotiated a hostage exchange with Aurelia<|>2)\n##\n(\"relationship\"<|>QUINTARA<|>AURELIA<|>Quintara brokered the hostage exchange between Firuzabad and Aurelia<|>2)\n##\n(\"relationship\"<|>QUINTARA<|>FIRUZABAD<|>Quintara brokered the hostage exchange between Firuzabad and Aurelia<|>2)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>ALHAMIA PRISON<|>Samuel Namara was a prisoner at Alhamia prison<|>8)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>MEGGIE TAZBAH<|>Samuel Namara and Meggie Tazbah were exchanged in the same hostage release<|>2)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>DURKE BATAGLANI<|>Samuel Namara and Durke Bataglani were exchanged in the same hostage release<|>2)\n##\n(\"relationship\"<|>MEGGIE TAZBAH<|>DURKE BATAGLANI<|>Meggie Tazbah and Durke Bataglani were exchanged in the same hostage release<|>2)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>FIRUZABAD<|>Samuel Namara was a hostage in Firuzabad<|>2)\n##\n(\"relationship\"<|>MEGGIE TAZBAH<|>FIRUZABAD<|>Meggie Tazbah was a hostage in Firuzabad<|>2)\n##\n(\"relationship\"<|>DURKE BATAGLANI<|>FIRUZABAD<|>Durke Bataglani was a hostage in Firuzabad<|>2)\n<|COMPLETE|>\n\n######################\n-Real Data-\n######################\nEntity_types: organization,person,geo,event\nText: risk\":\"Low risk for hepatitis B infection.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Anti HBS\",\"impact\":\"18.43 mlU/ml, below the reference threshold of 10 mIU/ml which indicates lack of sufficient immunity against hepatitis B.\",\"risk\":\"Potential risk for hepatitis B due to insufficient immunity.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Anti HCV\",\"impact\":\"Negative, indicating no hepatitis C infection.\",\"risk\":\"Low risk for hepatitis C infection.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Vitamin D Total\",\"impact\":\"26.5 ng/ml, indicating a deficiency as compared to the reference range of 30.000 - 100.000 ng/ml.\",\"risk\":\"Increased risk of osteoporosis and related health issues due to Vitamin D deficiency.\"}]}\npage_no: 15: {\"items\":[{\"check_date\":\"12-06-2023\",\"description\":\"Anti HAV IgM\",\"impact\":\"Negative result indicates no current Hepatitis A infection\",\"risk\":\"Low risk for Hepatitis A infection based on this test\"}]}\npage_no: 16: {\"items\":[{\"check_date\":\"12/06/2023\",\"description\":\"No abnormal opacity in both lungs is seen, mild scoliosis noted.\",\"impact\":\"No active chest disease, normal heart size and mediastinum.\",\"risk\":\"None apparent.\"},{\"check_date\":\"12/06/2023\",\"description\":\"Multiple cysts scattering in the liver (about 0.5-4.4 cm).\",\"impact\":\"Potential liver lesions may require monitoring or further investigation.\",\"risk\":\"Risk of liver disease or complications from cysts.\"},{\"check_date\":\"12/06/2023\",\"description\":\"A 0.5-cm hypoechonodule in the gallbladder, follow up advised.\",\"impact\":\"Potential gallbladder pathology may need to be assessed further.\",\"risk\":\"Possibility of gallbladder disease.\"},{\"check_date\":\"12/06/2023\",\"description\":\"A 0.9-cm cyst at lower pole left kidney, along with a 0.3-cm bright lesion possibly renal stone and a 0.5-cm hyperechoic lesion possibly hemangiomyolipoma or hemorrhagic cyst.\",\"impact\":\"Potential kidney pathology, including cysts or stones, may need monitoring or intervention.\",\"risk\":\"Risk of kidney-related issues, urinary obstruction, or complications.\"}]}\npage_no: 17: {\"items\":[{\"check_date\":\"12/06/2023\",\"description\":\"Evidence of bilateral augmentation mammoplasties and intact prosthesis sacs; heterogeneously dense fibroglandular tissue noted. No suspicious mass or lesions identified.\",\"impact\":\"Presence of augmentation mammoplasties may obscure detection of some abnormalities in mammography.\",\"risk\":\"No immediate risk identified, routine surveillance needed.\"},{\"check_date\":\"12/06/2023\",\"description\":\"Additional ultrasound shows no solid mass or cystic lesion in both breasts.\",\"impact\":\"No findings indicative of malignancy, ensuring breast health as of the date of examination.\",\"risk\":\"Minimal risk; regular self-examinations and clinical follow-ups recommended.\"}]}\npage_no: 18: {\"items\":[{\"check_date\":\"12-06-2023\",\"description\":\"Normal sinus rhythm, Possible Anterior infarct, age undetermined\",\"impact\":\"Requires monitoring and further cardiac evaluation due to possible infarction.\",\"risk\":\"Increased risk of cardiac events due to potential heart damage.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Abnormal ECG results with QT/QTcBaz of 382/418 ms\",\"impact\":\"QT prolongation can lead to serious arrhythmias.\",\"risk\":\"Risk of torsades de pointes and other cardiac arrhythmias.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Presence of pacemaker\",\"impact\":\"Indicates pre-existing heart condition requiring ongoing management.\",\"risk\":\"Potential complications related to the pacemaker functioning.\"}]}\npage_no: 19: {\"items\":[{\"check_date\":\"20/06/2566\",\"description\":\"Initial health examination revealed normal assessment: No acute risks or conditions were noted. Patient is well-oriented and assessed as having no risk of suicide, falls, or other medical emergencies.\",\"impact\":\"The patient's health appears stable with no significant findings or complications.\",\"risk\":\"Low risk as no chronic diseases or acute health issues were identified.\"},{\"check_date\":\"20/06/2566\",\"description\":\"No family history of chronic diseases reported.\",\"impact\":\"Family health history does not indicate hereditary risks, possibly reducing the need for specialized screenings.\",\"risk\":\"Minimal risk for inherited health conditions.\"},{\"check_date\":\"20/06/2566\",\"description\":\"Allergy assessment showed no known drug, food, or other allergies (NKA).\",\"impact\":\"No restrictions for medication or treatment due to allergies.\",\"risk\":\"Very low risk of allergic reactions.\"},{\"check_date\":\"20/06/2566\",\"description\":\"Vision assessment results in normal ranges, indicating no concerns for vision impairment.\",\"impact\":\"Patient maintains good vision, should not require further optometric intervention.\",\"risk\":\"Negligible risk of vision-related health issues.\"}]}\npage_no: 20: {\"items\":[{\"check_date\":\"20/06/2023\",\"description\":\"Right Eye Refraction\",\"impact\":\"Mild myopia with astigmatism\",\"risk\":\"Low risk of vision impairment\"},{\"check_date\":\"20/06/2023\",\"description\":\"Left Eye Refraction\",\"impact\":\"Moderate myopia with mild astigmatism\",\"risk\":\"Moderate risk of vision impairment\"},{\"check_date\":\"20/06/2023\",\"description\":\"Keratometry Right Eye\",\"impact\":\"Slight irregularity in corneal curvature\",\"risk\":\"Low risk of complications\"},{\"check_date\":\"20/06/2023\",\"description\":\"Keratometry Left Eye\",\"impact\":\"Normal\n######################\nOutput:",
        "kwargs": {}
    }
}
{
    "type": "error",
    "data": "Entity Extraction Error",
    "stack": "Traceback (most recent call last):\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\graphrag\\index\\operations\\extract_entities\\graph_extractor.py\", line 127, in __call__\n    result = await self._process_document(text, prompt_variables)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\graphrag\\index\\operations\\extract_entities\\graph_extractor.py\", line 155, in _process_document\n    response = await self._llm(\n               ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat.py\", line 83, in __call__\n    return await self._text_chat_llm(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\features\\tools_parsing.py\", line 120, in __call__\n    return await self._delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 112, in __call__\n    return await self._invoke(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 128, in _invoke\n    return await self._decorated_target(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\json.py\", line 71, in invoke\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 109, in invoke\n    result = await execute_with_retry()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 93, in execute_with_retry\n    async for a in AsyncRetrying(\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\asyncio\\__init__.py\", line 166, in __anext__\n    do = await self.iter(retry_state=self._retry_state)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\asyncio\\__init__.py\", line 153, in iter\n    result = await action(retry_state)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\_utils.py\", line 99, in inner\n    return call(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\__init__.py\", line 398, in <lambda>\n    self._add_action_func(lambda rs: rs.outcome.result())\n                                     ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\\Lib\\concurrent\\futures\\_base.py\", line 449, in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\\Lib\\concurrent\\futures\\_base.py\", line 401, in __get_result\n    raise self._exception\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 101, in execute_with_retry\n    return await attempt()\n           ^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 78, in attempt\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\rate_limiter.py\", line 70, in invoke\n    result = await delegate(prompt, **args)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\json.py\", line 71, in invoke\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 152, in _decorator_target\n    output = await self._execute_llm(prompt, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat_text.py\", line 155, in _execute_llm\n    completion = await self._call_completion_or_cache(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat_text.py\", line 127, in _call_completion_or_cache\n    return await self._cache.get_or_insert(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\cache_interactor.py\", line 50, in get_or_insert\n    entry = await func()\n            ^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\resources\\chat\\completions.py\", line 1702, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1849, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1543, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1644, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.PermissionDeniedError: Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}\n",
    "source": "Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}",
    "details": {
        "doc_index": 0,
        "text": "risk\":\"Low risk for hepatitis B infection.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Anti HBS\",\"impact\":\"18.43 mlU/ml, below the reference threshold of 10 mIU/ml which indicates lack of sufficient immunity against hepatitis B.\",\"risk\":\"Potential risk for hepatitis B due to insufficient immunity.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Anti HCV\",\"impact\":\"Negative, indicating no hepatitis C infection.\",\"risk\":\"Low risk for hepatitis C infection.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Vitamin D Total\",\"impact\":\"26.5 ng/ml, indicating a deficiency as compared to the reference range of 30.000 - 100.000 ng/ml.\",\"risk\":\"Increased risk of osteoporosis and related health issues due to Vitamin D deficiency.\"}]}\npage_no: 15: {\"items\":[{\"check_date\":\"12-06-2023\",\"description\":\"Anti HAV IgM\",\"impact\":\"Negative result indicates no current Hepatitis A infection\",\"risk\":\"Low risk for Hepatitis A infection based on this test\"}]}\npage_no: 16: {\"items\":[{\"check_date\":\"12/06/2023\",\"description\":\"No abnormal opacity in both lungs is seen, mild scoliosis noted.\",\"impact\":\"No active chest disease, normal heart size and mediastinum.\",\"risk\":\"None apparent.\"},{\"check_date\":\"12/06/2023\",\"description\":\"Multiple cysts scattering in the liver (about 0.5-4.4 cm).\",\"impact\":\"Potential liver lesions may require monitoring or further investigation.\",\"risk\":\"Risk of liver disease or complications from cysts.\"},{\"check_date\":\"12/06/2023\",\"description\":\"A 0.5-cm hypoechonodule in the gallbladder, follow up advised.\",\"impact\":\"Potential gallbladder pathology may need to be assessed further.\",\"risk\":\"Possibility of gallbladder disease.\"},{\"check_date\":\"12/06/2023\",\"description\":\"A 0.9-cm cyst at lower pole left kidney, along with a 0.3-cm bright lesion possibly renal stone and a 0.5-cm hyperechoic lesion possibly hemangiomyolipoma or hemorrhagic cyst.\",\"impact\":\"Potential kidney pathology, including cysts or stones, may need monitoring or intervention.\",\"risk\":\"Risk of kidney-related issues, urinary obstruction, or complications.\"}]}\npage_no: 17: {\"items\":[{\"check_date\":\"12/06/2023\",\"description\":\"Evidence of bilateral augmentation mammoplasties and intact prosthesis sacs; heterogeneously dense fibroglandular tissue noted. No suspicious mass or lesions identified.\",\"impact\":\"Presence of augmentation mammoplasties may obscure detection of some abnormalities in mammography.\",\"risk\":\"No immediate risk identified, routine surveillance needed.\"},{\"check_date\":\"12/06/2023\",\"description\":\"Additional ultrasound shows no solid mass or cystic lesion in both breasts.\",\"impact\":\"No findings indicative of malignancy, ensuring breast health as of the date of examination.\",\"risk\":\"Minimal risk; regular self-examinations and clinical follow-ups recommended.\"}]}\npage_no: 18: {\"items\":[{\"check_date\":\"12-06-2023\",\"description\":\"Normal sinus rhythm, Possible Anterior infarct, age undetermined\",\"impact\":\"Requires monitoring and further cardiac evaluation due to possible infarction.\",\"risk\":\"Increased risk of cardiac events due to potential heart damage.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Abnormal ECG results with QT/QTcBaz of 382/418 ms\",\"impact\":\"QT prolongation can lead to serious arrhythmias.\",\"risk\":\"Risk of torsades de pointes and other cardiac arrhythmias.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Presence of pacemaker\",\"impact\":\"Indicates pre-existing heart condition requiring ongoing management.\",\"risk\":\"Potential complications related to the pacemaker functioning.\"}]}\npage_no: 19: {\"items\":[{\"check_date\":\"20/06/2566\",\"description\":\"Initial health examination revealed normal assessment: No acute risks or conditions were noted. Patient is well-oriented and assessed as having no risk of suicide, falls, or other medical emergencies.\",\"impact\":\"The patient's health appears stable with no significant findings or complications.\",\"risk\":\"Low risk as no chronic diseases or acute health issues were identified.\"},{\"check_date\":\"20/06/2566\",\"description\":\"No family history of chronic diseases reported.\",\"impact\":\"Family health history does not indicate hereditary risks, possibly reducing the need for specialized screenings.\",\"risk\":\"Minimal risk for inherited health conditions.\"},{\"check_date\":\"20/06/2566\",\"description\":\"Allergy assessment showed no known drug, food, or other allergies (NKA).\",\"impact\":\"No restrictions for medication or treatment due to allergies.\",\"risk\":\"Very low risk of allergic reactions.\"},{\"check_date\":\"20/06/2566\",\"description\":\"Vision assessment results in normal ranges, indicating no concerns for vision impairment.\",\"impact\":\"Patient maintains good vision, should not require further optometric intervention.\",\"risk\":\"Negligible risk of vision-related health issues.\"}]}\npage_no: 20: {\"items\":[{\"check_date\":\"20/06/2023\",\"description\":\"Right Eye Refraction\",\"impact\":\"Mild myopia with astigmatism\",\"risk\":\"Low risk of vision impairment\"},{\"check_date\":\"20/06/2023\",\"description\":\"Left Eye Refraction\",\"impact\":\"Moderate myopia with mild astigmatism\",\"risk\":\"Moderate risk of vision impairment\"},{\"check_date\":\"20/06/2023\",\"description\":\"Keratometry Right Eye\",\"impact\":\"Slight irregularity in corneal curvature\",\"risk\":\"Low risk of complications\"},{\"check_date\":\"20/06/2023\",\"description\":\"Keratometry Left Eye\",\"impact\":\"Normal"
    }
}
{
    "type": "error",
    "data": "Error Invoking LLM",
    "stack": "Traceback (most recent call last):\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 112, in __call__\n    return await self._invoke(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 128, in _invoke\n    return await self._decorated_target(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\json.py\", line 71, in invoke\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 109, in invoke\n    result = await execute_with_retry()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 93, in execute_with_retry\n    async for a in AsyncRetrying(\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\asyncio\\__init__.py\", line 166, in __anext__\n    do = await self.iter(retry_state=self._retry_state)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\asyncio\\__init__.py\", line 153, in iter\n    result = await action(retry_state)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\_utils.py\", line 99, in inner\n    return call(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\__init__.py\", line 398, in <lambda>\n    self._add_action_func(lambda rs: rs.outcome.result())\n                                     ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\\Lib\\concurrent\\futures\\_base.py\", line 449, in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\\Lib\\concurrent\\futures\\_base.py\", line 401, in __get_result\n    raise self._exception\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 101, in execute_with_retry\n    return await attempt()\n           ^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 78, in attempt\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\rate_limiter.py\", line 70, in invoke\n    result = await delegate(prompt, **args)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\json.py\", line 71, in invoke\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 152, in _decorator_target\n    output = await self._execute_llm(prompt, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat_text.py\", line 155, in _execute_llm\n    completion = await self._call_completion_or_cache(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat_text.py\", line 127, in _call_completion_or_cache\n    return await self._cache.get_or_insert(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\cache_interactor.py\", line 50, in get_or_insert\n    entry = await func()\n            ^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\resources\\chat\\completions.py\", line 1702, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1849, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1543, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1644, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.PermissionDeniedError: Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}\n",
    "source": "Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}",
    "details": {
        "prompt": "\n-Goal-\nGiven a text document that is potentially relevant to this activity and a list of entity types, identify all entities of those types from the text and all relationships among the identified entities.\n \n-Steps-\n1. Identify all entities. For each identified entity, extract the following information:\n- entity_name: Name of the entity, capitalized\n- entity_type: One of the following types: [organization,person,geo,event]\n- entity_description: Comprehensive description of the entity's attributes and activities\nFormat each entity as (\"entity\"<|><entity_name><|><entity_type><|><entity_description>)\n \n2. From the entities identified in step 1, identify all pairs of (source_entity, target_entity) that are *clearly related* to each other.\nFor each pair of related entities, extract the following information:\n- source_entity: name of the source entity, as identified in step 1\n- target_entity: name of the target entity, as identified in step 1\n- relationship_description: explanation as to why you think the source entity and the target entity are related to each other\n- relationship_strength: a numeric score indicating strength of the relationship between the source entity and target entity\n Format each relationship as (\"relationship\"<|><source_entity><|><target_entity><|><relationship_description><|><relationship_strength>)\n \n3. Return output in English as a single list of all the entities and relationships identified in steps 1 and 2. Use **##** as the list delimiter.\n \n4. When finished, output <|COMPLETE|>\n \n######################\n-Examples-\n######################\nExample 1:\nEntity_types: ORGANIZATION,PERSON\nText:\nThe Verdantis's Central Institution is scheduled to meet on Monday and Thursday, with the institution planning to release its latest policy decision on Thursday at 1:30 p.m. PDT, followed by a press conference where Central Institution Chair Martin Smith will take questions. Investors expect the Market Strategy Committee to hold its benchmark interest rate steady in a range of 3.5%-3.75%.\n######################\nOutput:\n(\"entity\"<|>CENTRAL INSTITUTION<|>ORGANIZATION<|>The Central Institution is the Federal Reserve of Verdantis, which is setting interest rates on Monday and Thursday)\n##\n(\"entity\"<|>MARTIN SMITH<|>PERSON<|>Martin Smith is the chair of the Central Institution)\n##\n(\"entity\"<|>MARKET STRATEGY COMMITTEE<|>ORGANIZATION<|>The Central Institution committee makes key decisions about interest rates and the growth of Verdantis's money supply)\n##\n(\"relationship\"<|>MARTIN SMITH<|>CENTRAL INSTITUTION<|>Martin Smith is the Chair of the Central Institution and will answer questions at a press conference<|>9)\n<|COMPLETE|>\n\n######################\nExample 2:\nEntity_types: ORGANIZATION\nText:\nTechGlobal's (TG) stock skyrocketed in its opening day on the Global Exchange Thursday. But IPO experts warn that the semiconductor corporation's debut on the public markets isn't indicative of how other newly listed companies may perform.\n\nTechGlobal, a formerly public company, was taken private by Vision Holdings in 2014. The well-established chip designer says it powers 85% of premium smartphones.\n######################\nOutput:\n(\"entity\"<|>TECHGLOBAL<|>ORGANIZATION<|>TechGlobal is a stock now listed on the Global Exchange which powers 85% of premium smartphones)\n##\n(\"entity\"<|>VISION HOLDINGS<|>ORGANIZATION<|>Vision Holdings is a firm that previously owned TechGlobal)\n##\n(\"relationship\"<|>TECHGLOBAL<|>VISION HOLDINGS<|>Vision Holdings formerly owned TechGlobal from 2014 until present<|>5)\n<|COMPLETE|>\n\n######################\nExample 3:\nEntity_types: ORGANIZATION,GEO,PERSON\nText:\nFive Aurelians jailed for 8 years in Firuzabad and widely regarded as hostages are on their way home to Aurelia.\n\nThe swap orchestrated by Quintara was finalized when $8bn of Firuzi funds were transferred to financial institutions in Krohaara, the capital of Quintara.\n\nThe exchange initiated in Firuzabad's capital, Tiruzia, led to the four men and one woman, who are also Firuzi nationals, boarding a chartered flight to Krohaara.\n\nThey were welcomed by senior Aurelian officials and are now on their way to Aurelia's capital, Cashion.\n\nThe Aurelians include 39-year-old businessman Samuel Namara, who has been held in Tiruzia's Alhamia Prison, as well as journalist Durke Bataglani, 59, and environmentalist Meggie Tazbah, 53, who also holds Bratinas nationality.\n######################\nOutput:\n(\"entity\"<|>FIRUZABAD<|>GEO<|>Firuzabad held Aurelians as hostages)\n##\n(\"entity\"<|>AURELIA<|>GEO<|>Country seeking to release hostages)\n##\n(\"entity\"<|>QUINTARA<|>GEO<|>Country that negotiated a swap of money in exchange for hostages)\n##\n##\n(\"entity\"<|>TIRUZIA<|>GEO<|>Capital of Firuzabad where the Aurelians were being held)\n##\n(\"entity\"<|>KROHAARA<|>GEO<|>Capital city in Quintara)\n##\n(\"entity\"<|>CASHION<|>GEO<|>Capital city in Aurelia)\n##\n(\"entity\"<|>SAMUEL NAMARA<|>PERSON<|>Aurelian who spent time in Tiruzia's Alhamia Prison)\n##\n(\"entity\"<|>ALHAMIA PRISON<|>GEO<|>Prison in Tiruzia)\n##\n(\"entity\"<|>DURKE BATAGLANI<|>PERSON<|>Aurelian journalist who was held hostage)\n##\n(\"entity\"<|>MEGGIE TAZBAH<|>PERSON<|>Bratinas national and environmentalist who was held hostage)\n##\n(\"relationship\"<|>FIRUZABAD<|>AURELIA<|>Firuzabad negotiated a hostage exchange with Aurelia<|>2)\n##\n(\"relationship\"<|>QUINTARA<|>AURELIA<|>Quintara brokered the hostage exchange between Firuzabad and Aurelia<|>2)\n##\n(\"relationship\"<|>QUINTARA<|>FIRUZABAD<|>Quintara brokered the hostage exchange between Firuzabad and Aurelia<|>2)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>ALHAMIA PRISON<|>Samuel Namara was a prisoner at Alhamia prison<|>8)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>MEGGIE TAZBAH<|>Samuel Namara and Meggie Tazbah were exchanged in the same hostage release<|>2)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>DURKE BATAGLANI<|>Samuel Namara and Durke Bataglani were exchanged in the same hostage release<|>2)\n##\n(\"relationship\"<|>MEGGIE TAZBAH<|>DURKE BATAGLANI<|>Meggie Tazbah and Durke Bataglani were exchanged in the same hostage release<|>2)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>FIRUZABAD<|>Samuel Namara was a hostage in Firuzabad<|>2)\n##\n(\"relationship\"<|>MEGGIE TAZBAH<|>FIRUZABAD<|>Meggie Tazbah was a hostage in Firuzabad<|>2)\n##\n(\"relationship\"<|>DURKE BATAGLANI<|>FIRUZABAD<|>Durke Bataglani was a hostage in Firuzabad<|>2)\n<|COMPLETE|>\n\n######################\n-Real Data-\n######################\nEntity_types: organization,person,geo,event\nText: impact\":\"Indicates no signs of infection or parasitic presence in the gastrointestinal tract.\",\"risk\":\"Low risk related to gastrointestinal complications.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Occult blood (FOB) test is negative.\",\"impact\":\"Indicates no hidden blood in the stool, which is a good sign and suggests no gastrointestinal bleeding.\",\"risk\":\"Low risk of serious gastrointestinal pathology.\"}]}\npage_no: 10: {\"items\":[{\"check_date\":\"12-06-2023\",\"description\":\"Urine Color\",\"impact\":\"Normal color observed.\",\"risk\":\"No risk associated with color.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Urine Transparency\",\"impact\":\"Clear transparency observed, indicating no turbidity.\",\"risk\":\"No risk associated with transparency.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Specific Gravity\",\"impact\":\"Within normal limits.\",\"risk\":\"No risk associated with specific gravity.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Urine pH\",\"impact\":\"Normal pH level.\",\"risk\":\"No risk associated with pH.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Urinary Protein\",\"impact\":\"Negative result for protein, indicating no urinary protein loss.\",\"risk\":\"No risk associated with protein levels.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Urinary Glucose\",\"impact\":\"Negative result indicates proper glucose metabolism.\",\"risk\":\"No risk associated with glucose.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Urinary Ketones\",\"impact\":\"Negative result indicates no ketones in urine.\",\"risk\":\"No risk associated with ketones.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Urinary Blood\",\"impact\":\"Negative result indicates no hematuria.\",\"risk\":\"No risk associated with hematuria.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Bile/Bilirubin\",\"impact\":\"Negative result indicates no liver dysfunction.\",\"risk\":\"No risk associated with biliary abnormalities.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Urobilinogen\",\"impact\":\"Normal level indicates normal liver function.\",\"risk\":\"No risk associated with urobilinogen.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Urinary Nitrites\",\"impact\":\"Negative result indicating no bacterial infection.\",\"risk\":\"No risk associated with nitrites.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Leukocyte Esterase\",\"impact\":\"Negative result indicates no white blood cells present.\",\"risk\":\"No risk associated with leukocytes.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Ascorbic Acid\",\"impact\":\"Negative result indicates no interference in results from ascorbic acid.\",\"risk\":\"No risk associated with ascorbic acid.\"},{\"check_date\":\"12-06-2023\",\"description\":\"WBC/HPF in Urine\",\"impact\":\"Not found means no signs of infection.\",\"risk\":\"No risk associated with WBC.\"},{\"check_date\":\"12-06-2023\",\"description\":\"RBC/HPF in Urine\",\"impact\":\"Not found means no signs of hematuria.\",\"risk\":\"No risk associated with RBC.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Epithelial Cells\",\"impact\":\"Slightly elevated but could be normal sloughing.\",\"risk\":\"Minimal risk if noted in context.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Bacteria in Urine\",\"impact\":\"Rare presence, possibly contamination.\",\"risk\":\"Minimal risk if asymptomatic.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Amorphous Sediment\",\"impact\":\"Not found - indicates clear urine sediment.\",\"risk\":\"No risk associated.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Mucus in Urine\",\"impact\":\"Not found - typically not concerning.\",\"risk\":\"No risk associated.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Crystals in Urine\",\"impact\":\"Not found - normal urine composition.\",\"risk\":\"No risk associated.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Casts in Urine\",\"impact\":\"Not found - no abnormal casts present.\",\"risk\":\"No risk associated.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Yeasts in Urine\",\"impact\":\"Not found - no fungal infection present.\",\"risk\":\"No risk associated.\"}]}\npage_no: 11: {\"items\":[{\"check_date\":\"2023-12-21\",\"description\":\"HPV genotype 16: Undetected (no infection found)\",\"impact\":\"No evidence of HPV Type 16 which is associated with cervical cancer risk.\",\"risk\":\"Low Risk for cervical cancer related to HPV 16.\"},{\"check_date\":\"2023-12-21\",\"description\":\"HPV genotype 18: Undetected (no infection found)\",\"impact\":\"No evidence of HPV Type 18 which is associated with cervical cancer risk.\",\"risk\":\"Low Risk for cervical cancer related to HPV 18.\"},{\"check_date\":\"2023-12-21\",\"description\":\"HPV genotype 31: Undetected (no infection found)\",\"impact\":\"No evidence of HPV Type 31 which is associated with cervical cancer risk.\",\"risk\":\"Low Risk for cervical cancer related to HPV 31.\"},{\"check_date\":\"2023-12-21\",\"description\":\"HPV genotype 33: Undetected (no infection found)\",\"impact\":\"No evidence of HPV Type 33 which is associated with cervical cancer risk.\",\"risk\":\"Low Risk for cervical cancer related to HPV 33.\"},{\"check_date\":\"2023-12-21\",\"description\":\"HPV genotype 35: Undetected (no infection found)\",\"impact\":\"No evidence of HPV Type 35 which is associated with cervical cancer risk.\",\"risk\":\"Low Risk for cervical cancer related to HPV 35.\"},{\"check_date\":\"\n######################\nOutput:",
        "kwargs": {}
    }
}
{
    "type": "error",
    "data": "Entity Extraction Error",
    "stack": "Traceback (most recent call last):\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\graphrag\\index\\operations\\extract_entities\\graph_extractor.py\", line 127, in __call__\n    result = await self._process_document(text, prompt_variables)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\graphrag\\index\\operations\\extract_entities\\graph_extractor.py\", line 155, in _process_document\n    response = await self._llm(\n               ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat.py\", line 83, in __call__\n    return await self._text_chat_llm(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\features\\tools_parsing.py\", line 120, in __call__\n    return await self._delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 112, in __call__\n    return await self._invoke(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 128, in _invoke\n    return await self._decorated_target(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\json.py\", line 71, in invoke\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 109, in invoke\n    result = await execute_with_retry()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 93, in execute_with_retry\n    async for a in AsyncRetrying(\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\asyncio\\__init__.py\", line 166, in __anext__\n    do = await self.iter(retry_state=self._retry_state)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\asyncio\\__init__.py\", line 153, in iter\n    result = await action(retry_state)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\_utils.py\", line 99, in inner\n    return call(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\__init__.py\", line 398, in <lambda>\n    self._add_action_func(lambda rs: rs.outcome.result())\n                                     ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\\Lib\\concurrent\\futures\\_base.py\", line 449, in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\\Lib\\concurrent\\futures\\_base.py\", line 401, in __get_result\n    raise self._exception\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 101, in execute_with_retry\n    return await attempt()\n           ^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 78, in attempt\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\rate_limiter.py\", line 70, in invoke\n    result = await delegate(prompt, **args)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\json.py\", line 71, in invoke\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 152, in _decorator_target\n    output = await self._execute_llm(prompt, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat_text.py\", line 155, in _execute_llm\n    completion = await self._call_completion_or_cache(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat_text.py\", line 127, in _call_completion_or_cache\n    return await self._cache.get_or_insert(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\cache_interactor.py\", line 50, in get_or_insert\n    entry = await func()\n            ^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\resources\\chat\\completions.py\", line 1702, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1849, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1543, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1644, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.PermissionDeniedError: Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}\n",
    "source": "Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}",
    "details": {
        "doc_index": 0,
        "text": "impact\":\"Indicates no signs of infection or parasitic presence in the gastrointestinal tract.\",\"risk\":\"Low risk related to gastrointestinal complications.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Occult blood (FOB) test is negative.\",\"impact\":\"Indicates no hidden blood in the stool, which is a good sign and suggests no gastrointestinal bleeding.\",\"risk\":\"Low risk of serious gastrointestinal pathology.\"}]}\npage_no: 10: {\"items\":[{\"check_date\":\"12-06-2023\",\"description\":\"Urine Color\",\"impact\":\"Normal color observed.\",\"risk\":\"No risk associated with color.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Urine Transparency\",\"impact\":\"Clear transparency observed, indicating no turbidity.\",\"risk\":\"No risk associated with transparency.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Specific Gravity\",\"impact\":\"Within normal limits.\",\"risk\":\"No risk associated with specific gravity.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Urine pH\",\"impact\":\"Normal pH level.\",\"risk\":\"No risk associated with pH.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Urinary Protein\",\"impact\":\"Negative result for protein, indicating no urinary protein loss.\",\"risk\":\"No risk associated with protein levels.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Urinary Glucose\",\"impact\":\"Negative result indicates proper glucose metabolism.\",\"risk\":\"No risk associated with glucose.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Urinary Ketones\",\"impact\":\"Negative result indicates no ketones in urine.\",\"risk\":\"No risk associated with ketones.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Urinary Blood\",\"impact\":\"Negative result indicates no hematuria.\",\"risk\":\"No risk associated with hematuria.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Bile/Bilirubin\",\"impact\":\"Negative result indicates no liver dysfunction.\",\"risk\":\"No risk associated with biliary abnormalities.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Urobilinogen\",\"impact\":\"Normal level indicates normal liver function.\",\"risk\":\"No risk associated with urobilinogen.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Urinary Nitrites\",\"impact\":\"Negative result indicating no bacterial infection.\",\"risk\":\"No risk associated with nitrites.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Leukocyte Esterase\",\"impact\":\"Negative result indicates no white blood cells present.\",\"risk\":\"No risk associated with leukocytes.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Ascorbic Acid\",\"impact\":\"Negative result indicates no interference in results from ascorbic acid.\",\"risk\":\"No risk associated with ascorbic acid.\"},{\"check_date\":\"12-06-2023\",\"description\":\"WBC/HPF in Urine\",\"impact\":\"Not found means no signs of infection.\",\"risk\":\"No risk associated with WBC.\"},{\"check_date\":\"12-06-2023\",\"description\":\"RBC/HPF in Urine\",\"impact\":\"Not found means no signs of hematuria.\",\"risk\":\"No risk associated with RBC.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Epithelial Cells\",\"impact\":\"Slightly elevated but could be normal sloughing.\",\"risk\":\"Minimal risk if noted in context.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Bacteria in Urine\",\"impact\":\"Rare presence, possibly contamination.\",\"risk\":\"Minimal risk if asymptomatic.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Amorphous Sediment\",\"impact\":\"Not found - indicates clear urine sediment.\",\"risk\":\"No risk associated.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Mucus in Urine\",\"impact\":\"Not found - typically not concerning.\",\"risk\":\"No risk associated.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Crystals in Urine\",\"impact\":\"Not found - normal urine composition.\",\"risk\":\"No risk associated.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Casts in Urine\",\"impact\":\"Not found - no abnormal casts present.\",\"risk\":\"No risk associated.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Yeasts in Urine\",\"impact\":\"Not found - no fungal infection present.\",\"risk\":\"No risk associated.\"}]}\npage_no: 11: {\"items\":[{\"check_date\":\"2023-12-21\",\"description\":\"HPV genotype 16: Undetected (no infection found)\",\"impact\":\"No evidence of HPV Type 16 which is associated with cervical cancer risk.\",\"risk\":\"Low Risk for cervical cancer related to HPV 16.\"},{\"check_date\":\"2023-12-21\",\"description\":\"HPV genotype 18: Undetected (no infection found)\",\"impact\":\"No evidence of HPV Type 18 which is associated with cervical cancer risk.\",\"risk\":\"Low Risk for cervical cancer related to HPV 18.\"},{\"check_date\":\"2023-12-21\",\"description\":\"HPV genotype 31: Undetected (no infection found)\",\"impact\":\"No evidence of HPV Type 31 which is associated with cervical cancer risk.\",\"risk\":\"Low Risk for cervical cancer related to HPV 31.\"},{\"check_date\":\"2023-12-21\",\"description\":\"HPV genotype 33: Undetected (no infection found)\",\"impact\":\"No evidence of HPV Type 33 which is associated with cervical cancer risk.\",\"risk\":\"Low Risk for cervical cancer related to HPV 33.\"},{\"check_date\":\"2023-12-21\",\"description\":\"HPV genotype 35: Undetected (no infection found)\",\"impact\":\"No evidence of HPV Type 35 which is associated with cervical cancer risk.\",\"risk\":\"Low Risk for cervical cancer related to HPV 35.\"},{\"check_date\":\""
    }
}
{
    "type": "error",
    "data": "Error Invoking LLM",
    "stack": "Traceback (most recent call last):\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 112, in __call__\n    return await self._invoke(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 128, in _invoke\n    return await self._decorated_target(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\json.py\", line 71, in invoke\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 109, in invoke\n    result = await execute_with_retry()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 93, in execute_with_retry\n    async for a in AsyncRetrying(\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\asyncio\\__init__.py\", line 166, in __anext__\n    do = await self.iter(retry_state=self._retry_state)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\asyncio\\__init__.py\", line 153, in iter\n    result = await action(retry_state)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\_utils.py\", line 99, in inner\n    return call(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\__init__.py\", line 398, in <lambda>\n    self._add_action_func(lambda rs: rs.outcome.result())\n                                     ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\\Lib\\concurrent\\futures\\_base.py\", line 449, in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\\Lib\\concurrent\\futures\\_base.py\", line 401, in __get_result\n    raise self._exception\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 101, in execute_with_retry\n    return await attempt()\n           ^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 78, in attempt\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\rate_limiter.py\", line 70, in invoke\n    result = await delegate(prompt, **args)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\json.py\", line 71, in invoke\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 152, in _decorator_target\n    output = await self._execute_llm(prompt, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat_text.py\", line 155, in _execute_llm\n    completion = await self._call_completion_or_cache(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat_text.py\", line 127, in _call_completion_or_cache\n    return await self._cache.get_or_insert(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\cache_interactor.py\", line 50, in get_or_insert\n    entry = await func()\n            ^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\resources\\chat\\completions.py\", line 1702, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1849, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1543, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1644, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.PermissionDeniedError: Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}\n",
    "source": "Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}",
    "details": {
        "prompt": "\n-Goal-\nGiven a text document that is potentially relevant to this activity and a list of entity types, identify all entities of those types from the text and all relationships among the identified entities.\n \n-Steps-\n1. Identify all entities. For each identified entity, extract the following information:\n- entity_name: Name of the entity, capitalized\n- entity_type: One of the following types: [organization,person,geo,event]\n- entity_description: Comprehensive description of the entity's attributes and activities\nFormat each entity as (\"entity\"<|><entity_name><|><entity_type><|><entity_description>)\n \n2. From the entities identified in step 1, identify all pairs of (source_entity, target_entity) that are *clearly related* to each other.\nFor each pair of related entities, extract the following information:\n- source_entity: name of the source entity, as identified in step 1\n- target_entity: name of the target entity, as identified in step 1\n- relationship_description: explanation as to why you think the source entity and the target entity are related to each other\n- relationship_strength: a numeric score indicating strength of the relationship between the source entity and target entity\n Format each relationship as (\"relationship\"<|><source_entity><|><target_entity><|><relationship_description><|><relationship_strength>)\n \n3. Return output in English as a single list of all the entities and relationships identified in steps 1 and 2. Use **##** as the list delimiter.\n \n4. When finished, output <|COMPLETE|>\n \n######################\n-Examples-\n######################\nExample 1:\nEntity_types: ORGANIZATION,PERSON\nText:\nThe Verdantis's Central Institution is scheduled to meet on Monday and Thursday, with the institution planning to release its latest policy decision on Thursday at 1:30 p.m. PDT, followed by a press conference where Central Institution Chair Martin Smith will take questions. Investors expect the Market Strategy Committee to hold its benchmark interest rate steady in a range of 3.5%-3.75%.\n######################\nOutput:\n(\"entity\"<|>CENTRAL INSTITUTION<|>ORGANIZATION<|>The Central Institution is the Federal Reserve of Verdantis, which is setting interest rates on Monday and Thursday)\n##\n(\"entity\"<|>MARTIN SMITH<|>PERSON<|>Martin Smith is the chair of the Central Institution)\n##\n(\"entity\"<|>MARKET STRATEGY COMMITTEE<|>ORGANIZATION<|>The Central Institution committee makes key decisions about interest rates and the growth of Verdantis's money supply)\n##\n(\"relationship\"<|>MARTIN SMITH<|>CENTRAL INSTITUTION<|>Martin Smith is the Chair of the Central Institution and will answer questions at a press conference<|>9)\n<|COMPLETE|>\n\n######################\nExample 2:\nEntity_types: ORGANIZATION\nText:\nTechGlobal's (TG) stock skyrocketed in its opening day on the Global Exchange Thursday. But IPO experts warn that the semiconductor corporation's debut on the public markets isn't indicative of how other newly listed companies may perform.\n\nTechGlobal, a formerly public company, was taken private by Vision Holdings in 2014. The well-established chip designer says it powers 85% of premium smartphones.\n######################\nOutput:\n(\"entity\"<|>TECHGLOBAL<|>ORGANIZATION<|>TechGlobal is a stock now listed on the Global Exchange which powers 85% of premium smartphones)\n##\n(\"entity\"<|>VISION HOLDINGS<|>ORGANIZATION<|>Vision Holdings is a firm that previously owned TechGlobal)\n##\n(\"relationship\"<|>TECHGLOBAL<|>VISION HOLDINGS<|>Vision Holdings formerly owned TechGlobal from 2014 until present<|>5)\n<|COMPLETE|>\n\n######################\nExample 3:\nEntity_types: ORGANIZATION,GEO,PERSON\nText:\nFive Aurelians jailed for 8 years in Firuzabad and widely regarded as hostages are on their way home to Aurelia.\n\nThe swap orchestrated by Quintara was finalized when $8bn of Firuzi funds were transferred to financial institutions in Krohaara, the capital of Quintara.\n\nThe exchange initiated in Firuzabad's capital, Tiruzia, led to the four men and one woman, who are also Firuzi nationals, boarding a chartered flight to Krohaara.\n\nThey were welcomed by senior Aurelian officials and are now on their way to Aurelia's capital, Cashion.\n\nThe Aurelians include 39-year-old businessman Samuel Namara, who has been held in Tiruzia's Alhamia Prison, as well as journalist Durke Bataglani, 59, and environmentalist Meggie Tazbah, 53, who also holds Bratinas nationality.\n######################\nOutput:\n(\"entity\"<|>FIRUZABAD<|>GEO<|>Firuzabad held Aurelians as hostages)\n##\n(\"entity\"<|>AURELIA<|>GEO<|>Country seeking to release hostages)\n##\n(\"entity\"<|>QUINTARA<|>GEO<|>Country that negotiated a swap of money in exchange for hostages)\n##\n##\n(\"entity\"<|>TIRUZIA<|>GEO<|>Capital of Firuzabad where the Aurelians were being held)\n##\n(\"entity\"<|>KROHAARA<|>GEO<|>Capital city in Quintara)\n##\n(\"entity\"<|>CASHION<|>GEO<|>Capital city in Aurelia)\n##\n(\"entity\"<|>SAMUEL NAMARA<|>PERSON<|>Aurelian who spent time in Tiruzia's Alhamia Prison)\n##\n(\"entity\"<|>ALHAMIA PRISON<|>GEO<|>Prison in Tiruzia)\n##\n(\"entity\"<|>DURKE BATAGLANI<|>PERSON<|>Aurelian journalist who was held hostage)\n##\n(\"entity\"<|>MEGGIE TAZBAH<|>PERSON<|>Bratinas national and environmentalist who was held hostage)\n##\n(\"relationship\"<|>FIRUZABAD<|>AURELIA<|>Firuzabad negotiated a hostage exchange with Aurelia<|>2)\n##\n(\"relationship\"<|>QUINTARA<|>AURELIA<|>Quintara brokered the hostage exchange between Firuzabad and Aurelia<|>2)\n##\n(\"relationship\"<|>QUINTARA<|>FIRUZABAD<|>Quintara brokered the hostage exchange between Firuzabad and Aurelia<|>2)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>ALHAMIA PRISON<|>Samuel Namara was a prisoner at Alhamia prison<|>8)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>MEGGIE TAZBAH<|>Samuel Namara and Meggie Tazbah were exchanged in the same hostage release<|>2)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>DURKE BATAGLANI<|>Samuel Namara and Durke Bataglani were exchanged in the same hostage release<|>2)\n##\n(\"relationship\"<|>MEGGIE TAZBAH<|>DURKE BATAGLANI<|>Meggie Tazbah and Durke Bataglani were exchanged in the same hostage release<|>2)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>FIRUZABAD<|>Samuel Namara was a hostage in Firuzabad<|>2)\n##\n(\"relationship\"<|>MEGGIE TAZBAH<|>FIRUZABAD<|>Meggie Tazbah was a hostage in Firuzabad<|>2)\n##\n(\"relationship\"<|>DURKE BATAGLANI<|>FIRUZABAD<|>Durke Bataglani was a hostage in Firuzabad<|>2)\n<|COMPLETE|>\n\n######################\n-Real Data-\n######################\nEntity_types: organization,person,geo,event\nText: : Undetected (no infection found)\",\"impact\":\"No evidence of HPV Type 33 which is associated with cervical cancer risk.\",\"risk\":\"Low Risk for cervical cancer related to HPV 33.\"},{\"check_date\":\"2023-12-21\",\"description\":\"HPV genotype 35: Undetected (no infection found)\",\"impact\":\"No evidence of HPV Type 35 which is associated with cervical cancer risk.\",\"risk\":\"Low Risk for cervical cancer related to HPV 35.\"},{\"check_date\":\"2023-12-21\",\"description\":\"HPV genotype 39: Undetected (no infection found)\",\"impact\":\"No evidence of HPV Type 39 which is associated with cervical cancer risk.\",\"risk\":\"Low Risk for cervical cancer related to HPV 39.\"},{\"check_date\":\"2023-12-21\",\"description\":\"HPV genotype 45: Undetected (no infection found)\",\"impact\":\"No evidence of HPV Type 45 which is associated with cervical cancer risk.\",\"risk\":\"Low Risk for cervical cancer related to HPV 45.\"},{\"check_date\":\"2023-12-21\",\"description\":\"HPV genotype 51: Undetected (no infection found)\",\"impact\":\"No evidence of HPV Type 51 which is associated with cervical cancer risk.\",\"risk\":\"Low Risk for cervical cancer related to HPV 51.\"},{\"check_date\":\"2023-12-21\",\"description\":\"HPV genotype 52: Undetected (no infection found)\",\"impact\":\"No evidence of HPV Type 52 which is associated with cervical cancer risk.\",\"risk\":\"Low Risk for cervical cancer related to HPV 52.\"},{\"check_date\":\"2023-12-21\",\"description\":\"HPV genotype 53: Undetected (no infection found)\",\"impact\":\"No evidence of HPV Type 53 which is associated with cervical cancer risk.\",\"risk\":\"Low Risk for cervical cancer related to HPV 53.\"},{\"check_date\":\"2023-12-21\",\"description\":\"HPV genotype 56: Undetected (no infection found)\",\"impact\":\"No evidence of HPV Type 56 which is associated with cervical cancer risk.\",\"risk\":\"Low Risk for cervical cancer related to HPV 56.\"},{\"check_date\":\"2023-12-21\",\"description\":\"HPV genotype 58: Undetected (no infection found)\",\"impact\":\"No evidence of HPV Type 58 which is associated with cervical cancer risk.\",\"risk\":\"Low Risk for cervical cancer related to HPV 58.\"},{\"check_date\":\"2023-12-21\",\"description\":\"HPV genotype 59: Undetected (no infection found)\",\"impact\":\"No evidence of HPV Type 59 which is associated with cervical cancer risk.\",\"risk\":\"Low Risk for cervical cancer related to HPV 59.\"},{\"check_date\":\"2023-12-21\",\"description\":\"HPV genotype 66: Undetected (no infection found)\",\"impact\":\"No evidence of HPV Type 66 which is associated with cervical cancer risk.\",\"risk\":\"Low Risk for cervical cancer related to HPV 66.\"},{\"check_date\":\"2023-12-21\",\"description\":\"HPV genotype 68: Undetected (no infection found)\",\"impact\":\"No evidence of HPV Type 68 which is associated with cervical cancer risk.\",\"risk\":\"Low Risk for cervical cancer related to HPV 68.\"}]}\npage_no: 12: {\"items\":[{\"check_date\":\"2023-06-12\",\"description\":\"Cholesterol (H)\",\"impact\":\"Elevated cholesterol levels can increase the risk of cardiovascular diseases.\",\"risk\":\"Moderate to high risk depending on other risk factors.\"},{\"check_date\":\"2023-06-12\",\"description\":\"HDL (H)\",\"impact\":\"High levels of HDL cholesterol are generally considered protective against heart disease.\",\"risk\":\"Low risk associated with high HDL levels.\"},{\"check_date\":\"2023-06-12\",\"description\":\"Creatinine (L)\",\"impact\":\"Low creatinine levels may indicate low muscle mass or other health issues.\",\"risk\":\"Possible kidney issues or undernutrition.\"}]}\npage_no: 13: {\"items\":[{\"check_date\":\"12-06-2023\",\"description\":\"Hemoglobin (Hb) level\",\"impact\":\"Normal level within reference range (12.1-17.2 gm%)\",\"risk\":\"Low risk for anemia.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Hematocrit (Hct) level\",\"impact\":\"Normal level at 36%\",\"risk\":\"Low risk for dehydration or blood loss.\"},{\"check_date\":\"12-06-2023\",\"description\":\"White blood cell (WBC) count\",\"impact\":\"Normal count at 5080 cells/ul\",\"risk\":\"Low risk for infection.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Neutrophil percentage\",\"impact\":\"Normal percentage at 61%\",\"risk\":\"Low risk for bacterial infection.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Lymphocyte percentage\",\"impact\":\"Normal percentage at 35%\",\"risk\":\"Low risk for viral infection.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Platelet count\",\"impact\":\"Normal count at 265 x 10^3/ul\",\"risk\":\"Low risk for bleeding disorders.\"}]}\npage_no: 14: {\"items\":[{\"check_date\":\"12-06-2023\",\"description\":\"HBs Ag\",\"impact\":\"Negative, which indicates no hepatitis B infection.\",\"risk\":\"Low risk for hepatitis B infection.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Anti HBS\",\"impact\":\"18.43 mlU/ml, below the reference threshold of 10 mIU/ml which indicates lack of sufficient immunity against hepatitis B.\",\"risk\":\"Potential risk for hepatitis B due to insufficient immunity.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Anti HCV\",\"impact\":\"Negative, indicating no hepatitis C infection.\",\"risk\":\"Low risk for hepatitis\n######################\nOutput:",
        "kwargs": {}
    }
}
{
    "type": "error",
    "data": "Entity Extraction Error",
    "stack": "Traceback (most recent call last):\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\graphrag\\index\\operations\\extract_entities\\graph_extractor.py\", line 127, in __call__\n    result = await self._process_document(text, prompt_variables)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\graphrag\\index\\operations\\extract_entities\\graph_extractor.py\", line 155, in _process_document\n    response = await self._llm(\n               ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat.py\", line 83, in __call__\n    return await self._text_chat_llm(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\features\\tools_parsing.py\", line 120, in __call__\n    return await self._delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 112, in __call__\n    return await self._invoke(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 128, in _invoke\n    return await self._decorated_target(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\json.py\", line 71, in invoke\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 109, in invoke\n    result = await execute_with_retry()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 93, in execute_with_retry\n    async for a in AsyncRetrying(\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\asyncio\\__init__.py\", line 166, in __anext__\n    do = await self.iter(retry_state=self._retry_state)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\asyncio\\__init__.py\", line 153, in iter\n    result = await action(retry_state)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\_utils.py\", line 99, in inner\n    return call(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\__init__.py\", line 398, in <lambda>\n    self._add_action_func(lambda rs: rs.outcome.result())\n                                     ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\\Lib\\concurrent\\futures\\_base.py\", line 449, in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\\Lib\\concurrent\\futures\\_base.py\", line 401, in __get_result\n    raise self._exception\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 101, in execute_with_retry\n    return await attempt()\n           ^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 78, in attempt\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\rate_limiter.py\", line 70, in invoke\n    result = await delegate(prompt, **args)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\json.py\", line 71, in invoke\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 152, in _decorator_target\n    output = await self._execute_llm(prompt, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat_text.py\", line 155, in _execute_llm\n    completion = await self._call_completion_or_cache(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat_text.py\", line 127, in _call_completion_or_cache\n    return await self._cache.get_or_insert(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\cache_interactor.py\", line 50, in get_or_insert\n    entry = await func()\n            ^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\resources\\chat\\completions.py\", line 1702, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1849, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1543, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1644, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.PermissionDeniedError: Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}\n",
    "source": "Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}",
    "details": {
        "doc_index": 0,
        "text": ": Undetected (no infection found)\",\"impact\":\"No evidence of HPV Type 33 which is associated with cervical cancer risk.\",\"risk\":\"Low Risk for cervical cancer related to HPV 33.\"},{\"check_date\":\"2023-12-21\",\"description\":\"HPV genotype 35: Undetected (no infection found)\",\"impact\":\"No evidence of HPV Type 35 which is associated with cervical cancer risk.\",\"risk\":\"Low Risk for cervical cancer related to HPV 35.\"},{\"check_date\":\"2023-12-21\",\"description\":\"HPV genotype 39: Undetected (no infection found)\",\"impact\":\"No evidence of HPV Type 39 which is associated with cervical cancer risk.\",\"risk\":\"Low Risk for cervical cancer related to HPV 39.\"},{\"check_date\":\"2023-12-21\",\"description\":\"HPV genotype 45: Undetected (no infection found)\",\"impact\":\"No evidence of HPV Type 45 which is associated with cervical cancer risk.\",\"risk\":\"Low Risk for cervical cancer related to HPV 45.\"},{\"check_date\":\"2023-12-21\",\"description\":\"HPV genotype 51: Undetected (no infection found)\",\"impact\":\"No evidence of HPV Type 51 which is associated with cervical cancer risk.\",\"risk\":\"Low Risk for cervical cancer related to HPV 51.\"},{\"check_date\":\"2023-12-21\",\"description\":\"HPV genotype 52: Undetected (no infection found)\",\"impact\":\"No evidence of HPV Type 52 which is associated with cervical cancer risk.\",\"risk\":\"Low Risk for cervical cancer related to HPV 52.\"},{\"check_date\":\"2023-12-21\",\"description\":\"HPV genotype 53: Undetected (no infection found)\",\"impact\":\"No evidence of HPV Type 53 which is associated with cervical cancer risk.\",\"risk\":\"Low Risk for cervical cancer related to HPV 53.\"},{\"check_date\":\"2023-12-21\",\"description\":\"HPV genotype 56: Undetected (no infection found)\",\"impact\":\"No evidence of HPV Type 56 which is associated with cervical cancer risk.\",\"risk\":\"Low Risk for cervical cancer related to HPV 56.\"},{\"check_date\":\"2023-12-21\",\"description\":\"HPV genotype 58: Undetected (no infection found)\",\"impact\":\"No evidence of HPV Type 58 which is associated with cervical cancer risk.\",\"risk\":\"Low Risk for cervical cancer related to HPV 58.\"},{\"check_date\":\"2023-12-21\",\"description\":\"HPV genotype 59: Undetected (no infection found)\",\"impact\":\"No evidence of HPV Type 59 which is associated with cervical cancer risk.\",\"risk\":\"Low Risk for cervical cancer related to HPV 59.\"},{\"check_date\":\"2023-12-21\",\"description\":\"HPV genotype 66: Undetected (no infection found)\",\"impact\":\"No evidence of HPV Type 66 which is associated with cervical cancer risk.\",\"risk\":\"Low Risk for cervical cancer related to HPV 66.\"},{\"check_date\":\"2023-12-21\",\"description\":\"HPV genotype 68: Undetected (no infection found)\",\"impact\":\"No evidence of HPV Type 68 which is associated with cervical cancer risk.\",\"risk\":\"Low Risk for cervical cancer related to HPV 68.\"}]}\npage_no: 12: {\"items\":[{\"check_date\":\"2023-06-12\",\"description\":\"Cholesterol (H)\",\"impact\":\"Elevated cholesterol levels can increase the risk of cardiovascular diseases.\",\"risk\":\"Moderate to high risk depending on other risk factors.\"},{\"check_date\":\"2023-06-12\",\"description\":\"HDL (H)\",\"impact\":\"High levels of HDL cholesterol are generally considered protective against heart disease.\",\"risk\":\"Low risk associated with high HDL levels.\"},{\"check_date\":\"2023-06-12\",\"description\":\"Creatinine (L)\",\"impact\":\"Low creatinine levels may indicate low muscle mass or other health issues.\",\"risk\":\"Possible kidney issues or undernutrition.\"}]}\npage_no: 13: {\"items\":[{\"check_date\":\"12-06-2023\",\"description\":\"Hemoglobin (Hb) level\",\"impact\":\"Normal level within reference range (12.1-17.2 gm%)\",\"risk\":\"Low risk for anemia.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Hematocrit (Hct) level\",\"impact\":\"Normal level at 36%\",\"risk\":\"Low risk for dehydration or blood loss.\"},{\"check_date\":\"12-06-2023\",\"description\":\"White blood cell (WBC) count\",\"impact\":\"Normal count at 5080 cells/ul\",\"risk\":\"Low risk for infection.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Neutrophil percentage\",\"impact\":\"Normal percentage at 61%\",\"risk\":\"Low risk for bacterial infection.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Lymphocyte percentage\",\"impact\":\"Normal percentage at 35%\",\"risk\":\"Low risk for viral infection.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Platelet count\",\"impact\":\"Normal count at 265 x 10^3/ul\",\"risk\":\"Low risk for bleeding disorders.\"}]}\npage_no: 14: {\"items\":[{\"check_date\":\"12-06-2023\",\"description\":\"HBs Ag\",\"impact\":\"Negative, which indicates no hepatitis B infection.\",\"risk\":\"Low risk for hepatitis B infection.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Anti HBS\",\"impact\":\"18.43 mlU/ml, below the reference threshold of 10 mIU/ml which indicates lack of sufficient immunity against hepatitis B.\",\"risk\":\"Potential risk for hepatitis B due to insufficient immunity.\"},{\"check_date\":\"12-06-2023\",\"description\":\"Anti HCV\",\"impact\":\"Negative, indicating no hepatitis C infection.\",\"risk\":\"Low risk for hepatitis"
    }
}
{
    "type": "error",
    "data": "Error Invoking LLM",
    "stack": "Traceback (most recent call last):\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 112, in __call__\n    return await self._invoke(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 128, in _invoke\n    return await self._decorated_target(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\json.py\", line 71, in invoke\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 109, in invoke\n    result = await execute_with_retry()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 93, in execute_with_retry\n    async for a in AsyncRetrying(\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\asyncio\\__init__.py\", line 166, in __anext__\n    do = await self.iter(retry_state=self._retry_state)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\asyncio\\__init__.py\", line 153, in iter\n    result = await action(retry_state)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\_utils.py\", line 99, in inner\n    return call(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\__init__.py\", line 398, in <lambda>\n    self._add_action_func(lambda rs: rs.outcome.result())\n                                     ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\\Lib\\concurrent\\futures\\_base.py\", line 449, in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\\Lib\\concurrent\\futures\\_base.py\", line 401, in __get_result\n    raise self._exception\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 101, in execute_with_retry\n    return await attempt()\n           ^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 78, in attempt\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\rate_limiter.py\", line 70, in invoke\n    result = await delegate(prompt, **args)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\json.py\", line 71, in invoke\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 152, in _decorator_target\n    output = await self._execute_llm(prompt, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat_text.py\", line 155, in _execute_llm\n    completion = await self._call_completion_or_cache(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat_text.py\", line 127, in _call_completion_or_cache\n    return await self._cache.get_or_insert(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\cache_interactor.py\", line 50, in get_or_insert\n    entry = await func()\n            ^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\resources\\chat\\completions.py\", line 1702, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1849, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1543, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1644, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.PermissionDeniedError: Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}\n",
    "source": "Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}",
    "details": {
        "prompt": "\n-Goal-\nGiven a text document that is potentially relevant to this activity and a list of entity types, identify all entities of those types from the text and all relationships among the identified entities.\n \n-Steps-\n1. Identify all entities. For each identified entity, extract the following information:\n- entity_name: Name of the entity, capitalized\n- entity_type: One of the following types: [organization,person,geo,event]\n- entity_description: Comprehensive description of the entity's attributes and activities\nFormat each entity as (\"entity\"<|><entity_name><|><entity_type><|><entity_description>)\n \n2. From the entities identified in step 1, identify all pairs of (source_entity, target_entity) that are *clearly related* to each other.\nFor each pair of related entities, extract the following information:\n- source_entity: name of the source entity, as identified in step 1\n- target_entity: name of the target entity, as identified in step 1\n- relationship_description: explanation as to why you think the source entity and the target entity are related to each other\n- relationship_strength: a numeric score indicating strength of the relationship between the source entity and target entity\n Format each relationship as (\"relationship\"<|><source_entity><|><target_entity><|><relationship_description><|><relationship_strength>)\n \n3. Return output in English as a single list of all the entities and relationships identified in steps 1 and 2. Use **##** as the list delimiter.\n \n4. When finished, output <|COMPLETE|>\n \n######################\n-Examples-\n######################\nExample 1:\nEntity_types: ORGANIZATION,PERSON\nText:\nThe Verdantis's Central Institution is scheduled to meet on Monday and Thursday, with the institution planning to release its latest policy decision on Thursday at 1:30 p.m. PDT, followed by a press conference where Central Institution Chair Martin Smith will take questions. Investors expect the Market Strategy Committee to hold its benchmark interest rate steady in a range of 3.5%-3.75%.\n######################\nOutput:\n(\"entity\"<|>CENTRAL INSTITUTION<|>ORGANIZATION<|>The Central Institution is the Federal Reserve of Verdantis, which is setting interest rates on Monday and Thursday)\n##\n(\"entity\"<|>MARTIN SMITH<|>PERSON<|>Martin Smith is the chair of the Central Institution)\n##\n(\"entity\"<|>MARKET STRATEGY COMMITTEE<|>ORGANIZATION<|>The Central Institution committee makes key decisions about interest rates and the growth of Verdantis's money supply)\n##\n(\"relationship\"<|>MARTIN SMITH<|>CENTRAL INSTITUTION<|>Martin Smith is the Chair of the Central Institution and will answer questions at a press conference<|>9)\n<|COMPLETE|>\n\n######################\nExample 2:\nEntity_types: ORGANIZATION\nText:\nTechGlobal's (TG) stock skyrocketed in its opening day on the Global Exchange Thursday. But IPO experts warn that the semiconductor corporation's debut on the public markets isn't indicative of how other newly listed companies may perform.\n\nTechGlobal, a formerly public company, was taken private by Vision Holdings in 2014. The well-established chip designer says it powers 85% of premium smartphones.\n######################\nOutput:\n(\"entity\"<|>TECHGLOBAL<|>ORGANIZATION<|>TechGlobal is a stock now listed on the Global Exchange which powers 85% of premium smartphones)\n##\n(\"entity\"<|>VISION HOLDINGS<|>ORGANIZATION<|>Vision Holdings is a firm that previously owned TechGlobal)\n##\n(\"relationship\"<|>TECHGLOBAL<|>VISION HOLDINGS<|>Vision Holdings formerly owned TechGlobal from 2014 until present<|>5)\n<|COMPLETE|>\n\n######################\nExample 3:\nEntity_types: ORGANIZATION,GEO,PERSON\nText:\nFive Aurelians jailed for 8 years in Firuzabad and widely regarded as hostages are on their way home to Aurelia.\n\nThe swap orchestrated by Quintara was finalized when $8bn of Firuzi funds were transferred to financial institutions in Krohaara, the capital of Quintara.\n\nThe exchange initiated in Firuzabad's capital, Tiruzia, led to the four men and one woman, who are also Firuzi nationals, boarding a chartered flight to Krohaara.\n\nThey were welcomed by senior Aurelian officials and are now on their way to Aurelia's capital, Cashion.\n\nThe Aurelians include 39-year-old businessman Samuel Namara, who has been held in Tiruzia's Alhamia Prison, as well as journalist Durke Bataglani, 59, and environmentalist Meggie Tazbah, 53, who also holds Bratinas nationality.\n######################\nOutput:\n(\"entity\"<|>FIRUZABAD<|>GEO<|>Firuzabad held Aurelians as hostages)\n##\n(\"entity\"<|>AURELIA<|>GEO<|>Country seeking to release hostages)\n##\n(\"entity\"<|>QUINTARA<|>GEO<|>Country that negotiated a swap of money in exchange for hostages)\n##\n##\n(\"entity\"<|>TIRUZIA<|>GEO<|>Capital of Firuzabad where the Aurelians were being held)\n##\n(\"entity\"<|>KROHAARA<|>GEO<|>Capital city in Quintara)\n##\n(\"entity\"<|>CASHION<|>GEO<|>Capital city in Aurelia)\n##\n(\"entity\"<|>SAMUEL NAMARA<|>PERSON<|>Aurelian who spent time in Tiruzia's Alhamia Prison)\n##\n(\"entity\"<|>ALHAMIA PRISON<|>GEO<|>Prison in Tiruzia)\n##\n(\"entity\"<|>DURKE BATAGLANI<|>PERSON<|>Aurelian journalist who was held hostage)\n##\n(\"entity\"<|>MEGGIE TAZBAH<|>PERSON<|>Bratinas national and environmentalist who was held hostage)\n##\n(\"relationship\"<|>FIRUZABAD<|>AURELIA<|>Firuzabad negotiated a hostage exchange with Aurelia<|>2)\n##\n(\"relationship\"<|>QUINTARA<|>AURELIA<|>Quintara brokered the hostage exchange between Firuzabad and Aurelia<|>2)\n##\n(\"relationship\"<|>QUINTARA<|>FIRUZABAD<|>Quintara brokered the hostage exchange between Firuzabad and Aurelia<|>2)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>ALHAMIA PRISON<|>Samuel Namara was a prisoner at Alhamia prison<|>8)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>MEGGIE TAZBAH<|>Samuel Namara and Meggie Tazbah were exchanged in the same hostage release<|>2)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>DURKE BATAGLANI<|>Samuel Namara and Durke Bataglani were exchanged in the same hostage release<|>2)\n##\n(\"relationship\"<|>MEGGIE TAZBAH<|>DURKE BATAGLANI<|>Meggie Tazbah and Durke Bataglani were exchanged in the same hostage release<|>2)\n##\n(\"relationship\"<|>SAMUEL NAMARA<|>FIRUZABAD<|>Samuel Namara was a hostage in Firuzabad<|>2)\n##\n(\"relationship\"<|>MEGGIE TAZBAH<|>FIRUZABAD<|>Meggie Tazbah was a hostage in Firuzabad<|>2)\n##\n(\"relationship\"<|>DURKE BATAGLANI<|>FIRUZABAD<|>Durke Bataglani was a hostage in Firuzabad<|>2)\n<|COMPLETE|>\n\n######################\n-Real Data-\n######################\nEntity_types: organization,person,geo,event\nText: except for potential family history of chronic diseases (no specifics provided).\",\"impact\":\"Consideration for genetic predispositions to chronic conditions in family history.\",\"risk\":\"Increased risk for future health issues due to family genetic factors.\"},{\"check_date\":\"24/04/2567\",\"description\":\"No allergies reported for drugs, food, or other substances, which decreases the likelihood of allergic reactions during treatment.\",\"impact\":\"Reduced complications from treatment due to lack of known allergies.\",\"risk\":\"Minimal risk for adverse drug reactions.\"},{\"check_date\":\"24/04/2567\",\"description\":\"Nutrition screening marked as normal, indicating no dietary concerns affecting health status.\",\"impact\":\"Patient generally maintains a healthy nutritional status supporting overall health and recovery.\",\"risk\":\"Low risk of malnutrition or dietary-related complications.\"},{\"check_date\":\"24/04/2567\",\"description\":\"Psychological assessment indicates patient is well-cooperative with no current suicidal ideation.\",\"impact\":\"Encourages adherence to treatment plans due to positive mental state.\",\"risk\":\"Minimal risk of non-compliance due to psychological factors.\"}]}\npage_no: 40: {\"items\":[{\"check_date\":\"24/04/2024\",\"description\":\"Multiple cysts in the liver, measuring between 0.4-4.3 cm.\",\"impact\":\"Presence of multiple cysts may indicate a benign condition but requires monitoring.\",\"risk\":\"Potential for complications if cysts become large or symptomatic.\"},{\"check_date\":\"24/04/2024\",\"description\":\"Two nodules in the gallbladder wall, measuring 0.3 cm and 0.4 cm, suggestive of gallbladder polyp.\",\"impact\":\"Indicates possible gallbladder pathology that may require further evaluation.\",\"risk\":\"Risk of gallbladder related issues or malignancy.\"},{\"check_date\":\"24/04/2024\",\"description\":\"Decreased size of a cyst at lower pole of left kidney (now 0.9 cm).\",\"impact\":\"Decreased size may indicate resolution of the cyst or less concern for complications.\",\"risk\":\"Generally low, but ongoing monitoring is necessary.\"},{\"check_date\":\"24/04/2024\",\"description\":\"A bright lesion at the lower pole of left kidney (0.3 cm), possibly renal stone or calcified cyst wall.\",\"impact\":\"Requires further assessment to determine nature of the lesion.\",\"risk\":\"Potential for renal complications depending on the diagnosis.\"},{\"check_date\":\"24/04/2024\",\"description\":\"Stable 0.6-cm hyperechoic lesion at lower pole of left kidney, possibly a hemangiomyolipoma.\",\"impact\":\"No significant change noted; typically benign.\",\"risk\":\"Generally low, but requires continued monitoring.\"}]}\n######################\nOutput:",
        "kwargs": {}
    }
}
{
    "type": "error",
    "data": "Entity Extraction Error",
    "stack": "Traceback (most recent call last):\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\graphrag\\index\\operations\\extract_entities\\graph_extractor.py\", line 127, in __call__\n    result = await self._process_document(text, prompt_variables)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\graphrag\\index\\operations\\extract_entities\\graph_extractor.py\", line 155, in _process_document\n    response = await self._llm(\n               ^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat.py\", line 83, in __call__\n    return await self._text_chat_llm(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\features\\tools_parsing.py\", line 120, in __call__\n    return await self._delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 112, in __call__\n    return await self._invoke(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 128, in _invoke\n    return await self._decorated_target(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\json.py\", line 71, in invoke\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 109, in invoke\n    result = await execute_with_retry()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 93, in execute_with_retry\n    async for a in AsyncRetrying(\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\asyncio\\__init__.py\", line 166, in __anext__\n    do = await self.iter(retry_state=self._retry_state)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\asyncio\\__init__.py\", line 153, in iter\n    result = await action(retry_state)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\_utils.py\", line 99, in inner\n    return call(*args, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\tenacity\\__init__.py\", line 398, in <lambda>\n    self._add_action_func(lambda rs: rs.outcome.result())\n                                     ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\\Lib\\concurrent\\futures\\_base.py\", line 449, in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Program Files\\WindowsApps\\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\\Lib\\concurrent\\futures\\_base.py\", line 401, in __get_result\n    raise self._exception\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 101, in execute_with_retry\n    return await attempt()\n           ^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\retryer.py\", line 78, in attempt\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\rate_limiter.py\", line 70, in invoke\n    result = await delegate(prompt, **args)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\json.py\", line 71, in invoke\n    return await delegate(prompt, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\base\\base.py\", line 152, in _decorator_target\n    output = await self._execute_llm(prompt, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat_text.py\", line 155, in _execute_llm\n    completion = await self._call_completion_or_cache(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\openai\\llm\\chat_text.py\", line 127, in _call_completion_or_cache\n    return await self._cache.get_or_insert(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\fnllm\\services\\cache_interactor.py\", line 50, in get_or_insert\n    entry = await func()\n            ^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\resources\\chat\\completions.py\", line 1702, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1849, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1543, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\openai\\_base_client.py\", line 1644, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.PermissionDeniedError: Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}\n",
    "source": "Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}",
    "details": {
        "doc_index": 0,
        "text": "except for potential family history of chronic diseases (no specifics provided).\",\"impact\":\"Consideration for genetic predispositions to chronic conditions in family history.\",\"risk\":\"Increased risk for future health issues due to family genetic factors.\"},{\"check_date\":\"24/04/2567\",\"description\":\"No allergies reported for drugs, food, or other substances, which decreases the likelihood of allergic reactions during treatment.\",\"impact\":\"Reduced complications from treatment due to lack of known allergies.\",\"risk\":\"Minimal risk for adverse drug reactions.\"},{\"check_date\":\"24/04/2567\",\"description\":\"Nutrition screening marked as normal, indicating no dietary concerns affecting health status.\",\"impact\":\"Patient generally maintains a healthy nutritional status supporting overall health and recovery.\",\"risk\":\"Low risk of malnutrition or dietary-related complications.\"},{\"check_date\":\"24/04/2567\",\"description\":\"Psychological assessment indicates patient is well-cooperative with no current suicidal ideation.\",\"impact\":\"Encourages adherence to treatment plans due to positive mental state.\",\"risk\":\"Minimal risk of non-compliance due to psychological factors.\"}]}\npage_no: 40: {\"items\":[{\"check_date\":\"24/04/2024\",\"description\":\"Multiple cysts in the liver, measuring between 0.4-4.3 cm.\",\"impact\":\"Presence of multiple cysts may indicate a benign condition but requires monitoring.\",\"risk\":\"Potential for complications if cysts become large or symptomatic.\"},{\"check_date\":\"24/04/2024\",\"description\":\"Two nodules in the gallbladder wall, measuring 0.3 cm and 0.4 cm, suggestive of gallbladder polyp.\",\"impact\":\"Indicates possible gallbladder pathology that may require further evaluation.\",\"risk\":\"Risk of gallbladder related issues or malignancy.\"},{\"check_date\":\"24/04/2024\",\"description\":\"Decreased size of a cyst at lower pole of left kidney (now 0.9 cm).\",\"impact\":\"Decreased size may indicate resolution of the cyst or less concern for complications.\",\"risk\":\"Generally low, but ongoing monitoring is necessary.\"},{\"check_date\":\"24/04/2024\",\"description\":\"A bright lesion at the lower pole of left kidney (0.3 cm), possibly renal stone or calcified cyst wall.\",\"impact\":\"Requires further assessment to determine nature of the lesion.\",\"risk\":\"Potential for renal complications depending on the diagnosis.\"},{\"check_date\":\"24/04/2024\",\"description\":\"Stable 0.6-cm hyperechoic lesion at lower pole of left kidney, possibly a hemangiomyolipoma.\",\"impact\":\"No significant change noted; typically benign.\",\"risk\":\"Generally low, but requires continued monitoring.\"}]}"
    }
}
{
    "type": "error",
    "data": "Error running pipeline!",
    "stack": "Traceback (most recent call last):\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\graphrag\\index\\run\\run_workflows.py\", line 166, in _run_workflows\n    result = await run_workflow(\n             ^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\graphrag\\index\\workflows\\extract_graph.py\", line 45, in run_workflow\n    base_entity_nodes, base_relationship_edges = await extract_graph(\n                                                 ^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\graphrag\\index\\flows\\extract_graph.py\", line 33, in extract_graph\n    entities, relationships = await extract_entities(\n                              ^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\graphrag\\index\\operations\\extract_entities\\extract_entities.py\", line 136, in extract_entities\n    entities = _merge_entities(entity_dfs)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\graphrag\\index\\operations\\extract_entities\\extract_entities.py\", line 168, in _merge_entities\n    all_entities.groupby([\"title\", \"type\"], sort=False)\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\pandas\\core\\frame.py\", line 9183, in groupby\n    return DataFrameGroupBy(\n           ^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\pandas\\core\\groupby\\groupby.py\", line 1329, in __init__\n    grouper, exclusions, obj = get_grouper(\n                               ^^^^^^^^^^^^\n  File \"C:\\Users\\asach\\ai\\pydan\\Lib\\site-packages\\pandas\\core\\groupby\\grouper.py\", line 1043, in get_grouper\n    raise KeyError(gpr)\nKeyError: 'title'\n",
    "source": "'title'",
    "details": null
}
